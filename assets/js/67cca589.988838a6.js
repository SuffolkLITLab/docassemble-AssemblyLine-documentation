"use strict";(self.webpackChunkdocassemble_assembly_line_documentation=self.webpackChunkdocassemble_assembly_line_documentation||[]).push([[9358],{4137:(e,t,a)=>{a.d(t,{Zo:()=>u,kt:()=>h});var n=a(7294);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function r(e,t){if(null==e)return{};var a,n,l=function(e,t){if(null==e)return{};var a,n,l={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(l[a]=e[a]);return l}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(l[a]=e[a])}return l}var s=n.createContext({}),d=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},u=function(e){var t=d(e.components);return n.createElement(s.Provider,{value:t},e.children)},p="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},c=n.forwardRef((function(e,t){var a=e.components,l=e.mdxType,i=e.originalType,s=e.parentName,u=r(e,["components","mdxType","originalType","parentName"]),p=d(a),c=l,h=p["".concat(s,".").concat(c)]||p[c]||m[c]||i;return a?n.createElement(h,o(o({ref:t},u),{},{components:a})):n.createElement(h,o({ref:t},u))}));function h(e,t){var a=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var i=a.length,o=new Array(i);o[0]=c;var r={};for(var s in t)hasOwnProperty.call(t,s)&&(r[s]=t[s]);r.originalType=e,r[p]="string"==typeof e?e:l,o[1]=r;for(var d=2;d<i;d++)o[d]=a[d];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}c.displayName="MDXCreateElement"},9835:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>p,frontMatter:()=>i,metadata:()=>r,toc:()=>d});var n=a(7462),l=(a(7294),a(4137));const i={sidebar_label:"al_document",title:"AssemblyLine.al_document"},o=void 0,r={unversionedId:"reference/AssemblyLine/al_document",id:"reference/AssemblyLine/al_document",title:"AssemblyLine.al_document",description:"label",source:"@site/docs/reference/AssemblyLine/al_document.md",sourceDirName:"reference/AssemblyLine",slug:"/reference/AssemblyLine/al_document",permalink:"/docassemble-AssemblyLine-documentation/docs/reference/AssemblyLine/al_document",draft:!1,editUrl:"https://github.com/SuffolkLITLab/docassemble-AssemblyLine-documentation/edit/main/docs/reference/AssemblyLine/al_document.md",tags:[],version:"current",frontMatter:{sidebar_label:"al_document",title:"AssemblyLine.al_document"},sidebar:"api",previous:{title:"al_courts",permalink:"/docassemble-AssemblyLine-documentation/docs/reference/AssemblyLine/al_courts"},next:{title:"al_general",permalink:"/docassemble-AssemblyLine-documentation/docs/reference/AssemblyLine/al_general"}},s={},d=[{value:"label",id:"label",level:4},{value:"key",id:"key",level:4},{value:"html_safe_str",id:"html_safe_str",level:4},{value:"table_row",id:"table_row",level:4},{value:"ALAddendumField Objects",id:"aladdendumfield-objects",level:2},{value:"overflow_value",id:"overflow_value",level:4},{value:"max_lines",id:"max_lines",level:4},{value:"value",id:"value",level:4},{value:"safe_value",id:"safe_value",level:4},{value:"value_if_defined",id:"value_if_defined",level:4},{value:"columns",id:"columns",level:4},{value:"type",id:"type",level:4},{value:"is_list",id:"is_list",level:4},{value:"is_object_list",id:"is_object_list",level:4},{value:"overflow_markdown",id:"overflow_markdown",level:4},{value:"overflow_docx",id:"overflow_docx",level:4},{value:"ALAddendumFieldDict Objects",id:"aladdendumfielddict-objects",level:2},{value:"initializeObject",id:"initializeobject",level:4},{value:"defined_fields",id:"defined_fields",level:4},{value:"has_overflow",id:"has_overflow",level:4},{value:"DALazyAttribute Objects",id:"dalazyattribute-objects",level:2},{value:"ALDocument Objects",id:"aldocument-objects",level:2},{value:"as_docx",id:"as_docx",level:4},{value:"as_list",id:"as_list",level:4},{value:"safe_value",id:"safe_value-1",level:4},{value:"overflow_value",id:"overflow_value-1",level:4},{value:"is_enabled",id:"is_enabled",level:4},{value:"ALStaticDocument Objects",id:"alstaticdocument-objects",level:2},{value:"as_docx",id:"as_docx-1",level:4},{value:"ALDocumentBundle Objects",id:"aldocumentbundle-objects",level:2},{value:"as_pdf",id:"as_pdf",level:4},{value:"as_zip",id:"as_zip",level:4},{value:"has_enabled_documents",id:"has_enabled_documents",level:4},{value:"enabled_documents",id:"enabled_documents",level:4},{value:"as_flat_list",id:"as_flat_list",level:4},{value:"get_titles",id:"get_titles",level:4},{value:"as_pdf_list",id:"as_pdf_list",level:4},{value:"as_docx_list",id:"as_docx_list",level:4},{value:"as_editable_list",id:"as_editable_list",level:4},{value:"download_list_html",id:"download_list_html",level:4},{value:"download_html",id:"download_html",level:4},{value:"send_button_html",id:"send_button_html",level:4},{value:"send_email",id:"send_email",level:4},{value:"is_enabled",id:"is_enabled-1",level:4},{value:"ALExhibit Objects",id:"alexhibit-objects",level:2},{value:"ocr_ready",id:"ocr_ready",level:4},{value:"ocr_pages",id:"ocr_pages",level:4},{value:"as_pdf",id:"as_pdf-1",level:4},{value:"ocrmypdf_task",id:"ocrmypdf_task",level:4},{value:"ALExhibitList Objects",id:"alexhibitlist-objects",level:2},{value:"as_pdf",id:"as_pdf-2",level:4},{value:"size_in_bytes",id:"size_in_bytes",level:4},{value:"ocr_ready",id:"ocr_ready-1",level:4},{value:"hook_after_gather",id:"hook_after_gather",level:4},{value:"ALExhibitDocument Objects",id:"alexhibitdocument-objects",level:2},{value:"has_overflow",id:"has_overflow-1",level:4},{value:"ocr_ready",id:"ocr_ready-2",level:4},{value:"as_pdf",id:"as_pdf-3",level:4},{value:"ALTableDocument Objects",id:"altabledocument-objects",level:2},{value:"has_overflow",id:"has_overflow-2",level:4},{value:"as_pdf",id:"as_pdf-4",level:4},{value:"ALUntransformedDocument Objects",id:"aluntransformeddocument-objects",level:2},{value:"has_overflow",id:"has_overflow-3",level:4},{value:"as_pdf",id:"as_pdf-5",level:4},{value:"ALDocumentUpload Objects",id:"aldocumentupload-objects",level:2},{value:"unpack_dafilelist",id:"unpack_dafilelist",level:4}],u={toc:d};function p(e){let{components:t,...a}=e;return(0,l.kt)("wrapper",(0,n.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h4",{id:"label"},"label"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"def label(dictionary)\n")),(0,l.kt)("p",null,"Given a dictionary like: {",'"',"some_attribute",'"',":",'"',"Some label",'"',"}, return the ",(0,l.kt)("inlineCode",{parentName:"p"},"value")," of the first dictionary item.\nUseful for working with the ",(0,l.kt)("inlineCode",{parentName:"p"},"columns")," method of an ALAddendumField."),(0,l.kt)("h4",{id:"key"},"key"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"def key(dictionary)\n")),(0,l.kt)("p",null,"Given a dictionary like: {",'"',"some_attribute",'"',":",'"',"Some label",'"',"}, return the ",(0,l.kt)("inlineCode",{parentName:"p"},"key")," of the first dictionary item.\nUseful for working with the ",(0,l.kt)("inlineCode",{parentName:"p"},"columns")," method of an ALAddendumField."),(0,l.kt)("h4",{id:"html_safe_str"},"html","_","safe","_","str"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"def html_safe_str(the_string: str) -> str\n")),(0,l.kt)("p",null,"Return a string that can be used as an html class or id"),(0,l.kt)("h4",{id:"table_row"},"table","_","row"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"def table_row(title: str, button_htmls: List[str] = []) -> str\n")),(0,l.kt)("p",null,"Uses the provided title and list of button html strings to\nreturn the row of an AL document-styled table in HTML format."),(0,l.kt)("h2",{id:"aladdendumfield-objects"},"ALAddendumField Objects"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"class ALAddendumField(DAObject)\n")),(0,l.kt)("p",null,"Object representing a single field and its attributes as related to whether\nit should be displayed in an addendum. Useful for PDF templates."),(0,l.kt)("p",null,"The items can be strings or lists/list-like objects. It does not know\nhow to handle overflow for a dictionary, e.g."),(0,l.kt)("p",null,"Required attributes:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"field_name (str): represents the name of a docassemble variable"),(0,l.kt)("li",{parentName:"ul"},"overflow_trigger (int | bool): determines when text is cut off and sent to addendum")),(0,l.kt)("p",null,"Optional/planned (not implemented yet):"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"headers-",">","dict(attribute: display label for table)"),(0,l.kt)("li",{parentName:"ul"},"field_style-",">",'"',"list",'"',"|",'"',"table",'"',"|",'"',"string",'"'," (optional: defaults to ",'"',"string",'"',")")),(0,l.kt)("h4",{id:"overflow_value"},"overflow","_","value"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},'def overflow_value(preserve_newlines: bool = False,\n                   input_width: int = 80,\n                   overflow_message: str = "",\n                   preserve_words: bool = True)\n')),(0,l.kt)("p",null,"Try to return just the portion of the variable (list-like object or string)\nthat is not contained in the safe_value()."),(0,l.kt)("p",null,"Whitespace will be altered. If preserve_newlines is true, the return value may have newlines,\nbut double newlines and Windows style (\\r\\n) will be replaced with \\n. Double spaces will replaced\nwith a single space."),(0,l.kt)("p",null,"If preserve_newlines is false, all whitespace, including newlines and tabs, will be replaced\nwith a single space."),(0,l.kt)("h4",{id:"max_lines"},"max","_","lines"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"def max_lines(input_width: int = 80) -> int\n")),(0,l.kt)("p",null,"Calculate the number of lines of text that will fit in the specified input"),(0,l.kt)("h4",{id:"value"},"value"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"def value() -> Any\n")),(0,l.kt)("p",null,"Return the full value, disregarding overflow. Could be useful in addendum\nif you want to show the whole value without making user flip back/forth between multiple\npages."),(0,l.kt)("h4",{id:"safe_value"},"safe","_","value"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},'def safe_value(overflow_message: str = "",\n               input_width: int = 80,\n               preserve_newlines: bool = False,\n               _original_value: Optional[str] = None,\n               preserve_words: bool = True) -> Union[str, List[Any]]\n')),(0,l.kt)("p",null,"Return just the portion of the variable that heuristics suggest will fit in the specified overflow_trigger\nlimit. If the value is not defined, return empty string."),(0,l.kt)("p",null,"When ",(0,l.kt)("inlineCode",{parentName:"p"},"preserve_newlines")," is ",(0,l.kt)("inlineCode",{parentName:"p"},"True"),", the output will be limited to a number of lines, not a number\nof characters. The max number of lines will be calculated as ",(0,l.kt)("inlineCode",{parentName:"p"},"floor(self.overflow_trigger/input_width)"),".\nTherefore, it is important that ",(0,l.kt)("inlineCode",{parentName:"p"},"input_width")," is a divisor of ",(0,l.kt)("inlineCode",{parentName:"p"},"overflow_trigger"),"."),(0,l.kt)("p",null,"Whitespace will be altered. If preserve_newlines is true, the return value may have newlines,\nbut double newlines and Windows style (\\r\\n) will be replaced with \\n. Double spaces will replaced\nwith a single space."),(0,l.kt)("p",null,"If preserve_newlines is false, all whitespace, including newlines and tabs, will be replaced\nwith a single space."),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Arguments"),":"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"overflow_message")," ",(0,l.kt)("em",{parentName:"li"},"str")," - A short message to go on the page where text is cutoff."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"input_width")," ",(0,l.kt)("em",{parentName:"li"},"int")," - The width, in characters, of the input box. Defaults to 80."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"preserve_newlines")," ",(0,l.kt)("em",{parentName:"li"},"bool")," - Determines whether newlines are preserved in the ",'"',"safe",'"'," text.\nDefaults to False, which means all newlines are removed. This allows more text to appear\nbefore being sent to the addendum."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"_original_value")," ",(0,l.kt)("em",{parentName:"li"},"Any")," - for speed reasons, you can provide the full text and just use this\nmethod to determine if the overflow trigger is exceeded. If no _original_value is\nprovided, this method will determine it using the value_if_defined() method.")),(0,l.kt)("h4",{id:"value_if_defined"},"value","_","if","_","defined"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"def value_if_defined() -> Any\n")),(0,l.kt)("p",null,"Return the value of the field if it is defined, otherwise return an empty string.\nAddendum should never trigger docassemble","'","s variable gathering."),(0,l.kt)("h4",{id:"columns"},"columns"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},'def columns(skip_empty_attributes: bool = True,\n            skip_attributes: set = {"complete"}) -> Optional[list]\n')),(0,l.kt)("p",null,"Return a list of the columns in this object."),(0,l.kt)("p",null,"By default, skip empty attributes and the ",(0,l.kt)("inlineCode",{parentName:"p"},"complete")," attribute."),(0,l.kt)("h4",{id:"type"},"type"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"def type() -> str\n")),(0,l.kt)("p",null,"list | object_list | other"),(0,l.kt)("h4",{id:"is_list"},"is","_","list"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"def is_list() -> bool\n")),(0,l.kt)("p",null,"Identify whether the field is a list, whether of objects/dictionaries or just plain variables."),(0,l.kt)("h4",{id:"is_object_list"},"is","_","object","_","list"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"def is_object_list() -> bool\n")),(0,l.kt)("p",null,"Identify whether the field represents a list of either dictionaries or objects."),(0,l.kt)("h4",{id:"overflow_markdown"},"overflow","_","markdown"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"def overflow_markdown() -> str\n")),(0,l.kt)("p",null,"Return a formatted markdown table or bulleted list representing the values in the list."),(0,l.kt)("p",null,"This method does not give you any control over the output other than labels of columns,\nbut you also do not need to use this output if you want to independently control the format\nof the table."),(0,l.kt)("h4",{id:"overflow_docx"},"overflow","_","docx"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},'def overflow_docx(\n    path: str = "docassemble.ALDocumentDict:data/templates/addendum_table.docx"\n)\n')),(0,l.kt)("p",null,"Light wrapper around insert_docx_template() that inserts a formatted table into a docx\nfile. If the object in the list is a plain string/int, it returns a bulleted list."),(0,l.kt)("p",null,"Using this method will not give you any control at all over the formatting, but you can directly\ncall field.overflow_value() instead of using this method."),(0,l.kt)("h2",{id:"aladdendumfielddict-objects"},"ALAddendumFieldDict Objects"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"class ALAddendumFieldDict(DAOrderedDict)\n")),(0,l.kt)("p",null,"Object representing a list of fields in your output document, together\nwith the character limit for each field."),(0,l.kt)("p",null,"Provides convenient methods to determine if an addendum is needed and to\ncontrol the display of fields so the appropriate text (overflow or safe amount)\nis displayed in each context."),(0,l.kt)("p",null,"Adding a new entry will implicitly set the ",(0,l.kt)("inlineCode",{parentName:"p"},"field_name")," attribute of the field."),(0,l.kt)("p",null,"optional:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"style: if set to ",'"',"overflow_only",'"'," will only display the overflow text")),(0,l.kt)("h4",{id:"initializeobject"},"initializeObject"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"def initializeObject(*pargs, **kwargs)\n")),(0,l.kt)("p",null,"When we create a new entry implicitly, make sure we also set the .field_name\nattribute to the key name so it knows its own field_name."),(0,l.kt)("h4",{id:"defined_fields"},"defined","_","fields"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},'def defined_fields(style="overflow_only")\n')),(0,l.kt)("p",null,"Return a filtered list of just the defined fields.\nIf the ",'"',"style",'"'," is set to overflow_only, only return the overflow values."),(0,l.kt)("h4",{id:"has_overflow"},"has","_","overflow"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"def has_overflow() -> bool\n")),(0,l.kt)("p",null,"Returns True if any defined field","'","s length exceeds the overflow trigger."),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Returns"),":"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"bool")," - True if at least 1 field has ",'"',"overflow",'"'," content, False otherwise.")),(0,l.kt)("h2",{id:"dalazyattribute-objects"},"DALazyAttribute Objects"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"class DALazyAttribute(DAObject)\n")),(0,l.kt)("p",null,"A DAObject with attributes that are reconsidered on every page load. Useful for\ncaching information on a per-page load basis."),(0,l.kt)("p",null,"Takes advantage of the way that objects are pickled in Docassemble by overriding the\n",(0,l.kt)("strong",{parentName:"p"},"getstate")," method Pickle uses."),(0,l.kt)("h2",{id:"aldocument-objects"},"ALDocument Objects"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"class ALDocument(DADict)\n")),(0,l.kt)("p",null,"A dictionary of attachments, either created by a DAFile or an attachment\nblock. Typically there are three:"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"The final version of a document with a signature. E.g., my_doc","['","final","']","."),(0,l.kt)("li",{parentName:"ol"},"The preview version of a document with no signature. E.g.,\nmy_doc","['","preview","']","."),(0,l.kt)("li",{parentName:"ol"},"An addendum of a document contained in the attribute ",(0,l.kt)("inlineCode",{parentName:"li"},"addendum"),". E.g.\n",(0,l.kt)("inlineCode",{parentName:"li"},"my_doc.addendum"),".")),(0,l.kt)("p",null,"There is no limit to the number of keys, but the ALDocumentBundle class\nexpects at least a ",'"',"final",'"'," key to exist, and the ",(0,l.kt)("inlineCode",{parentName:"p"},"addendum")," attribute is\nrequired if you desire to use PDF documents with text overflow. It is best\npractice to use exactly the two keys ",'"',"final",'"'," and ",'"',"preview",'"'," and the attribute\n",'"',"addendum",'"',". The ",'"',"final",'"'," and ",'"',"preview",'"'," documents will normally be the same\ntemplate, but with logic controlling the display of a particular section, such\nas the signature."),(0,l.kt)("p",null,"Each form that an interview generates should get its own ALDocument object."),(0,l.kt)("p",null,"The ",'"',"addendum",'"'," attribute can be handled in a generic object block. Multiple\ndocuments can use the same addendum template, with just the case caption\nvarying."),(0,l.kt)("p",null,"ALDocuments are designed to be used contingently as part of ALDocumentBundle\nobjects. Each ALDocument is considered to be ",'"',"enabled",'"'," or ",'"',"disabled",'"'," for a\nparticular interview user","'","s session. This allows you to always work with a\nsingle object representing all of the possible documents an interview can\ngenerate, and use encapsulated logic to trigger individual documents inclusion\non the final download screen."),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Attributes"),":"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"filename")," ",(0,l.kt)("em",{parentName:"li"},"str")," - name used for output PDF"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"title")," ",(0,l.kt)("em",{parentName:"li"},"str")," - display name for the output PDF"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"enabled")," ",(0,l.kt)("em",{parentName:"li"},"bool")," - if this document should be created. See examples."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"addendum")," ",(0,l.kt)("em",{parentName:"li"},"DAFile | DAFileCollection")," - (optional) an attachment block"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"overflow_fields")," ",(0,l.kt)("em",{parentName:"li"},"ALAddendumField")," - (optional) ALAddendumFieldDict\ninstance. These values will be used to detect and handle overflow."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"has_addendum")," ",(0,l.kt)("em",{parentName:"li"},"bool")," - (optional) Defaults to False. Set to True if the\ndocument could have overflow, like for a PDF template.")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Notes"),":"),(0,l.kt)("p",null,"  The ",(0,l.kt)("inlineCode",{parentName:"p"},"enabled")," attribute should always be defined by a code block or the\nobjects block, because by default it is considered fresh on each page\nload. If your interview logic requires that you directly ask the user\nwhether or not to include a document, you can use a single intermediate\nvariable that is posed to the interview user to work around this\nlimitation."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"Examples")," - # TODO: the code blocks aren","'","t working right yet on the Docusaurus page."),(0,l.kt)("h2",{parentName:"li",id:"simple-use-where-the-document-is-always-enabled-and-will-have-no-addendum"},"Simple use where the document is always enabled and will have no addendum"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"---\nobjects:\n- my_doc: ALDocument.using(filename=&quot;myDoc.pdf&quot;, title=&quot;myDoc&quot;, enabled=True)\n---\nattachment:\nvariable name: my_doc[i]  # This same template will be used for the `preview` and `final` keys\n"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"content")," - |\nHere is some content"),(0,l.kt)("p",{parentName:"li"},"% if i == ","'","final","'",":\n${ users","[0]",".signature }\n% elif i == ","'","preview","'",":\n","[ Your signature here ]","\n% endif"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre"},"\nEnable a document conditionally\n--------------------------------\n```yaml\n---\n# See that `enabled` is not defined here\nobjects:\n- affidavit_of_indigency: ALDocument.using(filename=&quot;affidavit-of-indigency.pdf&quot;, title=&quot;Affidavit of Indigency&quot;)\n---\n"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"code")," - |\naffidavit_of_indigency.enabled = ask_indigency_questions and is_indigent"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre"},"\nAn example enabling with a question posed to the interview user\n----------------------------------------------------------------\nYou should always use a code block or an object block to set the &quot;enabled&quot; status;\nUse an intermediate variable if you want to ask the user directly whether or not to include a document.\n```yaml\n---\n"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"question")," - |\nDo you want the extra document included?\nfields:"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"no label: include_extra_document"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("h2",{parentName:"li",id:"datatype---yesnoradio"},(0,l.kt)("inlineCode",{parentName:"h2"},"datatype")," - yesnoradio")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"code")," - |"),(0,l.kt)("h2",{parentName:"li",id:"extra_documentenabled--include_extra_document"},"extra_document.enabled = include_extra_document"),(0,l.kt)("p",{parentName:"li"},"attachment:\nvariable name: extra_document","[i]"," # This same template will be used for ",(0,l.kt)("inlineCode",{parentName:"p"},"final")," and ",(0,l.kt)("inlineCode",{parentName:"p"},"preview"),"\ndocx template file: extra_document.docx"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre"},"\nFor a document that may need an addendum, you must specify this when the object is created\nor in a mandatory code block. The addendum will only be triggered if the document has &quot;overflow&quot;\nin one of the fields that you specify.\n")),(0,l.kt)("hr",{parentName:"li"}),(0,l.kt)("p",{parentName:"li"},"objects:"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"my_doc: ALDocument.using(filename=",'"',"myDoc.pdf",'"',", title=",'"',"myDoc",'"',", enabled=True, has_addendum=True)")),(0,l.kt)("hr",{parentName:"li"}),(0,l.kt)("p",{parentName:"li"},"attachment:\nvariable name: my_doc","[i]"),(0,l.kt)("h2",{parentName:"li",id:""},"..."),(0,l.kt)("p",{parentName:"li"},"generic object: ALDocument\nattachment:\nvariable name: x.addendum"),(0,l.kt)("h2",{parentName:"li",id:"docx-template-file-docx_addendumdocx"},"docx template file: docx_addendum.docx")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"code")," - |\nmy_doc.overflow_fields","['","big_text_variable","']",".overflow_trigger = 640 # Characters\nmy_doc.overflow_fields","['","big_text_variable","']",".label = ",'"',"Big text label",'"'," # Optional - you may use in your addendum\nmy_doc.overflow_fields","['","list_of_objects_variable","']",".overflow_trigger = 4 # Items in the list\nmy_doc.overflow_fields.gathered = True"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre"},"")))),(0,l.kt)("h4",{id:"as_docx"},"as","_","docx"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},'def as_docx(key: str = "final",\n            refresh: bool = True,\n            append_matching_suffix: bool = True) -> DAFile\n')),(0,l.kt)("p",null,"Returns the assembled document as a single DOCX file, if possible. Otherwise returns a PDF."),(0,l.kt)("h4",{id:"as_list"},"as","_","list"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},'def as_list(key: str = "final", refresh: bool = True) -> List[DAFile]\n')),(0,l.kt)("p",null,"Returns a list of the document and its addendum, if any.\nSpecify refresh=True if you want to generate the attachment new each time.\nThis behavior is the default."),(0,l.kt)("h4",{id:"safe_value-1"},"safe","_","value"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"def safe_value(field_name: str,\n               overflow_message: Optional[str] = None,\n               preserve_newlines: bool = False,\n               input_width: int = 80,\n               preserve_words: bool = True)\n")),(0,l.kt)("p",null,"Shortcut syntax for accessing the ",'"',"safe",'"'," (shorter than overflow trigger)\nvalue of a field that we have specified as needing an addendum."),(0,l.kt)("h4",{id:"overflow_value-1"},"overflow","_","value"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"def overflow_value(field_name: str,\n                   overflow_message: Optional[str] = None,\n                   preserve_newlines: bool = False,\n                   input_width: int = 80,\n                   preserve_words: bool = True)\n")),(0,l.kt)("p",null,"Shortcut syntax for accessing the ",'"',"overflow",'"'," value (amount that exceeds overflow trigger)\nfor the given field as a string."),(0,l.kt)("p",null,"Should mirror the ",'"',"safe_value",'"'," for the same field."),(0,l.kt)("h4",{id:"is_enabled"},"is","_","enabled"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"def is_enabled(refresh=True)\n")),(0,l.kt)("p",null,"A document can be considered ",'"',"enabled",'"'," if:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"the .always_enabled attribute is true (enabled at init)"),(0,l.kt)("li",{parentName:"ul"},"the .enabled attribute is true (calculated fresh once per page load)"),(0,l.kt)("li",{parentName:"ul"},"the cache.enabled attribute is true")),(0,l.kt)("h2",{id:"alstaticdocument-objects"},"ALStaticDocument Objects"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"class ALStaticDocument(DAStaticFile)\n")),(0,l.kt)("p",null,"A class that allows one-line initialization of static documents to include in an ALDocumentBundle."),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Notes"),":"),(0,l.kt)("p",null,"  You should always place the static file within the /data/static folder of a package.\nALDocumentBundle relies on a publically accessible file. The /data/templates folder is private."),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Attributes"),":"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"filename(str)")," - the path to the file within /data/static/."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"title(str)")," - The title that will display as a row when invoked with ",(0,l.kt)("inlineCode",{parentName:"li"},"download_list_html()")," method\nof an ALDocumentBundle.")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Examples"),":"),(0,l.kt)("p",null,"  Add a static PDF file to a document bundle.\n.. code-block:: yaml"),(0,l.kt)("hr",null),(0,l.kt)("p",null,"  objects:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("h2",{parentName:"li",id:"static_test-alstaticdocumentusingtitlestatic-test-filenamestaticpdf-enabledtrue"},"static_test: ALStaticDocument.using(title=",'"',"Static Test",'"',", filename=",'"',"static.pdf",'"',", enabled=True)"),"objects:"),(0,l.kt)("li",{parentName:"ul"},"bundle: ALDocumentBundle.using(elements=","[static_test]",", filename=",'"',"bundle",'"',", title=",'"',"Documents to download now",'"',")")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Todo"),":"),(0,l.kt)("p",null,"  Handle files placed in /data/templates if that turns out to be useful. Likely by copying into\na DAFile with pdf_concatenate()."),(0,l.kt)("h4",{id:"as_docx-1"},"as","_","docx"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},'def as_docx(\n        key: str = "final",\n        refresh: bool = True,\n        append_matching_suffix: bool = False) -> Union[DAStaticFile, DAFile]\n')),(0,l.kt)("p",null,"Returns the assembled document as a single DOCX file, if possible. Otherwise returns a PDF.\nThe ",'"',"append_matching_suffix",'"'," parameter is not used for static documents. They are always\nleft unchanged."),(0,l.kt)("h2",{id:"aldocumentbundle-objects"},"ALDocumentBundle Objects"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"class ALDocumentBundle(DAList)\n")),(0,l.kt)("p",null,"DAList of ALDocuments or nested ALDocumentBundles."),(0,l.kt)("p",null,"Use case: providing a list of documents in a specific order."),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Example"),":"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Cover page")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Main motion form")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Notice of Interpreter Request"),(0,l.kt)("p",{parentName:"li"},"E.g., you may bundle documents one way for the court, one way for the user, one way for the\nopposing party. ALDocuments can separately be ",'"',"enabled",'"'," or ",'"',"disabled",'"'," for a particular run, which\nwill affect their inclusion in all bundles."),(0,l.kt)("p",{parentName:"li"},"A bundle can be returned as one PDF or as a list of documents. If the list contains nested\nbundles, each nested bundle can similarly be returned as a combined PDF or a list of documents."),(0,l.kt)("p",{parentName:"li"},"required attributes:")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"filename")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"title\noptional attribute: enabled"))),(0,l.kt)("h4",{id:"as_pdf"},"as","_","pdf"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},'def as_pdf(key: str = "final",\n           refresh: bool = True,\n           pdfa: bool = False,\n           append_matching_suffix: bool = True) -> Optional[DAFile]\n')),(0,l.kt)("p",null,"Returns the Bundle as a single PDF DAFile, or None if none of the documents are enabled."),(0,l.kt)("h4",{id:"as_zip"},"as","_","zip"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},'def as_zip(key: str = "final",\n           refresh: bool = True,\n           pdfa: bool = False,\n           title: str = "",\n           format="pdf",\n           include_pdf=True) -> DAFile\n')),(0,l.kt)("p",null,"Returns a zip file containing the whole bundle"),(0,l.kt)("h4",{id:"has_enabled_documents"},"has","_","enabled","_","documents"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"def has_enabled_documents(refresh=False) -> bool\n")),(0,l.kt)("p",null,"Return True iff there is at least one enabled document\nin this bundle."),(0,l.kt)("h4",{id:"enabled_documents"},"enabled","_","documents"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"def enabled_documents(refresh: bool = True) -> List[Any]\n")),(0,l.kt)("p",null,"Returns the enabled documents"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Arguments"),":"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"refresh(bool)")," - Controls whether the ","'","enabled","'"," attribute is reconsidered.")),(0,l.kt)("h4",{id:"as_flat_list"},"as","_","flat","_","list"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},'def as_flat_list(key: str = "final", refresh: bool = True) -> List[DAFile]\n')),(0,l.kt)("p",null,"Returns the nested bundle as a single flat list. This could be the preferred way to deliver forms to the\ncourt, e.g.--one file per court form/cover letter."),(0,l.kt)("h4",{id:"get_titles"},"get","_","titles"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},'def get_titles(key: str = "final", refresh: bool = True) -> List[str]\n')),(0,l.kt)("p",null,"Gets all of titles of the documents in a list"),(0,l.kt)("h4",{id:"as_pdf_list"},"as","_","pdf","_","list"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},'def as_pdf_list(key: str = "final",\n                refresh: bool = True,\n                pdfa: bool = False) -> List[DAFile]\n')),(0,l.kt)("p",null,"Returns the nested bundles as a list of PDFs that is only one level deep."),(0,l.kt)("h4",{id:"as_docx_list"},"as","_","docx","_","list"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},'def as_docx_list(key: str = "final", refresh: bool = True) -> List[DAFile]\n')),(0,l.kt)("p",null,"Returns the nested bundles as a list of DOCX files. If the file isn","'","t able\nto be represented as a DOCX, the original file or a PDF will be returned instead."),(0,l.kt)("h4",{id:"as_editable_list"},"as","_","editable","_","list"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},'def as_editable_list(key: str = "final", refresh: bool = True) -> List[DAFile]\n')),(0,l.kt)("p",null,"Return a flat list of the DOCX versions of the docs in this bundle, if they exist."),(0,l.kt)("h4",{id:"download_list_html"},"download","_","list","_","html"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},'def download_list_html(key: str = "final",\n                       format: str = "pdf",\n                       view: bool = True,\n                       refresh: bool = True,\n                       pdfa: bool = False,\n                       include_zip: bool = True,\n                       view_label="View",\n                       view_icon: str = "eye",\n                       download_label: str = "Download",\n                       download_icon: str = "download",\n                       zip_label: Optional[str] = None,\n                       zip_icon: str = "file-archive",\n                       append_matching_suffix: bool = True) -> str\n')),(0,l.kt)("p",null,"Returns string of a table to display a list\nof pdfs with ","'","view","'"," and ","'","download","'"," buttons."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"format")," is one of:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"pdf"),(0,l.kt)("li",{parentName:"ul"},"docx"),(0,l.kt)("li",{parentName:"ul"},"original")),(0,l.kt)("h4",{id:"download_html"},"download","_","html"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},'def download_html(key: str = "final",\n                  format: str = "pdf",\n                  pdfa: bool = False,\n                  view: bool = True,\n                  refresh: bool = True,\n                  view_label: str = "View",\n                  view_icon: str = "eye",\n                  download_label: str = "Download",\n                  download_icon: str = "download") -> str\n')),(0,l.kt)("p",null,"Returns an HTML string of a table to display all the docs\ncombined into one pdf with ","'","view","'"," and ","'","download","'"," buttons."),(0,l.kt)("h4",{id:"send_button_html"},"send","_","button","_","html"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},'def send_button_html(key: str = "final",\n                     show_editable_checkbox: bool = True) -> str\n')),(0,l.kt)("p",null,"Generate HTML for an input box and button that allows someone to send\nthe bundle to the specified email address."),(0,l.kt)("p",null,"Optionally, display a checkbox that allows someone to decide whether or not to\ninclude an editable (Word) copy of the file, iff it is available."),(0,l.kt)("h4",{id:"send_email"},"send","_","email"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},'def send_email(to: Any = None,\n               key: str = "final",\n               editable: bool = False,\n               template: Any = None,\n               **kwargs) -> bool\n')),(0,l.kt)("p",null,"Send an email with the current bundle as a series of flat pdfs (one per bundle entry) or as editable documents.\nCan be used the same as ",(0,l.kt)("a",{parentName:"p",href:"https://docassemble.org/docs/functions.html#send_email"},"https://docassemble.org/docs/functions.html#send_email")," with\ntwo optional additional params."),(0,l.kt)("p",null,"keyword arguments:\n@param to {string} - Same as da send_email ",(0,l.kt)("inlineCode",{parentName:"p"},"to")," - email address(es) or objects with such.\n@param ","[key]"," {string} - Optional. Which version of the doc. Default: ","'","final","'","\n@param ","[editable]"," {bool} - Optional. User wants the editable docs. Default: False\n@param template {object} - Same as da ",(0,l.kt)("inlineCode",{parentName:"p"},"send_email")," ",(0,l.kt)("inlineCode",{parentName:"p"},"template")," variable.\n@param ",(0,l.kt)("em",{parentName:"p"}," {"),"} - Any other parameters you","'","d send to a da ",(0,l.kt)("inlineCode",{parentName:"p"},"send_email")," function"),(0,l.kt)("h4",{id:"is_enabled-1"},"is","_","enabled"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"def is_enabled(refresh=True) -> bool\n")),(0,l.kt)("p",null,"Returns true if the bundle itself is enabled, and it has at least one enabled child document"),(0,l.kt)("h2",{id:"alexhibit-objects"},"ALExhibit Objects"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"class ALExhibit(DAObject)\n")),(0,l.kt)("p",null,"Class to represent a single exhibit, with cover page, which may contain multiple documents representing pages.\nAtributes:\npages (list): List of individual DAFiles representing uploaded images or documents.\ncover_page (DAFile | DAFileCollection): (optional) A DAFile or DAFileCollection object created by an ",(0,l.kt)("inlineCode",{parentName:"p"},"attachment:")," block\nWill typically say something like ",'"',"Exhibit 1",'"',"\nlabel (str): A label, like ",'"',"A",'"'," or ",'"',"1",'"'," for this exhibit in the cover page and table of contents\nstarting_page (int): first page number to use in table of contents"),(0,l.kt)("h4",{id:"ocr_ready"},"ocr","_","ready"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"def ocr_ready() -> bool\n")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Returns"),":"),(0,l.kt)("p",null,"  True iff OCR process has finished on all pages. OCR is non-blocking, and assembly will work\neven if OCR is not complete. Check this status if you want to wait to deliver a document until\nOCR is complete."),(0,l.kt)("p",null,"  Will return true (but log a warning) if OCR was never started on the documents.\nThat situation is likely a developer error, as you shouldn","'","t wait for OCR if it never started"),(0,l.kt)("h4",{id:"ocr_pages"},"ocr","_","pages"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"def ocr_pages()\n")),(0,l.kt)("p",null,"Return the OCR version if it exists; otherwise the initial version of each doc in ",(0,l.kt)("inlineCode",{parentName:"p"},"pages"),"."),(0,l.kt)("h4",{id:"as_pdf-1"},"as","_","pdf"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},'def as_pdf(*,\n           refresh: bool = False,\n           prefix: str = "",\n           pdfa: bool = False,\n           add_page_numbers: bool = True,\n           add_cover_page: bool = True,\n           filename: Optional[str] = None,\n           append_matching_suffix: bool = True) -> DAFile\n')),(0,l.kt)("p",null,"Params:\nprefix (str): the prefix for the bates numbering that is applied if\nadd_page_numbers is true\nadd_page_numbers (bool): adds bates numbering to the exhibit if true,\nstarting at the number self.start_page\nadd_cover_page (bool): adds a cover to this exhibit if true"),(0,l.kt)("h4",{id:"ocrmypdf_task"},"ocrmypdf","_","task"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"def ocrmypdf_task(from_file: Union[DAFile, DAFileList],\n                  to_pdf: DAFile) -> Optional[str]\n")),(0,l.kt)("p",null,"A function that calls ocr my pdf in a subprocess.\nBuilt to be called from a background action (id: al exhibit ocr pages bg)"),(0,l.kt)("h2",{id:"alexhibitlist-objects"},"ALExhibitList Objects"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"class ALExhibitList(DAList)\n")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Attributes"),":"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"maximum_size")," ",(0,l.kt)("em",{parentName:"li"},"int")," - the maximum size in bytes that the whole document is allowed to be"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"auto_label")," ",(0,l.kt)("em",{parentName:"li"},"bool")," - Set to True if you want exhibits to be automatically numbered for purposes of cover page\nand table of contents. Defaults to True."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"auto_labeler")," ",(0,l.kt)("em",{parentName:"li"},"Callable")," - (optional) a function or lambda to transform the index for each exhibit to a label.\nDefaults to labels like A..Z if unspecified."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"auto_ocr")," ",(0,l.kt)("em",{parentName:"li"},"bool")," - Set to True if you would like exhibits to be OCR","'","ed in the background after they are uploaded.\nDefaults to True.")),(0,l.kt)("h4",{id:"as_pdf-2"},"as","_","pdf"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},'def as_pdf(filename="file.pdf",\n           pdfa: bool = False,\n           add_page_numbers: bool = False,\n           toc_pages: int = 0,\n           append_matching_suffix: bool = True) -> DAFile\n')),(0,l.kt)("p",null,"Return a single PDF containing all exhibits."),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Arguments"),":"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"filename")," ",(0,l.kt)("em",{parentName:"li"},"str")," - the filename to be assigned to the generated PDF document."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"add_cover_pages")," ",(0,l.kt)("em",{parentName:"li"},"bool")," - True if each exhibit should have a cover page, like ",'"',"Exhibit A",'"',".")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Returns"),":"),(0,l.kt)("p",null,"  A DAfile containing the rendered exhibit list as a single file."),(0,l.kt)("h4",{id:"size_in_bytes"},"size","_","in","_","bytes"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"def size_in_bytes()\n")),(0,l.kt)("p",null,"Gets the total size in bytes of each of the exhibit documents."),(0,l.kt)("h4",{id:"ocr_ready-1"},"ocr","_","ready"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"def ocr_ready() -> bool\n")),(0,l.kt)("p",null,"Returns ",(0,l.kt)("inlineCode",{parentName:"p"},"True")," iff all individual exhibit pages have been OCRed, or if the OCR process hasn","'","t started."),(0,l.kt)("h4",{id:"hook_after_gather"},"hook","_","after","_","gather"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"def hook_after_gather()\n")),(0,l.kt)("p",null,"Private method automatically triggered when the list is fully gathered."),(0,l.kt)("h2",{id:"alexhibitdocument-objects"},"ALExhibitDocument Objects"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"class ALExhibitDocument(ALDocument)\n")),(0,l.kt)("p",null,"Represents a collection of uploaded documents, formatted like a record appendix or exhibit list, with a table of contents and\noptional page numbering."),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Attributes"),":"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"exhibits")," ",(0,l.kt)("em",{parentName:"li"},"ALExhibitList")," - list of ALExhibit documents. Each item is a separate exhibit, which may be multiple pages."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"table_of_contents")," - DAFile or DAFileCollection object created by an ",(0,l.kt)("inlineCode",{parentName:"li"},"attachment:")," block"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"_cache")," ",(0,l.kt)("em",{parentName:"li"},"DAFile")," - a cached version of the list of exhibits. It may take\na long time to process."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"include_table_of_contents")," ",(0,l.kt)("em",{parentName:"li"},"bool")," - flag to control whether a table of contents is generated for this form"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"include_exhibit_cover_pages")," ",(0,l.kt)("em",{parentName:"li"},"bool")," - flag to control whether cover pages are included with each separate exhibit"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"add_page_numbers")," ",(0,l.kt)("em",{parentName:"li"},"bool")," - Flag that controls whether the as_pdf() method\nalso will add Bates-stamp style page numbers and labels on each page."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"auto_labeler")," ",(0,l.kt)("em",{parentName:"li"},"callable")," - a Lambda or Python function that will be used to label exhibits.")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Todo"),":"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Method of making a safe link in place of the attachment (e.g., filesize limits on email)")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Examples"),":"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"---\nobjects:\n  - exhibit_attachment: ALExhibitDocument.using(title=&quot;Exhibits&quot;, filename=&quot;exhibits&quot; )\n---\ncode: |\n  # This block is not needed, but you can provide and customize for your needs.\n  # This mirrors the fallback block in ql_baseline.yml\n  exhibit_attachment.enabled = exhibit_attachment.exhibits.has_exhibits\n---\nobjects:\n  - al_user_bundle: ALDocumentBundle.using(elements=[my_instructions, my_main_attachment, exhibit_attachment], filename=&quot;user_bundle.pdf&quot;, title=&quot;All forms to download for your records&quot;)\n")),(0,l.kt)("p",null,"  Example of using a custom label function, ",(0,l.kt)("a",{parentName:"p",href:"https://docassemble.org/docs/functions.html#item_label"},"https://docassemble.org/docs/functions.html#item_label"),":"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"---\nobjects:\n  - exhibit_attachment: ALExhibitDocument.using(title=&quot;Exhibits&quot;, filename=&quot;exhibits&quot; , auto_labeler=item_label)\n")),(0,l.kt)("h4",{id:"has_overflow-1"},"has","_","overflow"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"def has_overflow()\n")),(0,l.kt)("p",null,"Provided for signature compatibility with ALDocument. Exhibits do not have overflow."),(0,l.kt)("h4",{id:"ocr_ready-2"},"ocr","_","ready"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"def ocr_ready() -> bool\n")),(0,l.kt)("p",null,"Returns ",(0,l.kt)("inlineCode",{parentName:"p"},"True")," iff each individual exhibit has been OCRed, or if the OCR process was not started."),(0,l.kt)("h4",{id:"as_pdf-3"},"as","_","pdf"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},'def as_pdf(key="final",\n           refresh: bool = True,\n           pdfa: bool = False,\n           append_matching_suffix: bool = True) -> DAFile\n')),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Arguments"),":"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"key")," ",(0,l.kt)("em",{parentName:"li"},"str")," - unused, for signature compatibility with ALDocument"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"refresh")," ",(0,l.kt)("em",{parentName:"li"},"bool")," - unused, for signature compatibility with ALDocument")),(0,l.kt)("h2",{id:"altabledocument-objects"},"ALTableDocument Objects"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"class ALTableDocument(ALDocument)\n")),(0,l.kt)("h4",{id:"has_overflow-2"},"has","_","overflow"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"def has_overflow()\n")),(0,l.kt)("p",null,"Provided for signature compatibility with ALDocument."),(0,l.kt)("h4",{id:"as_pdf-4"},"as","_","pdf"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},'def as_pdf(key: str = "final",\n           refresh: bool = True,\n           pdfa: bool = False,\n           append_matching_suffix: bool = True,\n           **kwargs) -> DAFile\n')),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Arguments"),":"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"key")," ",(0,l.kt)("em",{parentName:"li"},"str")," - unused, for signature compatibility with ALDocument")),(0,l.kt)("h2",{id:"aluntransformeddocument-objects"},"ALUntransformedDocument Objects"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"class ALUntransformedDocument(ALDocument)\n")),(0,l.kt)("h4",{id:"has_overflow-3"},"has","_","overflow"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"def has_overflow()\n")),(0,l.kt)("p",null,"Provided for signature compatibility with ALDocument."),(0,l.kt)("h4",{id:"as_pdf-5"},"as","_","pdf"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},'def as_pdf(key: str = "final",\n           refresh: bool = True,\n           pdfa: bool = False,\n           append_matching_suffix: bool = True,\n           **kwargs) -> DAFile\n')),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Arguments"),":"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"key")," ",(0,l.kt)("em",{parentName:"li"},"str")," - unused, for signature compatibility with ALDocument")),(0,l.kt)("h2",{id:"aldocumentupload-objects"},"ALDocumentUpload Objects"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"class ALDocumentUpload(ALUntransformedDocument)\n")),(0,l.kt)("p",null,"Simplified class to handle uploaded documents, without any of the complexity of the\nALExhibitDocument class."),(0,l.kt)("h4",{id:"unpack_dafilelist"},"unpack","_","dafilelist"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"def unpack_dafilelist(the_file: DAFileList) -> DAFile\n")),(0,l.kt)("p",null,"Creates a plain DAFile out of the first item in a DAFileList"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Arguments"),":"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"the_file")," ",(0,l.kt)("em",{parentName:"li"},"DAFileList")," - an item representing an uploaded document in a Docassemble interview")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Returns"),":"),(0,l.kt)("p",null,"  A DAFile representing the first item in the DAFileList, with a fixed instanceName attribute."))}p.isMDXComponent=!0}}]);