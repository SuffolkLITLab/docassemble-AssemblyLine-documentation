"use strict";(self.webpackChunkdocassemble_assembly_line_documentation=self.webpackChunkdocassemble_assembly_line_documentation||[]).push([[1127],{4137:(e,t,a)=>{a.d(t,{Zo:()=>h,kt:()=>d});var o=a(7294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,o,n=function(e,t){if(null==e)return{};var a,o,n={},r=Object.keys(e);for(o=0;o<r.length;o++)a=r[o],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)a=r[o],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var s=o.createContext({}),u=function(e){var t=o.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},h=function(e){var t=u(e.components);return o.createElement(s.Provider,{value:t},e.children)},p="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},m=o.forwardRef((function(e,t){var a=e.components,n=e.mdxType,r=e.originalType,s=e.parentName,h=l(e,["components","mdxType","originalType","parentName"]),p=u(a),m=n,d=p["".concat(s,".").concat(m)]||p[m]||c[m]||r;return a?o.createElement(d,i(i({ref:t},h),{},{components:a})):o.createElement(d,i({ref:t},h))}));function d(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var r=a.length,i=new Array(r);i[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[p]="string"==typeof e?e:n,i[1]=l;for(var u=2;u<r;u++)i[u]=a[u];return o.createElement.apply(null,i)}return o.createElement.apply(null,a)}m.displayName="MDXCreateElement"},4558:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>p,frontMatter:()=>r,metadata:()=>l,toc:()=>u});var o=a(7462),n=(a(7294),a(4137));const r={id:"alkiln_troubleshooting",title:"ALKiln troubleshooting and errors",sidebar_label:"WIP Troubleshooting & errors",slug:"/alkiln/trouble"},i=void 0,l={unversionedId:"alkiln/alkiln_troubleshooting",id:"alkiln/alkiln_troubleshooting",title:"ALKiln troubleshooting and errors",description:"WIP (Work in progress)",source:"@site/docs/alkiln/troubleshooting.mdx",sourceDirName:"alkiln",slug:"/alkiln/trouble",permalink:"/docassemble-AssemblyLine-documentation/docs/alkiln/trouble",draft:!1,editUrl:"https://github.com/SuffolkLITLab/docassemble-AssemblyLine-documentation/edit/main/docs/alkiln/troubleshooting.mdx",tags:[],version:"current",frontMatter:{id:"alkiln_troubleshooting",title:"ALKiln troubleshooting and errors",sidebar_label:"WIP Troubleshooting & errors",slug:"/alkiln/trouble"},sidebar:"docs",previous:{title:"WIP Writing tests",permalink:"/docassemble-AssemblyLine-documentation/docs/alkiln/writing"},next:{title:"WIP Security",permalink:"/docassemble-AssemblyLine-documentation/docs/alkiln/security"}},s={},u=[{value:"Everything works fine when I run the test manually",id:"manual-works",level:2},{value:"Error: File not found",id:"file-not-found",level:3},{value:"Error: Variable could not be looked up",id:"variable-not-found",level:3},{value:"Skipped variables",id:"skipped",level:2}],h={toc:u};function p(e){let{components:t,...a}=e;return(0,n.kt)("wrapper",(0,o.Z)({},h,a,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("admonition",{type:"warning"},(0,n.kt)("p",{parentName:"admonition"},"WIP (Work in progress)")),(0,n.kt)("p",null,"This page will try to help you figure out what is going wrong when you have errors or other problems with your ALKiln tests."),(0,n.kt)("h2",{id:"manual-works"},"Everything works fine when I run the test manually"),(0,n.kt)("p",null,'Or "It works when I run the interview manually" or "The tests pass when I run them with ALKilnInThePlayground".'),(0,n.kt)("h3",{id:"file-not-found"},"Error: File not found"),(0,n.kt)("p",null,"This might mean that you have a file in your Playground Project, but that you still have to save it on the Project's Packages page and commit that to GitHub. Your tests will pass for that Project in your Playground, but your interview will break when you or others install it from GitHub."),(0,n.kt)("h3",{id:"variable-not-found"},"Error: Variable could not be looked up"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Problem:")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"There was a reference to a variable \u2018some_var\u2019 that could not be looked up in the question file (for language \u2018en\u2019) or in any of the files incorporated by reference into the question file.")),(0,n.kt)("p",null,"This is a reference error. It means docassemble tried to get the definition for a variable, but couldn't find the variable anywhere in your code or in the code you included or imported."),(0,n.kt)("p",null,"Sometime the easiest way to see what is wrong is to run the interview manually. Fill in the same values as the test fills in. You can then see what goes wrong when you reach the error."),(0,n.kt)("p",null,"If running the test manually seems to work fine, but running the automated tests gets a reference error, the test probably either has an incorrect variable name or an incorrect value for a variable. It might even be a value from a page much farther back than you expect."),(0,n.kt)("p",null,"If you have a typo, ALKiln will be unable to find the variable or value that you were trying to set. In some Steps, that will cause a test to fail immediately. In a ",(0,n.kt)("a",{parentName:"p",href:"#story-table"},"Story Table Step"),", ALKiln will just skip optional fields."),(0,n.kt)("p",null,(0,n.kt)("a",{parentName:"p",href:"#checkboxes"},"Checkboxes")," are a common place where authors make mistakes."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Solution:")),(0,n.kt)("p",null,"Check for:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"/docassemble-AssemblyLine-documentation/docs/alkiln/writing#checkboxes"},"Incorrectly setting checkbox values")),(0,n.kt)("li",{parentName:"ul"},"Typos in variable names"),(0,n.kt)("li",{parentName:"ul"},"Typos in the value for radio button options or similar fields")),(0,n.kt)("p",null,"You can check for incorrect variable or value names in a few different ways."),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"If you give every question in your interview an id, the report can help show you where the test failed or where ALKiln skipped setting variables. For each test, the report often has a list of question ids. For each question id, the report has a list of variables that ALKiln set on the page. If the test failed, you can see what question id the test got to. You can also check previous questions to see what variables are missing from each of those pages - what fields ALKiln skipped."),(0,n.kt)("li",{parentName:"ol"},"It is more annoying, but in most cases",(0,n.kt)("sup",{parentName:"li",id:"fnref-except"},(0,n.kt)("a",{parentName:"sup",href:"#fn-except",className:"footnote-ref"},"except"))," you can copy the variable name from your test and search for it in your interview code. You can do the same for values of multiple choice questions."),(0,n.kt)("li",{parentName:"ol"},"Alternatively, in most cases",(0,n.kt)("sup",{parentName:"li",id:"fnref-except"},(0,n.kt)("a",{parentName:"sup",href:"#fn-except",className:"footnote-ref"},"except"))," you can go through the interview manually. For every single page  (even if you think this page has nothing to do with the problem), click on the ",(0,n.kt)("inlineCode",{parentName:"li"},"<\\/>")," in the nav bar to see the source of the page. Copy the name of the variable from your test and search for it on the page of the running interview. For multiple choice questions, do the same for the value. Then answer the questions ",(0,n.kt)("em",{parentName:"li"},"exactly")," as the test would answer them."),(0,n.kt)("li",{parentName:"ol"},"If you are unable to find the name of the variable or value in any other way, our last suggestion is the hardest to do, but most reliable - run the interview manually and examine each page's HTML to find exact names. This is complex and we are happy to show you how to do this. Here is a refresher:",(0,n.kt)("ol",{parentName:"li"},(0,n.kt)("li",{parentName:"ol"},"Go to a new page."),(0,n.kt)("li",{parentName:"ol"},"Click on the ",(0,n.kt)("inlineCode",{parentName:"li"},"<\\/>")," in the nav bar to see the source of the page."),(0,n.kt)("li",{parentName:"ol"},"For every field in the page:",(0,n.kt)("ol",{parentName:"li"},(0,n.kt)("li",{parentName:"ol"},"If you cannot see the variable name or value, like for an ",(0,n.kt)("inlineCode",{parentName:"li"},"object_checkbox")," field or a field created with ",(0,n.kt)("inlineCode",{parentName:"li"},"code"),":",(0,n.kt)("ol",{parentName:"li"},(0,n.kt)("li",{parentName:"ol"},"Open the browser development tools."),(0,n.kt)("li",{parentName:"ol"},"Examine the DOM of a field to find the encoded name of the variable."),(0,n.kt)("li",{parentName:"ol"},"Use ",(0,n.kt)("inlineCode",{parentName:"li"},"atob('the encoded name or id')")," with the encoded name or id to fully decode every part of the variable name. You may have to decode multiple times."),(0,n.kt)("li",{parentName:"ol"},"From those decoded values, put together the variable name that you need to use. "))),(0,n.kt)("li",{parentName:"ol"},"Copy the variable name and use your editor to search for that exact variable name in your test file. The variable name is the fully decoded and reconstructed variable name."),(0,n.kt)("li",{parentName:"ol"},"In the final variable name, replace ",(0,n.kt)("inlineCode",{parentName:"li"},"x"),", ",(0,n.kt)("inlineCode",{parentName:"li"},"i"),", ",(0,n.kt)("inlineCode",{parentName:"li"},"j"),", etc. with their actual values on that page."),(0,n.kt)("li",{parentName:"ol"},"If the field is a multiple choice field like radio buttons, do the same for the value and use your editor to search for that exact value in your test file. Make sure it appears along with the correct variable name. For a checkbox field, the value is either ",(0,n.kt)("inlineCode",{parentName:"li"},"True")," or ",(0,n.kt)("inlineCode",{parentName:"li"},"False"),"."),(0,n.kt)("li",{parentName:"ol"},"Set the value exactly as the test would have set it."))),(0,n.kt)("li",{parentName:"ol"},"Go on to the next page till you reach the end of your interview or the error.")))),(0,n.kt)("h2",{id:"skipped"},"Skipped variables"),(0,n.kt)("p",null,"If you look in a test report and see that ALKiln skipped setting a variable, you probably have a typo. See the ",(0,n.kt)("a",{parentName:"p",href:"#variable-not-found"},"error for a missing variable reference")),(0,n.kt)("div",{className:"footnotes"},(0,n.kt)("hr",{parentName:"div"}),(0,n.kt)("ol",{parentName:"div"},(0,n.kt)("li",{parentName:"ol",id:"fn-except"},"In some cases, you will be unable to find a variable or value name in your interview code. For example, ",(0,n.kt)("inlineCode",{parentName:"li"},"object"),"-type fields, like ",(0,n.kt)("inlineCode",{parentName:"li"},"object_multiselect")," or for fields that use ",(0,n.kt)("inlineCode",{parentName:"li"},"code")," might use values that are outside of your interview code. They might be in a module of your interview, in a module of an interview you ",(0,n.kt)("inlineCode",{parentName:"li"},"include"),", in a database like S3, or somewhere else.",(0,n.kt)("a",{parentName:"li",href:"#fnref-except",className:"footnote-backref"},"\u21a9")))))}p.isMDXComponent=!0}}]);