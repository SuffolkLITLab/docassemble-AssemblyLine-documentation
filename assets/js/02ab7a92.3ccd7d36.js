"use strict";(self.webpackChunkdocassemble_assembly_line_documentation=self.webpackChunkdocassemble_assembly_line_documentation||[]).push([[8389],{4244:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>r,toc:()=>d});var t=n(4848),s=n(8453);const l={id:"efiling_through_docassemble",title:"E-filing through Docassemble\n",sidebar_label:"Integrating Docassemble interviews with e-filing",slug:"/efiling/docassemble"},o=void 0,r={id:"efiling/efiling_through_docassemble",title:"E-filing through Docassemble\n",description:"This is a guide to get from a working Assembly Line Interview to an interview that can e-file through our EFSP to the Tyler EFM system.",source:"@site/docs/efiling/efiling_through_docassemble.md",sourceDirName:"efiling",slug:"/efiling/docassemble",permalink:"/docassemble-AssemblyLine-documentation/docs/efiling/docassemble",draft:!1,unlisted:!1,editUrl:"https://github.com/SuffolkLITLab/docassemble-AssemblyLine-documentation/edit/main/docs/efiling/efiling_through_docassemble.md",tags:[],version:"current",frontMatter:{id:"efiling_through_docassemble",title:"E-filing through Docassemble\n",sidebar_label:"Integrating Docassemble interviews with e-filing",slug:"/efiling/docassemble"},sidebar:"docs",previous:{title:"Overview",permalink:"/docassemble-AssemblyLine-documentation/docs/efiling/overview"},next:{title:"Case Search",permalink:"/docassemble-AssemblyLine-documentation/docs/efiling/case_search"}},a={},d=[{value:"Before starting",id:"before-starting",level:2},{value:"Steps",id:"steps",level:2},{value:"Server Setup",id:"server-setup",level:3},{value:"Including the EFSP Library",id:"including-the-efsp-library",level:3},{value:"Get the information needed to file",id:"get-the-information-needed-to-file",level:3},{value:"Give all of the info that the EFSP needs to file your doc",id:"give-all-of-the-info-that-the-efsp-needs-to-file-your-doc",level:3},{value:"Interview Logic and Question Screens",id:"interview-logic-and-question-screens",level:2}];function c(e){const i={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.p,{children:"This is a guide to get from a working Assembly Line Interview to an interview that can e-file through our EFSP to the Tyler EFM system."}),"\n",(0,t.jsx)(i.admonition,{type:"warning",children:(0,t.jsxs)(i.p,{children:["This e-filing functionality is being updated often, so this documentation might be out of date.\nIf anything is incorrect or doesn't work as expected, feel free to email us at\n",(0,t.jsx)(i.a,{href:"mailto:massaccess@suffolk.edu",children:"massaccess@suffolk.edu"}),"."]})}),"\n",(0,t.jsx)(i.p,{children:"This example interview will be simple; it will make an initial filing into a new case. While our API is flexible enough to\nlet you add capabilities and features to your interview, it's also complex, and some of that complexity will need\nto be embedded into your interview."}),"\n",(0,t.jsx)(i.h2,{id:"before-starting",children:"Before starting"}),"\n",(0,t.jsx)(i.p,{children:"Before starting this guide, you should have:"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:["a working docassemble interview, preferably using the AssemblyLine.","\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:["If you don't have one yet, follow ",(0,t.jsx)(i.a,{href:"https://suffolklitlab.org/docassemble-AssemblyLine-documentation/docs/planning",children:"these steps to author your interview"}),"."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(i.li,{children:"contacted us for access to the EFSP server. We aren't yet making access publicly available, but will include an interest form here when we do."}),"\n"]}),"\n",(0,t.jsx)(i.h2,{id:"steps",children:"Steps"}),"\n",(0,t.jsx)(i.h3,{id:"server-setup",children:"Server Setup"}),"\n",(0,t.jsx)(i.p,{children:"To start, you'll need to setup the server."}),"\n",(0,t.jsxs)(i.p,{children:["First, install the ",(0,t.jsx)(i.a,{href:"https://github.com/SuffolkLITLab/docassemble-EFSPIntegration",children:"docassemble.EFSPIntegration"})," package on your server in docassemble's ",(0,t.jsx)(i.a,{href:"https://docassemble.org/docs/packages.html#installing",children:"Package Management menu"}),"."]}),"\n",(0,t.jsxs)(i.p,{children:["Then, set your docassemble server's ",(0,t.jsx)(i.a,{href:"https://docassemble.org/docs/config.html",children:"configuration"}),".\nIn the configuration file, add the below section, replacing each value on the right with the information that we provide to you."]}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-yaml",children:"efile proxy:\n  api key: abcDEFghiJKL123456789\n  url: https://efile-test.serverurl.com\n  jeffnet api token: ABCDEF123  # only required if your interview operates is Louisiana\n  global waiver: 123a4567-b89c-1234-abcd-123456789000\n  global server admins:\n    - your_email@example.com\n"})}),"\n",(0,t.jsx)(i.h3,{id:"including-the-efsp-library",children:"Including the EFSP Library"}),"\n",(0,t.jsxs)(i.p,{children:["Start by making a blank YAML file in a ",(0,t.jsx)(i.a,{href:"https://docassemble.org/docs/playground.html#interview_files",children:"playground project"}),"."]}),"\n",(0,t.jsx)(i.p,{children:"Next, add our EFSP library to your interview, as well as the AssemblyLine library (so we can use the ALDocument class)."}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-yaml",children:"include:\n  - docassemble.AssemblyLine:assembly_line.yml\n  - docassemble.EFSPIntegration:efiling_integration.yml\n  - docassemble.EFSPIntegration:login_qs.yml\n  - docassemble.EFSPIntegration:codes_helper.yml\n"})}),"\n",(0,t.jsx)(i.p,{children:"Next, create a connection to our EFSP server. This allows your interview to communicate with our EFSP server."}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-yaml",children:"code: |\n  proxy_conn = ProxyConnection(credentials_code_block='tyler_login', default_jurisdiction='illinois')\n"})}),"\n",(0,t.jsxs)(i.p,{children:["The ",(0,t.jsx)(i.code,{children:"credentials_code_block"})," is a YAML code block that triggers asking the user questions to login to the Tyler system.\nWe provide a code block that additionally handles password resets and incorrect logins. It defines ",(0,t.jsx)(i.code,{children:"tyler_login"})," at the end, which is why we pass ",(0,t.jsx)(i.code,{children:"tyler_login"})," to the connection object. If you want to have different login screens, you can define your own code block, as long as it sets the trigger variable to\n",(0,t.jsx)(i.code,{children:"True"})," only if ",(0,t.jsx)(i.code,{children:"proxy_conn.authenticate_user(...).is_ok()."}),"."]}),"\n",(0,t.jsxs)(i.p,{children:["The ",(0,t.jsx)(i.code,{children:"default_jurisdiction"})," is the jurisdiction that you are filing in. Currently, we only support ",(0,t.jsx)(i.code,{children:"illinois"}),", and ",(0,t.jsx)(i.code,{children:"louisiana"})," (with ",(0,t.jsx)(i.code,{children:"massachusetts"})," coming soon)."]}),"\n",(0,t.jsx)(i.h3,{id:"get-the-information-needed-to-file",children:"Get the information needed to file"}),"\n",(0,t.jsx)(i.p,{children:"As mentioned previously, this interview will create a new case with the court, aka an initial filing.\nTo keep it simple, the interview will only file one type of case; this lets us hardcode a few pieces of information in our interview."}),"\n",(0,t.jsx)(i.p,{children:"We'll first need to find the right \"codes\" for our interview. Tyler's E-filing system defines specific codes for many different\nparts of the filing process, include the over-arching category of the case, the more specific case type, and even things like whether or not\nthe filed document should be confidential or not."}),"\n",(0,t.jsxs)(i.p,{children:["To find the right codes, navigate through the URLs provided by visiting ",(0,t.jsx)(i.a,{href:"https://efile-test.suffolklitlab.org/jurisdictions/illinois/codes",children:"https://efile-test.suffolklitlab.org/jurisdictions/illinois/codes"}),".\nFirefox will display clickable links that you can use to browse the different codes."]}),"\n",(0,t.jsxs)(i.p,{children:["For example, say we want to write an Adoption interview. The codes in Illinois are split by courts, so to see the case categories available to\none particular court, say Adams, we can go to\n",(0,t.jsx)(i.a,{href:"https://efile-test.suffolklitlab.org/jurisdictions/illinois/codes/courts/adams/categories",children:"https://efile-test.suffolklitlab.org/jurisdictions/illinois/codes/courts/adams/categories"}),', and scroll through the responses until we find the "Adoption" entry,\ncode 7306. We would then see the case types for Adoption cases in adams at\n',(0,t.jsx)(i.a,{href:"https://efile-test.suffolklitlab.org/jurisdictions/illinois/codes/courts/adams/case_types?category_id=7306&timing=Initial",children:"https://efile-test.suffolklitlab.org/jurisdictions/illinois/codes/courts/adams/case_types?category_id=7306&timing=Initial"}),", which is 25361."]}),"\n",(0,t.jsxs)(i.p,{children:["The endpoints should say when they need parameters, like we provided with ",(0,t.jsx)(i.code,{children:"category_id=7306&timing=Initial"})," above."]}),"\n",(0,t.jsx)(i.p,{children:"We are currently working on a better interface for finding and handling these codes at runtime based on our experiences in Illinois and Massachusetts. Stay tuned."}),"\n",(0,t.jsx)(i.p,{children:"For this guide, we'll stick with a single court, to make things simple to understand. We'll use the following codes:"}),"\n",(0,t.jsxs)(i.table,{children:[(0,t.jsx)(i.thead,{children:(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.th,{children:"variable name"}),(0,t.jsx)(i.th,{children:"purpose"}),(0,t.jsx)(i.th,{children:"example value"}),(0,t.jsx)(i.th,{children:"example meaning"})]})}),(0,t.jsxs)(i.tbody,{children:[(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"efile_case_category"})}),(0,t.jsx)(i.td,{children:"the over arching category of the case"}),(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:'"7306"'})}),(0,t.jsx)(i.td,{children:"Adoption"})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"efile_case_type"})}),(0,t.jsx)(i.td,{children:"the specific type of case"}),(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:'"25361"'})}),(0,t.jsx)(i.td,{children:"Adoption"})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"efile_case_subtype"})}),(0,t.jsx)(i.td,{children:"optional, if there needs to be more specific case types"}),(0,t.jsx)(i.td,{children:"N/A"}),(0,t.jsx)(i.td,{children:"N/A"})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"party_type"})}),(0,t.jsx)(i.td,{children:"what the role of an individual or party is in the case"}),(0,t.jsxs)(i.td,{children:[(0,t.jsx)(i.code,{children:'"7067"'})," or ",(0,t.jsx)(i.code,{children:'"20640"'})]}),(0,t.jsx)(i.td,{children:"Adoptive parent or child"})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"filing_type"})}),(0,t.jsx)(i.td,{children:"what the filing actually is, usually the name of the document"}),(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:'"29730"'})}),(0,t.jsx)(i.td,{children:"Application"})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"document_type"})}),(0,t.jsx)(i.td,{children:"If the document is confidential or not"}),(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:'"5766"'})}),(0,t.jsx)(i.td,{children:"Non-confidential"})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"filing_component"})}),(0,t.jsx)(i.td,{children:"If this is the lead document or if it's an attachment"}),(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:'"332"'})}),(0,t.jsx)(i.td,{children:"Lead document"})]})]})]}),"\n",(0,t.jsx)(i.h3,{id:"give-all-of-the-info-that-the-efsp-needs-to-file-your-doc",children:"Give all of the info that the EFSP needs to file your doc"}),"\n",(0,t.jsx)(i.p,{children:"Now that we have all of the codes that we want, we need to define the right variables, setting their values to the codes we found above."}),"\n",(0,t.jsxs)(i.p,{children:["Your interview must define the list of ",(0,t.jsx)(i.code,{children:"ALIndividual"}),", ",(0,t.jsx)(i.code,{children:"users"})," and ",(0,t.jsx)(i.code,{children:"other_parties"}),". Each individual should have at least a first name. Note that if only a first name is provided, then the person is assumed to be a business. ",(0,t.jsx)(i.code,{children:"users[0]"})," is almost always the person completing the interview, or at least who the form is being completed on behalf of."]}),"\n",(0,t.jsxs)(i.p,{children:["For each object in ",(0,t.jsx)(i.code,{children:"users"})," and in ",(0,t.jsx)(i.code,{children:"other_parties"}),", your interview needs to define the following attributes:"]}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.code,{children:"party_type"}),": this should be the Tyler party type code of that user"]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.code,{children:"is_new"}),": if you are filing into an existing case and are adding additional participants to the case, this should be true. They aren't necessary since this interview is making an initial case (where all parties are implicitly new)."]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.code,{children:"users[0].email"})," must be defined. Email is not required for any other parties."]}),"\n"]}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-yaml",children:"code: |\n  trial_court = 'adams`\n  efile_case_category = '7306'\n  efile_case_type= '25361'\n---\ncode: |\n  users[i].name.first\n  if i == 0:\n    users[i].email\n  users[i].party_type = '7067' # adoptive parent\n  users[i].completed = True\n---\ncode: |\n  other_parties[i].name.first\n  other_parties[i].party_type = '20640' # adoptive child\n  other_parties[i].completed = True\n"})}),"\n",(0,t.jsx)(i.p,{children:"The following variables must also be defined:"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.code,{children:"user_started_case"}),": an Assembly Line variable determining if the ",(0,t.jsx)(i.code,{children:"users"})," are plaintiffs/petitioners."]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.code,{children:"lead_contact"}),": this is the person who will be contacted about the status of this filing, and can just be set to ",(0,t.jsx)(i.code,{children:"users[0]"}),"."]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.code,{children:"tyler_payment_id"}),": This is the payment information that Tyler needs to collect payment for the filing. It is the string of the payment method ID. We'll deal more with this in the advanced guide (coming soon), but  for now, we'll assume that the filer qualifies for a fee waiver, and can use the global waiver payment account, \"global\" meaning that any filer can use when filing. You can get this waiver payment account from the config: ",(0,t.jsx)(i.code,{children:"get_config('efile proxy', {}).get('global waiver', '')"}),"."]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.code,{children:"al_court_bundle"})," should be an ALDocumentBundle, containing all of the documents that you want to file. Each top level ALDocument or ALDocumentBundle in ",(0,t.jsx)(i.code,{children:"al_court_bundle"})," will be treated as a separate filing, and each filing needs the following attributes:","\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.code,{children:"filing_component"})," and ",(0,t.jsx)(i.code,{children:"filing_type"})]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.code,{children:"filename"}),": this will be defined by default when declaring the ALDocument"]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.code,{children:"filing_parties"}),": these are the parties that are initiating the filing. When the party that's filing is also being added in that filing, the value is the ",(0,t.jsx)(i.code,{children:"instanceName"})," of docassemble var representing that individual. Usually this will be ",(0,t.jsx)(i.code,{children:'"users[0]"'}),"."]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.code,{children:"filing_action"}),": for us, this will be ",(0,t.jsx)(i.code,{children:'"efile"'})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-yaml",children:"---\ncode: |\n  main_document.document_type = '5766'\n  main_document.filing_component = '332'\n  main_document.filing_type = '29730'\n  main_document.filing_parties = ['users[0]']\n  main_document.filing_action = 'efile'\n  main_document.completed = True\n"})}),"\n",(0,t.jsx)(i.h2,{id:"interview-logic-and-question-screens",children:"Interview Logic and Question Screens"}),"\n",(0,t.jsxs)(i.p,{children:["Now that all of the information is defined, we just need to specify the interview order logic. Notably, you can use the variable ",(0,t.jsx)(i.code,{children:"can_check_efile"})," to\nask the user if they want to e-file their documents, or if they'd rather print them out themselves. You can then define the variables ",(0,t.jsx)(i.code,{children:"ready_to_efile"})," and ",(0,t.jsx)(i.code,{children:"efile"})," to trigger actual document to e-file."]}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-yaml",children:"mandatory: True\nid: main interview order block\ncode: |\n  user_ask_role = 'plaintiff'\n  users.gather(complete_attribute='completed')\n  other_parties.gather(complete_attribute='completed')\n  if can_check_efile:\n    tyler_login\n    lead_contact = users[0]\n    main_document.completed\n    tyler_payment_id = get_config('efile proxy', {}).get('global waiver', '')\n    ready_to_efile\n    efile\n    ending_screen\n  else:\n    cannot_efile # triggers the kickout event screen\n"})}),"\n",(0,t.jsxs)(i.p,{children:["The full minimal interview file can be found ",(0,t.jsx)(i.a,{href:"https://github.com/SuffolkLITLab/docassemble-EFSPIntegration/blob/main/docassemble/EFSPIntegration/data/questions/minimal_interview.yml",children:"in the EFSPIntegration github"}),"."]})]})}function h(e={}){const{wrapper:i}={...(0,s.R)(),...e.components};return i?(0,t.jsx)(i,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453:(e,i,n)=>{n.d(i,{R:()=>o,x:()=>r});var t=n(6540);const s={},l=t.createContext(s);function o(e){const i=t.useContext(l);return t.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function r(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),t.createElement(l.Provider,{value:i},e.children)}}}]);