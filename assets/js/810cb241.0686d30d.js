"use strict";(globalThis.webpackChunkdocassemble_assembly_line_documentation=globalThis.webpackChunkdocassemble_assembly_line_documentation||[]).push([[6896],{2206(e,s,n){n.r(s),n.d(s,{assets:()=>d,contentTitle:()=>t,default:()=>h,frontMatter:()=>r,metadata:()=>a,toc:()=>o});const a=JSON.parse('{"id":"components/ALDashboard/aldashboard","title":"ALDashboard.aldashboard","description":"* ALDashboard.aldashboard","source":"@site/docs/components/ALDashboard/aldashboard.md","sourceDirName":"components/ALDashboard","slug":"/components/ALDashboard/","permalink":"/docs/components/ALDashboard/","draft":false,"unlisted":false,"editUrl":"https://github.com/SuffolkLITLab/docassemble-AssemblyLine-documentation/edit/main/docs/components/ALDashboard/aldashboard.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"About ALDashboard","permalink":"/docs/components/ALDashboard/overview"},"next":{"title":"ALDashboard.create_package","permalink":"/docs/components/ALDashboard/create_package"}}');var i=n(4848),l=n(8453);const r={},t="ALDashboard.aldashboard",d={},o=[{value:"speedy_get_users",id:"speedy_get_users",level:3},{value:"speedy_get_sessions",id:"speedy_get_sessions",level:3},{value:"dashboard_get_session_variables",id:"dashboard_get_session_variables",level:3},{value:"ALPackageInstaller Objects",id:"alpackageinstaller-objects",level:2},{value:"get_validated_github_username",id:"get_validated_github_username",level:3},{value:"ErrorList Objects",id:"errorlist-objects",level:2},{value:"ErrorLikeObject Objects",id:"errorlikeobject-objects",level:2},{value:"install_fonts",id:"install_fonts",level:3},{value:"list_installed_fonts",id:"list_installed_fonts",level:3},{value:"nicer_interview_filename",id:"nicer_interview_filename",level:3},{value:"make_usage_rows",id:"make_usage_rows",level:3},{value:"Arguments",id:"arguments",level:4},{value:"Returns",id:"returns",level:4},{value:"dashboard_session_activity",id:"dashboard_session_activity",level:3},{value:"Arguments",id:"arguments-1",level:4},{value:"compute_heatmap_styles",id:"compute_heatmap_styles",level:3},{value:"list_question_files_in_package",id:"list_question_files_in_package",level:3},{value:"Arguments",id:"arguments-2",level:4},{value:"Returns",id:"returns-1",level:4},{value:"list_question_files_in_docassemble_packages",id:"list_question_files_in_docassemble_packages",level:3},{value:"Returns",id:"returns-2",level:4},{value:"increment_index_value",id:"increment_index_value",level:3},{value:"Arguments",id:"arguments-3",level:4},{value:"get_current_index_value",id:"get_current_index_value",level:3},{value:"Returns",id:"returns-3",level:4},{value:"get_latest_s3_folder",id:"get_latest_s3_folder",level:3}];function c(e){const s={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.header,{children:(0,i.jsx)(s.h1,{id:"aldashboardaldashboard",children:"ALDashboard.aldashboard"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.a,{href:"#ALDashboard.aldashboard",children:"ALDashboard.aldashboard"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.a,{href:"#ALDashboard.aldashboard.speedy_get_users",children:"speedy_get_users"})}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.a,{href:"#ALDashboard.aldashboard.speedy_get_sessions",children:"speedy_get_sessions"})}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.a,{href:"#ALDashboard.aldashboard.dashboard_get_session_variables",children:"dashboard_get_session_variables"})}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.a,{href:"#ALDashboard.aldashboard.ALPackageInstaller",children:"ALPackageInstaller"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.a,{href:"#ALDashboard.aldashboard.ALPackageInstaller.get_validated_github_username",children:"get_validated_github_username"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.a,{href:"#ALDashboard.aldashboard.ErrorList",children:"ErrorList"})}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.a,{href:"#ALDashboard.aldashboard.ErrorLikeObject",children:"ErrorLikeObject"})}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.a,{href:"#ALDashboard.aldashboard.install_fonts",children:"install_fonts"})}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.a,{href:"#ALDashboard.aldashboard.list_installed_fonts",children:"list_installed_fonts"})}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.a,{href:"#ALDashboard.aldashboard.nicer_interview_filename",children:"nicer_interview_filename"})}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.a,{href:"#ALDashboard.aldashboard.make_usage_rows",children:"make_usage_rows"})}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.a,{href:"#ALDashboard.aldashboard.dashboard_session_activity",children:"dashboard_session_activity"})}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.a,{href:"#ALDashboard.aldashboard.compute_heatmap_styles",children:"compute_heatmap_styles"})}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.a,{href:"#ALDashboard.aldashboard.list_question_files_in_package",children:"list_question_files_in_package"})}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.a,{href:"#ALDashboard.aldashboard.list_question_files_in_docassemble_packages",children:"list_question_files_in_docassemble_packages"})}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.a,{href:"#ALDashboard.aldashboard.increment_index_value",children:"increment_index_value"})}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.a,{href:"#ALDashboard.aldashboard.get_current_index_value",children:"get_current_index_value"})}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.a,{href:"#ALDashboard.aldashboard.get_latest_s3_folder",children:"get_latest_s3_folder"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)("a",{id:"ALDashboard.aldashboard.speedy_get_users"}),"\n",(0,i.jsx)(s.h3,{id:"speedy_get_users",children:"speedy_get_users"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-python",children:"def speedy_get_users() -> List[Dict[int, str]]\n"})}),"\n",(0,i.jsx)(s.p,{children:"Return a list of all users in the database. Possibly faster than get_user_list()."}),"\n",(0,i.jsx)("a",{id:"ALDashboard.aldashboard.speedy_get_sessions"}),"\n",(0,i.jsx)(s.h3,{id:"speedy_get_sessions",children:"speedy_get_sessions"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-python",children:'def speedy_get_sessions(user_id: Optional[int] = None,\n                        filename: Optional[str] = None,\n                        filter_step1: bool = True,\n                        metadata_key_name: str = "metadata") -> List[Tuple]\n'})}),"\n",(0,i.jsx)(s.p,{children:"Return a list of the most recent 500 sessions, optionally tied to a specific user ID."}),"\n",(0,i.jsx)(s.p,{children:"Each session is a tuple with named columns:\nfilename,\nuser_id,\nmodtime,\nkey"}),"\n",(0,i.jsx)("a",{id:"ALDashboard.aldashboard.dashboard_get_session_variables"}),"\n",(0,i.jsx)(s.h3,{id:"dashboard_get_session_variables",children:"dashboard_get_session_variables"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-python",children:"def dashboard_get_session_variables(session_id: str, filename: str)\n"})}),"\n",(0,i.jsx)(s.p,{children:"Return the variables and steps for a given session ID and YAML filename in serializable dictionary format."}),"\n",(0,i.jsx)("a",{id:"ALDashboard.aldashboard.ALPackageInstaller"}),"\n",(0,i.jsx)(s.h2,{id:"alpackageinstaller-objects",children:"ALPackageInstaller Objects"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-python",children:"class ALPackageInstaller(DAObject)\n"})}),"\n",(0,i.jsx)(s.p,{children:"Methods and state for installing AssemblyLine."}),"\n",(0,i.jsx)("a",{id:"ALDashboard.aldashboard.ALPackageInstaller.get_validated_github_username"}),"\n",(0,i.jsx)(s.h3,{id:"get_validated_github_username",children:"get_validated_github_username"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-python",children:"def get_validated_github_username(access_token: str)\n"})}),"\n",(0,i.jsxs)(s.p,{children:["Given a valid GitHub ",(0,i.jsx)(s.code,{children:"access_token"}),", returns the username associated with it.\nOtherwise, adds one or more errors to the installer."]}),"\n",(0,i.jsx)("a",{id:"ALDashboard.aldashboard.ErrorList"}),"\n",(0,i.jsx)(s.h2,{id:"errorlist-objects",children:"ErrorList Objects"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-python",children:"class ErrorList(DAList)\n"})}),"\n",(0,i.jsxs)(s.p,{children:["Contains ",(0,i.jsx)(s.code,{children:"ErrorLikeObject"}),"s so they can be recognized by docassemble."]}),"\n",(0,i.jsx)("a",{id:"ALDashboard.aldashboard.ErrorLikeObject"}),"\n",(0,i.jsx)(s.h2,{id:"errorlikeobject-objects",children:"ErrorLikeObject Objects"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-python",children:"class ErrorLikeObject(DAObject)\n"})}),"\n",(0,i.jsxs)(s.p,{children:["An object with a ",(0,i.jsx)(s.code,{children:"template_name"})," that identifies the DALazyTemplate that will\nshow its error. It can contain any other attributes so its template can access them\nas needed. DAObject doesn't seem to be enough to allow template definition."]}),"\n",(0,i.jsx)("a",{id:"ALDashboard.aldashboard.install_fonts"}),"\n",(0,i.jsx)(s.h3,{id:"install_fonts",children:"install_fonts"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-python",children:"def install_fonts(the_font_files: DAFileList)\n"})}),"\n",(0,i.jsx)(s.p,{children:"Install fonts to the server and restart both supervisor and unoconv."}),"\n",(0,i.jsx)("a",{id:"ALDashboard.aldashboard.list_installed_fonts"}),"\n",(0,i.jsx)(s.h3,{id:"list_installed_fonts",children:"list_installed_fonts"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-python",children:"def list_installed_fonts()\n"})}),"\n",(0,i.jsx)(s.p,{children:"List the fonts installed on the server."}),"\n",(0,i.jsx)("a",{id:"ALDashboard.aldashboard.nicer_interview_filename"}),"\n",(0,i.jsx)(s.h3,{id:"nicer_interview_filename",children:"nicer_interview_filename"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-python",children:"def nicer_interview_filename(filename: str) -> str\n"})}),"\n",(0,i.jsxs)(s.p,{children:["Given a filename like docassemble.playground10ALWeaver",":data","/questions/assembly_line.yml,\nreturn a less cluttered name like: playground10ALWeaver",":assembly_line"]}),"\n",(0,i.jsx)("a",{id:"ALDashboard.aldashboard.make_usage_rows"}),"\n",(0,i.jsx)(s.h3,{id:"make_usage_rows",children:"make_usage_rows"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-python",children:"def make_usage_rows(current_interview_usage: Optional[Dict[int, List[Dict]]],\n                    nicer_fn: Callable[[str], str] = lambda x: x,\n                    limit: int = 10) -> List[Dict]\n"})}),"\n",(0,i.jsxs)(s.p,{children:["Convert the nested ",(0,i.jsx)(s.code,{children:"current_interview_usage"})," structure into a list of rows\nsuitable for rendering in the template."]}),"\n",(0,i.jsx)(s.h4,{id:"arguments",children:"Arguments"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"current_interview_usage"})," - mapping of minute -> list of dicts with keys\nincluding 'filename', 'sessions', 'users'. Typically the output\nof ",(0,i.jsx)(s.code,{children:"dashboard_session_activity"}),"."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"nicer_fn"})," - callable that receives a filename and returns a display title."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"limit"})," - maximum number of rows to return (sorted by total recent sessions)."]}),"\n"]}),"\n",(0,i.jsx)(s.h4,{id:"returns",children:"Returns"}),"\n",(0,i.jsx)(s.p,{children:"A list of dicts with keys: filename, title, s_1, s_5, s_10, s_30, s_60,\ns_120, users, total"}),"\n",(0,i.jsx)("a",{id:"ALDashboard.aldashboard.dashboard_session_activity"}),"\n",(0,i.jsx)(s.h3,{id:"dashboard_session_activity",children:"dashboard_session_activity"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-python",children:"def dashboard_session_activity(minutes_list=None,\n                               limit: int = 10,\n                               exclude_filenames=None)\n"})}),"\n",(0,i.jsx)(s.p,{children:"Return a dict mapping each minutes value to a list of top interviews by session starts\nduring the last N minutes. Each list contains dicts with keys: filename, sessions, users, title."}),"\n",(0,i.jsx)(s.h4,{id:"arguments-1",children:"Arguments"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:"minutes_list"})," - time windows to report on (default: [1, 5, 10, 30, 60, 120])"]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:"limit"})," - max interviews per window (default: 10)"]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:"exclude_filenames"}),' - list of exact filenames or package prefixes to exclude.\nBy default, excludes docassemble.ALDashboard: and entries from\nget_config("assembly line",{}).get("interview list",{}).get("exclude from interview list")']}),"\n",(0,i.jsx)(s.p,{children:"Example return value:"}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:"{60"})," - [{'filename': 'docassemble.foo",":data","/questions/x.yml', 'sessions': 12, 'users': 9, 'title': 'foo",":x","'}, ...], ...}"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)("a",{id:"ALDashboard.aldashboard.compute_heatmap_styles"}),"\n",(0,i.jsx)(s.h3,{id:"compute_heatmap_styles",children:"compute_heatmap_styles"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-python",children:"def compute_heatmap_styles(rows, windows: Optional[tuple] = None)\n"})}),"\n",(0,i.jsx)(s.p,{children:"Add inline styles for a log-scaled heatmap to each row dict."}),"\n",(0,i.jsx)("a",{id:"ALDashboard.aldashboard.list_question_files_in_package"}),"\n",(0,i.jsx)(s.h3,{id:"list_question_files_in_package",children:"list_question_files_in_package"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-python",children:"def list_question_files_in_package(package_name: str) -> Optional[List[str]]\n"})}),"\n",(0,i.jsx)(s.p,{children:"List all the files in the 'data/questions' directory of a package."}),"\n",(0,i.jsx)(s.h4,{id:"arguments-2",children:"Arguments"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"package_name"})," ",(0,i.jsx)(s.em,{children:"str"})," - The name of the package to list files from."]}),"\n"]}),"\n",(0,i.jsx)(s.h4,{id:"returns-1",children:"Returns"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"List[str]"})," - A list of filenames in the 'data/questions' directory of the package."]}),"\n"]}),"\n",(0,i.jsx)("a",{id:"ALDashboard.aldashboard.list_question_files_in_docassemble_packages"}),"\n",(0,i.jsx)(s.h3,{id:"list_question_files_in_docassemble_packages",children:"list_question_files_in_docassemble_packages"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-python",children:"def list_question_files_in_docassemble_packages()\n"})}),"\n",(0,i.jsx)(s.p,{children:"List all the files in the 'data/questions' directory of all docassemble packages."}),"\n",(0,i.jsx)(s.h4,{id:"returns-2",children:"Returns"}),"\n",(0,i.jsx)(s.p,{children:"Dict[str, List[str]]: A dictionary where the keys are package names and the values are lists of filenames in the 'data/questions' directory of the package."}),"\n",(0,i.jsx)("a",{id:"ALDashboard.aldashboard.increment_index_value"}),"\n",(0,i.jsx)(s.h3,{id:"increment_index_value",children:"increment_index_value"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-python",children:'def increment_index_value(by: int = 5000,\n                          index_name: str = "uploads_indexno_seq")\n'})}),"\n",(0,i.jsx)(s.p,{children:"Increment the file index value in the database by a specified amount."}),"\n",(0,i.jsx)(s.h4,{id:"arguments-3",children:"Arguments"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"by"})," ",(0,i.jsx)(s.em,{children:"int"})," - The amount to increment the file index value by. Defaults to 5000."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"index_name"})," ",(0,i.jsx)(s.em,{children:"str"}),' - The name of the sequence to increment. Defaults to "uploads_indexno_seq".']}),"\n"]}),"\n",(0,i.jsx)("a",{id:"ALDashboard.aldashboard.get_current_index_value"}),"\n",(0,i.jsx)(s.h3,{id:"get_current_index_value",children:"get_current_index_value"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-python",children:"def get_current_index_value() -> int\n"})}),"\n",(0,i.jsx)(s.p,{children:"Get the current value of the file index sequence."}),"\n",(0,i.jsx)(s.h4,{id:"returns-3",children:"Returns"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"int"})," - The current value of the file index sequence."]}),"\n"]}),"\n",(0,i.jsx)("a",{id:"ALDashboard.aldashboard.get_latest_s3_folder"}),"\n",(0,i.jsx)(s.h3,{id:"get_latest_s3_folder",children:"get_latest_s3_folder"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-python",children:'def get_latest_s3_folder(prefix: str = "files/") -> Optional[int]\n'})}),"\n",(0,i.jsxs)(s.p,{children:["Return the highest integer \u201cfolder\u201d that exists directly under ",(0,i.jsx)(s.em,{children:"prefix"}),",\nor None if there are no numeric folders at all."]}),"\n",(0,i.jsx)(s.p,{children:"\u2022 Uses the S3 LIST paginator, so it works for any number of prefixes.\n\u2022 Ignores non\u2011numeric folder names (e.g. files/tmp/, files/images/, \u2026).\n\u2022 Requires only read permission for ListObjectsV2."}),"\n",(0,i.jsx)(s.p,{children:"Example return value: 45237"})]})}function h(e={}){const{wrapper:s}={...(0,l.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453(e,s,n){n.d(s,{R:()=>r,x:()=>t});var a=n(6540);const i={},l=a.createContext(i);function r(e){const s=a.useContext(l);return a.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function t(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),a.createElement(l.Provider,{value:s},e.children)}}}]);