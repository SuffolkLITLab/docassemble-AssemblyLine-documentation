"use strict";(self.webpackChunkdocassemble_assembly_line_documentation=self.webpackChunkdocassemble_assembly_line_documentation||[]).push([[7687],{4137:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>h});var a=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=a.createContext({}),c=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},d=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},u="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),u=c(n),m=o,h=u["".concat(l,".").concat(m)]||u[m]||p[m]||i;return n?a.createElement(h,r(r({ref:t},d),{},{components:n})):a.createElement(h,r({ref:t},d))}));function h(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,r=new Array(i);r[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[u]="string"==typeof e?e:o,r[1]=s;for(var c=2;c<i;c++)r[c]=n[c];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},2071:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>u,frontMatter:()=>i,metadata:()=>s,toc:()=>c});var a=n(7462),o=(n(7294),n(4137));const i={id:"tracking_usage",title:"Tracking usage of Assembly Line interviews\n",sidebar_label:"Tracking usage of Assembly Line interviews\n",slug:"/analytics/tracking_usage"},r=void 0,s={unversionedId:"analytics/tracking_usage",id:"analytics/tracking_usage",title:"Tracking usage of Assembly Line interviews\n",description:"Overview",source:"@site/docs/analytics/tracking_usage.md",sourceDirName:"analytics",slug:"/analytics/tracking_usage",permalink:"/docassemble-AssemblyLine-documentation/docs/analytics/tracking_usage",draft:!1,editUrl:"https://github.com/SuffolkLITLab/docassemble-AssemblyLine-documentation/edit/main/docs/analytics/tracking_usage.md",tags:[],version:"current",frontMatter:{id:"tracking_usage",title:"Tracking usage of Assembly Line interviews\n",sidebar_label:"Tracking usage of Assembly Line interviews\n",slug:"/analytics/tracking_usage"},sidebar:"mainSidebar",previous:{title:"Monitoring",permalink:"/docassemble-AssemblyLine-documentation/docs/efiling/monitoring"},next:{title:"Contributors",permalink:"/docassemble-AssemblyLine-documentation/docs/contributors"}},l={},c=[{value:"Overview",id:"overview",level:2},{value:"Collecting anonymous analytics with Google or Segment",id:"collecting-anonymous-analytics-with-google-or-segment",level:2},{value:"Collecting information with <code>store_variables_snapshot()</code>",id:"collecting-information-with-store_variables_snapshot",level:2},{value:"Viewing information stored by <code>store_variables_snapshot()</code>",id:"viewing-information-stored-by-store_variables_snapshot",level:3}],d={toc:c};function u(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"overview"},"Overview"),(0,o.kt)("p",null,"Docassemble is designed to protect the privacy of interview users. However, you may\nhave very good reasons to collect usage information:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Your users might all be inside a single organization rather than consumers"),(0,o.kt)("li",{parentName:"ul"},"You may need to collect anonymous statistics to report to a funder"),(0,o.kt)("li",{parentName:"ul"},"You may be an entity like a court or tribunal and need the information for a\nlegitimate purpose, to serve the user or litigant's needs")),(0,o.kt)("h2",{id:"collecting-anonymous-analytics-with-google-or-segment"},"Collecting anonymous analytics with Google or Segment"),(0,o.kt)("p",null,"Docassemble has a native integration with both ",(0,o.kt)("a",{parentName:"p",href:"https://docassemble.org/docs/config.html#google%20analytics"},"Google\nAnalytics")," and\n",(0,o.kt)("a",{parentName:"p",href:"https://docassemble.org/docs/config.html#segment%20id"},"Segment"),"."),(0,o.kt)("p",null,"Google is widely used and free, but usage is reported to Google and used for\npurposes of selling advertisements. Segment is a commercial analytics tool with\na paid tier."),(0,o.kt)("p",null,"An advantage of Google Analytics and Segment is that the data will be stored for\nthe long term and you do not need to worry about persisting it between server\noutages or upgrades, nor about retaining information long term on your server. A\ndisadvantage is that they rely on well-known user tracking tools that may be\nblocked by ad-blocking or other security software, so the usage statistics may\nnot be completely accurate."),(0,o.kt)("p",null,"To use this integration:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Make sure each question in your interview has an ",(0,o.kt)("inlineCode",{parentName:"li"},"id"),". The ",(0,o.kt)("inlineCode",{parentName:"li"},"id")," specifier\nwill be added automatically to interviews created with the Assembly Line Weaver.")),(0,o.kt)("p",null,"Example:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"id: this is the google or segment analytics id\nquestion: |\n  What is your name\nfields:\n  - Name: user_name\n")),(0,o.kt)("p",null,"Sign up for Google Analytics or Segment, and follow the ",(0,o.kt)("a",{parentName:"p",href:"https://docassemble.org/docs/config.html#google%20analytics"},"Docassemble\ndocumentation")," to\nenable tracking with the system of your choice."),(0,o.kt)("p",null,"This integration allows for very basic tracking. You can identify popular\ninterviews, screens, and dropoff points. Perhaps the most important thing to\ntrack is to assign an id named ",(0,o.kt)("inlineCode",{parentName:"p"},"download"),' to your download screen. Then, inside\nGoogle Analytics, you can search for the keyword "download" under Behavior |\nSite Content | All pages.'),(0,o.kt)("p",null,'Note that the "page url" in Google Analytics will have the name of the package\nand YAML file inserted into the URL. This means you do not need to worry about\nprefixing the page IDs in order to uniquely track the usage of different\ninterviews installed on your server.'),(0,o.kt)("h2",{id:"collecting-information-with-store_variables_snapshot"},"Collecting information with ",(0,o.kt)("inlineCode",{parentName:"h2"},"store_variables_snapshot()")),(0,o.kt)("p",null,"By default, every interview created by the Weaver includes this line in a\nmandatory ",(0,o.kt)("inlineCode",{parentName:"p"},"code")," block:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'store_variables_snapshot({"zip": users[0].address.zip})\n')),(0,o.kt)("p",null,"This code runs immediately before the download screen, providing a good proxy of\ncompleted interviews. It stores the user's zip code in the Docassemble\ndatatabase, and can be used to run reports about anonymous usage."),(0,o.kt)("p",null,"You can choose to narrow or expand the data that is captured with this tool. The\ndefault stores only the zip code, but if you remove all parameters, the user's\nfull interview session will be captured in a simplified state. You can also\nmanually add additional interview variables that you want to store. For example,\nif you wanted to store the user's city and the list of options they chose for a\ncheckbox variable named ",(0,o.kt)("inlineCode",{parentName:"p"},"user_preference"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'store_variables_snapshot({\n    "zip": users[0].address.zip,\n    "city": users[0].address.city,\n    "user_preference": user_preference.true_values()\n    })\n')),(0,o.kt)("p",null,'Docassemble interviews can store complex nested objects that don\'t fit neatly in\na spreadsheet. If you want to manipulate the data later, you may want to\n"flatten" the data so that it is a neat linear list of fields. That will make\nlater analysis easier.'),(0,o.kt)("p",null,"You may also want to adjust the time that the data is stored. If you add the\nparameter ",(0,o.kt)("inlineCode",{parentName:"p"},"persistent=True"),", the data will persist even if the user's session is deleted,\nwhich may happen every 90 days in a default Docassemble server environment."),(0,o.kt)("p",null,"Full documentation for\n",(0,o.kt)("a",{parentName:"p",href:"https://docassemble.org/docs/functions.html#store_variables_snapshot"},(0,o.kt)("inlineCode",{parentName:"a"},"store_variables_snapshot()")),"\ncan be found on the Docassemble website."),(0,o.kt)("h3",{id:"viewing-information-stored-by-store_variables_snapshot"},"Viewing information stored by ",(0,o.kt)("inlineCode",{parentName:"h3"},"store_variables_snapshot()")),(0,o.kt)("p",null,"You can use the Assembly Line\n",(0,o.kt)("a",{parentName:"p",href:"https://github.com/suffolklitlab/docassemble-InterviewStats"},(0,o.kt)("inlineCode",{parentName:"a"},"InterviewStats"))," package to\nview statistics that are captured with ",(0,o.kt)("inlineCode",{parentName:"p"},"store_variables_snapshot()"),"."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"InterviewStats")," can be installed with the ",(0,o.kt)("inlineCode",{parentName:"p"},"ALDashboard")," installation wizard.\nOnce it is installed, visit\n",(0,o.kt)("inlineCode",{parentName:"p"},"https://docassemble.example.com/start/InterviewStats/stats")," (replace\ndocassemble.example.com with the correct address for your docassemble server)."),(0,o.kt)("p",null,"You will see a selection of interviews to choose from. This list is taken from\nthe list of interviews that you have set up in the ",(0,o.kt)("a",{parentName:"p",href:"https://docassemble.org/docs/config.html#dispatch"},(0,o.kt)("inlineCode",{parentName:"a"},"dispatch"),"\ndirective")," in your\ndocassemble configuration file."),(0,o.kt)("p",null,"Once you select an interview, you will be able browse and view basic summary information about it.\nYou will also see a link to download the full data as an Excel spreadsheet."))}u.isMDXComponent=!0}}]);