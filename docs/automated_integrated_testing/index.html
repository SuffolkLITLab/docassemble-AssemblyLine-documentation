<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.13">
<title data-react-helmet="true">Automated testing | The Document Assembly Line Project</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://suffolklitlab.org/docassemble-AssemblyLine-documentation/docs/automated_integrated_testing"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Automated testing | The Document Assembly Line Project"><meta data-react-helmet="true" name="description" content="ðŸš§ Reference for writing automated integrated tests with the Assembly Line testing framework."><meta data-react-helmet="true" property="og:description" content="ðŸš§ Reference for writing automated integrated tests with the Assembly Line testing framework."><link data-react-helmet="true" rel="icon" href="/docassemble-AssemblyLine-documentation/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://suffolklitlab.org/docassemble-AssemblyLine-documentation/docs/automated_integrated_testing"><link data-react-helmet="true" rel="alternate" href="https://suffolklitlab.org/docassemble-AssemblyLine-documentation/docs/automated_integrated_testing" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://suffolklitlab.org/docassemble-AssemblyLine-documentation/docs/automated_integrated_testing" hreflang="x-default"><link rel="stylesheet" href="/docassemble-AssemblyLine-documentation/assets/css/styles.c1c9249e.css">
<link rel="preload" href="/docassemble-AssemblyLine-documentation/assets/js/runtime~main.0c48d773.js" as="script">
<link rel="preload" href="/docassemble-AssemblyLine-documentation/assets/js/main.c38404df.js" as="script">
</head>
<body data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docassemble-AssemblyLine-documentation/"><b class="navbar__title">The Document Assembly Line Project</b></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/SuffolkLITLab/docassemble-AssemblyLine-documentation" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_71bT toggle_3Zt9 toggleDisabled_3cF-"><div class="toggleTrack_32Fl" role="button" tabindex="-1"><div class="toggleTrackCheck_3lV7"><span class="toggleIcon_O4iE">ðŸŒœ</span></div><div class="toggleTrackX_S2yS"><span class="toggleIcon_O4iE">ðŸŒž</span></div><div class="toggleTrackThumb_xI_Z"></div></div><input type="checkbox" class="toggleScreenReader_28Tw" aria-label="Switch between dark and light mode"></div><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-current"></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_35hR" type="button"></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docassemble-AssemblyLine-documentation/docs/">About</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docassemble-AssemblyLine-documentation/docs/bootcamp">Bootcamp</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docassemble-AssemblyLine-documentation/docs/getting_started">Getting started: Setting up your own Assembly Line
</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/docassemble-AssemblyLine-documentation/docs/assembly_line_steps">Assembly Line Process</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docassemble-AssemblyLine-documentation/docs/installation">Installation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docassemble-AssemblyLine-documentation/docs/al_project_architecture">AL Project Architecture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docassemble-AssemblyLine-documentation/docs/customization/overview">Customization and theming</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/docassemble-AssemblyLine-documentation/docs/planning">Authoring your interview</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/docassemble-AssemblyLine-documentation/docs/style_guide/question_overview">How to write good questions</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/docassemble-AssemblyLine-documentation/docs/question_library/names">Question library</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/docassemble-AssemblyLine-documentation/docs/coding_style_guide">Coding Style Guide</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docassemble-AssemblyLine-documentation/docs/github">Github tutorials</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_2fq0" href="/docassemble-AssemblyLine-documentation/docs/framework/overview">Feature documentation</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docassemble-AssemblyLine-documentation/docs/framework/overview">Feature Documentation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docassemble-AssemblyLine-documentation/docs/framework/magic_variables">Special variables for Assembly Line interviews</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docassemble-AssemblyLine-documentation/docs/framework/algeneral">ALGeneral: Python Classes representing people
</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docassemble-AssemblyLine-documentation/docs/framework/aldocument">ALDocument: Python Classes to simplify working with multiple templates
</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docassemble-AssemblyLine-documentation/docs/framework/altoolbox">ALToolbox functions and components</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docassemble-AssemblyLine-documentation/docs/automated_integrated_testing">Automated testing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docassemble-AssemblyLine-documentation/docs/framework/efiling">E-filing</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docassemble-AssemblyLine-documentation/docs/contributors">Contributors</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/docassemble-AssemblyLine-documentation/docs/reference/al_general">API Reference</a></div></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Automated testing</h1></header><p>ðŸš§ Reference for writing automated integrated tests with the Assembly Line testing framework.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="intro">Intro<a aria-hidden="true" class="hash-link" href="#intro" title="Direct link to heading">â€‹</a></h2><p>The Kiln (Assembly Line Kiln) framework runs tests on your docassemble interview through GitHub, making sure your interviews are running the way you want.</p><p><strong>Kiln works with any docassemble interview</strong>, though it was developed through the Document Assembly Line project.</p><p>Docacon 2021, 10 minute intro presentation:</p><iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/YB-e-MGtLgI?start=3482&amp;end=4115" title="10 minute intro of Assembly Line Kiln testing framework at Docacon 2021" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"></iframe><h2 class="anchor anchorWithStickyNavbar_31ik" id="start">Start<a aria-hidden="true" class="hash-link" href="#start" title="Direct link to heading">â€‹</a></h2><ol><li>Prepare your repository or organization for testing using <a href="https://apps-dev.suffolklitlab.org/start/test-setup" target="_blank" rel="noopener noreferrer">https://apps-dev.suffolklitlab.org/start/test-setup</a>. Follow the instructions there to add new code to your repository.</li><li>In Docassemble, make a new Project and pull in the updated code.</li><li>Write tests in your Sources folder. You should already have an example test there to start with, created by the test setup interview.</li></ol><h2 class="anchor anchorWithStickyNavbar_31ik" id="how-does-it-work">How does it work?<a aria-hidden="true" class="hash-link" href="#how-does-it-work" title="Direct link to heading">â€‹</a></h2><p>Whenever you push to GitHub, GitHub will run the tests automatically with a bot that goes to whatever interviews you named in the tests and fills in the fields. You can see the tests running in your repository&#x27;s <a href="https://docs.github.com/en/actions/learn-github-actions/understanding-github-actions#viewing-the-workflows-activity" target="_blank" rel="noopener noreferrer">GitHub Actions page</a>.</p><p>At the end, you can see a report right in the GitHub Action or <a href="https://docs.github.com/en/actions/managing-workflow-runs/downloading-workflow-artifacts" target="_blank" rel="noopener noreferrer">download the report artifact to your computer</a>.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="quick-reminders">Quick reminders<a aria-hidden="true" class="hash-link" href="#quick-reminders" title="Direct link to heading">â€‹</a></h2><ol><li>You write and edit <code>.feature</code> test files in your Sources folder.</li><li>By default, each Step or field may only take 30 seconds. You can change that with the &quot;the maximum seconds&quot; Step listed in the Steps.</li><li>Tests are run in GitHub when you commit.</li><li>Tests can download files, but humans have to review them to see if they&#x27;ve come out right.</li><li>You will be able to download screenshots of pages that errored. They&#x27;re in <a href="https://docs.github.com/en/actions/managing-workflow-runs/downloading-workflow-artifacts" target="_blank" rel="noopener noreferrer">the Action&#x27;s artifact section</a>.</li><li>ALKiln also creates test reports that you can download in the same place.</li></ol><p>Give us feedback and ideas by making issues at <a href="https://github.com/plocket/docassemble-cucumber/issues" target="_blank" rel="noopener noreferrer">https://github.com/plocket/docassemble-cucumber/issues</a>.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="example">Example<a aria-hidden="true" class="hash-link" href="#example" title="Direct link to heading">â€‹</a></h3><p>The tests use the <a href="https://cucumber.io/docs/gherkin/reference/" target="_blank" rel="noopener noreferrer">gherkin language and syntax</a>. Here&#x27;s a complex example for a quick refresher on some of our features:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">@children</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Feature: I have children</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  @fast @child_benefits</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Scenario: child has benefits</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Given I start the interview at &quot;some_file_name.yml&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    And I get to the question id &quot;benefits&quot; with this data:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      | var | value | trigger |</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      | x[i].name.first | Cashmere | children[0].name.first |</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      | x[i].name.last | Davis | children[0].name.first |</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      | x[i].name.first | Casey | children[1].name.first |</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      | x[i].name.last | Davis | children[1].name.first |</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      | x.there_are_any | True | children.there_are_any |</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      | x.target_number | 2 | children.there_is_another |</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    When I set the var &quot;benefits[&#x27;SSI&#x27;]&quot; to &quot;True&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    And I tap to continue</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Then the question id should be &quot;download&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    And I download &quot;some_motion.pdf&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_31ik" id="first-test">First test<a aria-hidden="true" class="hash-link" href="#first-test" title="Direct link to heading">â€‹</a></h2><p>You can write a really simple test right away that just makes sure your YAML file runs. Write a <code>Scenario</code> for each file you want to test.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Feature: Interviews load</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Scenario: The 209A loads</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Given I start the interview at &quot;ma_209a_package.yml&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Scenario: The Plaintiff&#x27;s Motion to Modify loads</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Given I start the interview at &quot;plaintiffs_motion_to_modify_209a.yml&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>You can wait to write more complex tests till your code is more stable.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="story-tables">Story tables<a aria-hidden="true" class="hash-link" href="#story-tables" title="Direct link to heading">â€‹</a></h2><p><strong>Story table</strong> Steps, in our opinion, are the most effective and flexible way to set the values of fields in ALKiln in most cases. Using them, it doesn&#x27;t matter what order you use to list your fields or what order your pages come in. It also doesn&#x27;t matter if you include extra fields accidentally. They are a snapshot of the user who&#x27;s filling out the form for that test.</p><p>You can write a story table that goes all the way through your interview, or a story table that only goes part way.</p><p>Very basically, you tell the story table Step what <code>question</code> you want to get to and the variables and values it will need to get there. Whenever the test gets to a page, it checks your story table for any variables that match a variable on the page. When it finds a match, it sets the value of the field. When it&#x27;s done with a page, it continues to the next page until it reaches the terminal <code>question</code>.</p><p>You can have multiple tables in one Scenario and you can put other steps between story table Steps.</p><div class="admonition admonition-warning alert alert--danger"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>warning</h5></div><div class="admonition-content"><p>A story table Step <strong>must not</strong> be the first step in your Scenario. The <a href="#starting-steps"><code>interview</code> Step</a> <strong>must</strong> come before it.</p></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="generate-a-story-table">Generate a story table<a aria-hidden="true" class="hash-link" href="#generate-a-story-table" title="Direct link to heading">â€‹</a></h3><p>You can use the <a href="https://plocket.github.io/al_story/" target="_blank" rel="noopener noreferrer">story table generator</a> to generate a Scenario draft. Depending on your interview&#x27;s code you might need to edit the table for it to work properly, but it can give you a good start.</p><p>Follow these instructions to use the generator:</p><ol><li>If you don&#x27;t have one already, <a href="#how-do-i-add-a-new-test-file">add a new test file</a>. You can leave out the Scenario.</li><li>Ensure your server config is set up to <a href="https://docassemble.org/docs/config.html#debug" target="_blank" rel="noopener noreferrer">show debug info</a>.</li><li>Run your interview manually until you reach the page you want the story table to get to.</li><li>Open the &quot;source&quot; display of the interview. Currently, that looks like angle brackets, <code>&lt;/&gt;</code>, in the header of the page.</li><li>Note the <code>id</code> of the page.</li><li>Tap the &quot;Show variables and values&quot; button. It will open a new tab showing a big JSON object.</li><li>Copy all the text on that page.</li><li>Go to the <a href="https://plocket.github.io/al_story/" target="_blank" rel="noopener noreferrer">story table generator</a>.</li><li>Paste the JSON into the text area there, as instructed.</li><li>Use the other input fields to help finalize your Scenario, including the page <code>id</code>.</li><li>Copy the Scenario that has been generated for you.</li><li>Paste that into the already prepared test file.</li></ol><p>This works best with interviews that don&#x27;t need <a href="https://docassemble.org/docs/fields.html#index%20variables" target="_blank" rel="noopener noreferrer">index variables</a> or <a href="https://docassemble.org/docs/fields.html#generic" target="_blank" rel="noopener noreferrer">generic objects</a>.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="step-description">Step description<a aria-hidden="true" class="hash-link" href="#step-description" title="Direct link to heading">â€‹</a></h3><p>The Step that triggers a story table is</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    And I get to the question id &quot;some id!&quot; with this data:</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><strong>question id:</strong> The story table needs to know the <code>id</code> of the page this story table should get to. You can find the <code>id</code> in the <code>question</code> block in the YAML, or using the <code>&lt;/&gt;</code> button in the header of an open interview.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="rows">Rows<a aria-hidden="true" class="hash-link" href="#rows" title="Direct link to heading">â€‹</a></h3><p>Indented under the description, put the header row of the table:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">      | var | value | trigger |</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li><code>var</code> lists the variable the field sets exactly as it appears in the code of the question.</li><li><code>value</code> is the value you want the test to fill in.</li><li><code>trigger</code> lists the variable that triggers that variable&#x27;s page. We describe that more in a section below.</li></ul><p>Under that, add a blank row for a field that you want the test to interact with during the interview:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">      |  |  |  |</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>You must include a row for every variable that need to be set in order to get to the page with the <code>id</code> you chose.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="var">var<a aria-hidden="true" class="hash-link" href="#var" title="Direct link to heading">â€‹</a></h3><p>In the <code>var</code> column, write the name of the variable that a field sets <strong>exactly as it appears in the <code>question</code> block</strong>. Most times you can see that name in the YAML <code>question</code> block. If <code>code:</code> is used to create the field&#x27;s variable name, you may have to talk to the developers who wrote that code to find out the name or names of the variable or variables it generates.</p><p>Examples:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">court_date</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">users[0].name.first</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">users[i].children[j].benefits[&#x27;SSI&#x27;]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">x.favorite_color</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="value">value<a aria-hidden="true" class="hash-link" href="#value" title="Direct link to heading">â€‹</a></h3><p>In the <code>value</code> column, write what you want the field to be set to. For checkboxes, <code>True</code> means &#x27;checked&#x27; and <code>False</code> means &#x27;unchecked&#x27;.</p><p>One special value you can include is <code>today</code>. That will insert the date on which the test is being run. You can also subtract from, or add days to, <code>today</code>. Examples:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">      | signature_date | today |  |</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      | court_date | today + 20 |  |</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      | minors_birth_date | today - 3650 |  |</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The last example makes sure that the date is 10 years in the past, ensuring that a minor always stays a minor for that test.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="trigger">trigger<a aria-hidden="true" class="hash-link" href="#trigger" title="Direct link to heading">â€‹</a></h3><p><code>trigger</code> is an optional value in most cases. It is mandatory for rows that list <a href="https://docassemble.org/docs/fields.html#index%20variables" target="_blank" rel="noopener noreferrer">index variables</a>, like <code>i</code>, <code>j</code>, or <code>k</code>, or <a href="https://docassemble.org/docs/fields.html#generic" target="_blank" rel="noopener noreferrer">generic objects</a> (<code>x</code>). Your interview <strong>must always</strong> include <a href="#trigger_variable_code">some special HTML</a> to let the trigger variable work properly. As you can see, you will get a warning in the report if you leave that out.</p><p>In the <code>trigger</code> column, write the name of the variable that triggers the page on which the field appears.</p><p>For the below, the <code>trigger</code> is <code>users[0].hair.how_much</code>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">---</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">id: interview order</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">mandatory: True</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">code: |</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  users[0].hair.how_much</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">---</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">id: hair</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">question: |</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Tell us about your hair</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">fields:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  - How much hair do you have?: users[i].hair.how_much</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  - What color is your hair?: users[i].hair.color</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Your story table rows to set those values would look like this:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">      | var | value | trigger |</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      | users[i].hair.how_much | Enough | users[0].hair.how_much |</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      | users[i].hair.color | Sea green | users[0].hair.how_much |</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Even though the <code>var</code> columns were different, both <code>trigger</code> columns listed <code>users[0].hair.how_much</code>. That&#x27;s because when the docassemble asks for <code>users[0].hair.how_much</code>, both fields are on that page and both variables have to be set.</p><p>There are some rare cases where no <code>trigger</code> exists. For example, <code>question</code> blocks with the <code>mandatory</code> specifier:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">mandatory: True</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">question: |</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Do you like mandatory questions?</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">yesno: likes_mandatory_questions</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>In those cases, leave the <code>trigger</code> column empty.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="story-table-examples">Story table examples<a aria-hidden="true" class="hash-link" href="#story-table-examples" title="Direct link to heading">â€‹</a></h3><p><em>Simple field types with their values.</em></p><p>The &#x27;yes&#x27; choice of <a href="https://docassemble.org/docs/fields.html#yesno" target="_blank" rel="noopener noreferrer">yesno buttons</a>, <a href="https://docassemble.org/docs/fields.html#fields%20yesno" target="_blank" rel="noopener noreferrer">yesnoradio</a> fields, etc.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">      | has_hair | True | has_hair |</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The &#x27;maybe&#x27; choice in <a href="https://docassemble.org/docs/fields.html#yesnomaybe" target="_blank" rel="noopener noreferrer">yesnomaybe buttons</a> and <a href="https://docassemble.org/docs/fields.html#fields%20yesno" target="_blank" rel="noopener noreferrer">datatype: yesnomaybe</a> fields.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">      | has_hair | None | has_hair |</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Checkboxes with multiple choices. The value &#x27;True&#x27; means to check the checkbox and &#x27;False&#x27; means to uncheck it.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">      | benefits[&#x27;SSI&#x27;] | True | benefits |</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Radio or dropdown choices.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">      | favorite_color | green | favorite_color |</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Text field or textarea. Even if the answer has multiple lines, you can only use one line. When a new line is supposed to appear, instead use <code>\n</code>. See below:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">      | favorite_color | Blue.\nNo, green!\nAaah... | favorite_color |</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>A generic object with an index variable.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">      | x[i].name.first | Umi | users[1].name.first |</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="there_is_another-loop"><code>.there_is_another</code> loop<a aria-hidden="true" class="hash-link" href="#there_is_another-loop" title="Direct link to heading">â€‹</a></h3><p>The <code>.there_is_another</code> loop in a story table is more complicated than you might expect.</p><p>The story table must handle setting the <code>.there_is_another</code> attribute automatically. You, as the developer, must pretend to use the <code>.target_number</code> attribute instead, whether you actually use it or not.</p><p>In your <code>var</code> column, replace any <code>.there_is_another</code> rows for a particular variable with with one <code>.target_number</code> row. In the <code>value</code> column, put the number of items of the appropriate type.</p><p>The <code>trigger</code> column should have the name of the page&#x27;s trigger variable, as usual. Example:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">      | x[i].name.first | Jose | users[0].name.first |</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      | x[i].name.first | Sam | users[1].name.first |</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      | x[i].name.first | Umi | users[2].name.first |</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      | x.target_number | 3 | users.there_is_another |</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="story-table-signature">Story table signature<a aria-hidden="true" class="hash-link" href="#story-table-signature" title="Direct link to heading">â€‹</a></h3><p>The <code>value</code> for a row setting a signature doesn&#x27;t matter. All signatures will be a dot.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">      | user.signature |  | user.signature |</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="other-story-table-notes">Other story table notes<a aria-hidden="true" class="hash-link" href="#other-story-table-notes" title="Direct link to heading">â€‹</a></h3><p>Don&#x27;t worry about accidentally including variables that won&#x27;t show up during the test. Extra rows will be ignored.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="steps">Steps<a aria-hidden="true" class="hash-link" href="#steps" title="Direct link to heading">â€‹</a></h2><p><a href="https://cucumber.io/docs/gherkin/reference/#steps" target="_blank" rel="noopener noreferrer">Steps</a> must be written one after the other in the order they should happen. It&#x27;s a bit more like you&#x27;re the user clicking through the form. They can let you do things like download a file or make sure an user input invalidation message appears. If you change the order of the questions, even if you don&#x27;t change any variable names, you may have to update these types of steps to change their order to match the new order of the screens.</p><p>Note: <code>When</code>, <code>Then</code>, <code>And</code>, and <code>Given</code> at the beginning of sentences can all be used interchangeably. It doesn&#x27;t matter which you use.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="starting-steps">Starting Steps<a aria-hidden="true" class="hash-link" href="#starting-steps" title="Direct link to heading">â€‹</a></h3><div class="admonition admonition-warning alert alert--danger"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>warning</h5></div><div class="admonition-content"><p>You <strong>must</strong> include the <code>interview</code> Step in each Scenario before setting any fields.</p></div></div><p>Use an interview&#x27;s filename in the <code>interview</code> Step to open the interview you want to test.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Given I start the interview at &quot;yaml_file_name.yml&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>This Step must <strong>always</strong> be included in <strong>each</strong> <code>Scenario</code> <strong>before</strong> setting the values of any fields. There is no other way for the tests to know what website to go to.</p><hr><p>You can also start by giving your interview more time to load. The default maximum time is 30 seconds. This Step can be useful if you know that your interview takes longer to load.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Given the maximum seconds for each Step is 200</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>This Step can also be used anywhere else in your Scenario to give Steps more time to complete their action.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="observe-things-about-the-page">Observe things about the page<a aria-hidden="true" class="hash-link" href="#observe-things-about-the-page" title="Direct link to heading">â€‹</a></h3><p>To check the id, look at the YAML <code>question</code> block and copy the id from there. This Step can help humans keep track of what page the tests are on. It will also show up in the logs of the tests and can help you see where things went wrong.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Then the question id should be &quot;some yaml block id!&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><hr><p>Some other observational steps are</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Then I can&#x27;t continue</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Then I will be told an answer is invalid</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Then I arrive at the next page</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><hr><p>Screenshots will be in the GitHub action&#x27;s <a href="https://docs.github.com/en/free-pro-team@latest/actions/managing-workflow-runs/downloading-workflow-artifacts" target="_blank" rel="noopener noreferrer">artifacts</a>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Then I take a screenshot</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><hr><p>You can make sure a link appears on the page. For example, a link to quickly leave the page for forms that deal with domestic abuse.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Then I should see the link to &quot;a-url.com&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><hr><p>Checking phrases will be language specific.</p><p>Be aware that sometimes the characters in your code and the characters on screen aren&#x27;t the same. In our code, we often use apostrophes as quotes (<code>&#x27;</code>) and docassemble changes them to actual opening and closing quote characters (<code>â€˜</code> and <code>â€™</code>). It&#x27;s best to copy the text straight from the screen.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Then I SHOULD see the phrase &quot;some phrase&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Then I should NOT see the phrase &quot;some phrase&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="set-fields">Set fields<a aria-hidden="true" class="hash-link" href="#set-fields" title="Direct link to heading">â€‹</a></h3><p>Use this Step to continue to the next page. The text on the button itself doesn&#x27;t matter.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    When I tap to continue</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><hr><p>Use this Step to set the values of fields. Comparing this to <a href="#story-tables">a story table</a>, as described above, the first quotes contain the equivalent of the <a href="#var"><code>var</code></a> column and the second quotes contain the <a href="#value"><code>value</code></a> you want to set.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    When I set the variable &quot;users[i].hair_color&quot; to &quot;blue&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>For example, you can use the special word <code>today</code> as a value to set dates.</p><hr><p>Sign on a signature field. All signatures are the same.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    When I sign</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><hr><p>The &quot;name&quot; Step is specifically for the Document Assembly Line 4-part name questions.</p><p>Avoid punctuation. We recommend you just use 2 names - the first name and last name - but you can have all these formats:</p><ul><li>Firstname Lastname</li><li>Firstname Middlename Lastname</li><li>Firstname Middlename Lastname Suffix (where suffix is one of the dropdown suffix choices, like <code>II</code>)</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    When I set the name of &quot;x[i]&quot; to &quot;Ulli User&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><hr><p>The &quot;address&quot; Step is specifically for the Document Assembly Line 4-part address questions.</p><p>It allows a US address format, but can otherwise be any address you want that matches the format of the example below. Remember the commas.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    When I set the address of &quot;users[0]&quot; to &quot;120 Tremont Street, Unit 1, Boston, MA 02108&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><hr><p>Use the story table Step to make sure the test reaches a particular screen given a set of fields with their values. See a better description in <a href="#story-tables">sections above</a>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    I get to the question id &quot;some question block id&quot; with this data:</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="other-actions">Other actions<a aria-hidden="true" class="hash-link" href="#other-actions" title="Direct link to heading">â€‹</a></h3><p>Use the &quot;continue&quot; Step to continue to the next page. The text on the button itself doesn&#x27;t matter.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    When I tap to continue</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><hr><p>Use the &quot;download&quot; Step to download files so that humans can check that they are correct. The files will be in <a href="https://docs.github.com/en/free-pro-team@latest/actions/managing-workflow-runs/downloading-workflow-artifacts" target="_blank" rel="noopener noreferrer">the GitHub action&#x27;s artifacts</a>. If you think this step could take more than 30 seconds, use the &quot;maximum seconds for each Step&quot; Step) to give the file more time to download.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Then I download &quot;file-name.pdf&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Leave out other parts of file&#x27;s url.</p><hr><p>Use this Step to give your pages or Steps more time to finish. The default maximum time is 30 seconds. This Step can be useful if you know that a page or an interaction with a field will take longer. You can also use it to shorten the time to let tests fail faster. If you need, you can use it in multiple places in each Scenario.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Then the maximum seconds for each Step is 200</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><hr><p>You can use the following &quot;wait&quot; Step to pause once a page has loaded. will let you wait for a number of seconds when you are on a page. The time must be shorter than the maximum amount of time for each Step. By default, that&#x27;s 30 seconds, but you can increase that with the &quot;maximum seconds for each Step&quot; Step.</p><p>Waiting can help in some situations where you run into timing issues. It does nothing for the timing of other steps. You can give this Step any number of seconds, though all Steps will timeout after two minutes. You can add multiple rows of these if you want.</p><p>The situations that need this are pretty rare, but here&#x27;s an example: You navigate to a new page and set a field. Sometimes the test passes, but sometimes the test says an element on this page does not exist. The problem is probably that the page sometimes needs an extra few seconds to load. Add this step in to give it that time.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    When I wait 10 seconds</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Example:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    And I tap to continue</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    When I wait 10 seconds</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    And I set the variable &quot;favorite_color&quot; to &quot;puce&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_31ik" id="tips">Tips<a aria-hidden="true" class="hash-link" href="#tips" title="Direct link to heading">â€‹</a></h2><p><em>Some of these are just good practices to follow when coding your interviews</em></p><p>In questions with choices, give each label a value. See <a href="https://docassemble.org/docs/fields.html#field%20with%20buttons" target="_blank" rel="noopener noreferrer">docassemble&#x27;s documentation on buttons</a> to read about key-value pairs.</p><p>Not great with just labels:</p><div class="codeBlockContainer_K1bP language-yml"><div class="codeBlockContent_hGly yml"><pre tabindex="0" class="prism-code language-yml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">question</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Tell me about yourself</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">fields</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> Favorite color</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Better with values as well:</p><div class="codeBlockContainer_K1bP language-ymlquestion:"><div class="codeBlockContent_hGly ymlquestion:"><pre tabindex="0" class="prism-code language-ymlquestion: codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">fields:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  - Favorite color: user_favorite_color</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>It&#x27;s always possible to use the labels alone, but giving a value as well ensures your tests will work for translated versions of your interview. It also helps your code be more translatable in general.</p><hr><p>Add a <a href="https://docassemble.org/docs/modifiers.html#id" target="_blank" rel="noopener noreferrer">unique id</a> to each <code>question</code> block of your interview. This also helps your team communicate with each other more easily.</p><hr><p>Avoid <code>noyes</code> type fields. For one thing, the <a href="#generate-a-story-table">story table generator</a> code will need less editing. For another, we&#x27;ve found that humans tend to find those confusing too.</p><hr><p>If your package is not importing specifically al_package.yml from the styled Assembly Line package, make sure to add the <a href="#trigger_variable_code">trigger variable code</a> to your interview.</p><hr><p>You can write tests that just go part-way through an interview. That way, you can work on adding more content and yet also be sure that the work you&#x27;ve already done isn&#x27;t affected by the new changes.</p><hr><p>Use old Scenarios or story tables to help you make new ones. You don&#x27;t have to make everything from scratch.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="test-results">Test results<a aria-hidden="true" class="hash-link" href="#test-results" title="Direct link to heading">â€‹</a></h2><p>To see the list of past tests or running tests, go to your repository&#x27;s <a href="https://docs.github.com/en/actions/learn-github-actions/understanding-github-actions#viewing-the-workflows-activity" target="_blank" rel="noopener noreferrer">GitHub Actions page</a>.</p><p>One of the rows should have the text of the commit you just made. The test may have a yellow dot next to it. That means it&#x27;s still running. When the dot has turned into a red &#x27;x&#x27; or a green checkmark, tap on the name to go to the test&#x27;s Summary page.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="summary-page">Summary page<a aria-hidden="true" class="hash-link" href="#summary-page" title="Direct link to heading">â€‹</a></h3><p>ALKiln automatically creates a report for each set of tests. If there are errors, it creates screenshots of those errors. You can <a href="https://docs.github.com/en/actions/managing-workflow-runs/downloading-workflow-artifacts" target="_blank" rel="noopener noreferrer">download these GitHub &quot;artifacts&quot;</a> at the bottom of the Summary page.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="error-screenshots-artifacts">Error screenshots&#x27; artifacts<a aria-hidden="true" class="hash-link" href="#error-screenshots-artifacts" title="Direct link to heading">â€‹</a></h3><p>When a test fails on an interview page, ALKiln will take a screenshot of the page. ALKiln saves these files in the &quot;errors&quot; GitHub artifact. The screenshot&#x27;s name will be made of the scenario description and a timestamp of when the screenshot was taken.</p><p>There you might see that the test was unable to continue to the next page because required fields weren&#x27;t filled, or that a variable wasn&#x27;t defined.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="reports">Reports<a aria-hidden="true" class="hash-link" href="#reports" title="Direct link to heading">â€‹</a></h3><p>We&#x27;re always trying to understand what people would find helpful in these reports. Tell us about your experiences at <a href="https://github.com/SuffolkLITLab/ALKiln/issues" target="_blank" rel="noopener noreferrer">https://github.com/SuffolkLITLab/ALKiln/issues</a>.</p><p>ALKiln saves the report in the &quot;report&quot; GitHub artifact. A report might look something like this:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Assembly Line Kiln Automated Testing Report - Wed, 29 Dec 2021 17:49:00 GMT</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">===============================</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">===============================</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Failed scenarios:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">---------------</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Scenario: I get to the download page</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">---------------</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ERROR: The question id was supposed to be &quot;download&quot;, but it&#x27;s actually &quot;agree-to-terms&quot;.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">**-- Scenario Failed --**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">===============================</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">===============================</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Passed scenarios:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">---------------</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Scenario: I fill in my name</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">---------------</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">screen id: user-name</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      | user.name.first | Maru |  |</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      | user.name.last | Plaintiff |  |</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>A report has a title with the date and time. It also has two main sections - the failed Scenarios and the Scenarios that passed.</p><p>Within each of those, every Scenario will have its own section. In the Scenario&#x27;s section, ALKiln will list the id of each screen where fields were set in the order in which they appeared. Under each <code>screen id</code> will be the names of the variables whose fields were set and the values they were set to. We&#x27;re still working out some issues here.</p><hr><p>If you used a <a href="#story-tables">story table</a> Step, a Scenario might look more like this:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">---------------</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Scenario: I fill in my name</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">---------------</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">screen id: user-name</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      | user.name.first | Maru |  |</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      | user.name.last | Plaintiff |  |</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Rows that got set:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    And I get the question id &quot;child information&quot; with this data:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      | var | value | trigger |</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      | user.name.first | Maru |  |</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      | user.name.last | Plaintiff |  |</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Unused rows:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      | defendant.name.first | Sam |  |</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      | defendant.name.last | Defo |  |</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Since story table Steps don&#x27;t care about having extra unused rows, the report lets you know which rows did or did not get used. If rows are listed under &quot;Unused rows&quot;, ALKiln couldn&#x27;t find the fields for those variables during the test. Despite that, it was still able to get to the desired question id.</p><p>Rows are listed in alphabetical order. If you have thoughts on pros and cons, we&#x27;d love to hear from you.</p><p>If everything looks right to you there, you can copy and paste the text under &quot;Rows that got set&quot; into your test to get rid of the extra rows you&#x27;ve got hanging around.</p><hr><p>If a screen loaded with an error message, ALKiln will try to reload a few times, and will try to log the error message that it saw:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">---------------</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Scenario: I opened the interview</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">---------------</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ERROR: On final attempt to load interview, got &quot;Reference to invalid playground path&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ERROR: On final attempt to load interview, got &quot;Reference to invalid playground path&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ERROR: On final attempt to load interview, got &quot;Reference to invalid playground path&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ERROR: Failed to load &quot;a-great-interview&quot; after 3 tries. Each try gave the page 30 seconds to load.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">**-- Scenario Failed --**</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>You will probably find a screenshot of the page in your <a href="#error-screenshots-artifacts">error artifacts</a>.</p><p>Also watch the <a href="#errors-and-warnings">errors and warnings</a> section for updates on similar information.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="your-screenshots-artifacts">Your screenshots&#x27; artifacts<a aria-hidden="true" class="hash-link" href="#your-screenshots-artifacts" title="Direct link to heading">â€‹</a></h3><p>You can choose to take a screenshot of a page with the <code>Then I take a screenshot</code> Step. ALKiln saves these files in the &quot;screenshots&quot; GitHub artifact.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="your-downloaded-files-artifacts">Your downloaded files&#x27; artifacts<a aria-hidden="true" class="hash-link" href="#your-downloaded-files-artifacts" title="Direct link to heading">â€‹</a></h3><p>You can choose to download a file with the <code>Then I download &quot;file-name.pdf&quot;</code> Step. ALKiln saves these in the &quot;downloads&quot; GitHub artifact. You can read more about that Step in the <a href="#other-actions">Other actions</a> section.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="errors-and-warnings">Errors and warnings<a aria-hidden="true" class="hash-link" href="#errors-and-warnings" title="Direct link to heading">â€‹</a></h2><p>This section will be filled out as we go.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="a-missing-trigger-variable">A missing trigger variable<a aria-hidden="true" class="hash-link" href="#a-missing-trigger-variable" title="Direct link to heading">â€‹</a></h3><p><strong>This warning only matters for story tables that use index variables or generic objects.</strong></p><p>That warning isn&#x27;t a bug, but if the above doesn&#x27;t apply to you, you can ignore it. A future goal of ours is to <a href="https://github.com/SuffolkLITLab/ALKiln/issues/452" target="_blank" rel="noopener noreferrer">remove the warning from Steps that don&#x27;t need it</a>.</p><p>If you are using a story table with index variables or generic objects, you need to add some code to the interview file where you set your <a href="https://docassemble.org/docs/initial.html#metadata" target="_blank" rel="noopener noreferrer"><code>metadata</code> block</a>. It controls items like <code>title</code> and <code>authors</code>.</p><a name="trigger_variable_code"></a><p>Add this code to your <code>metadata</code> block to insert an invisible element in all your screens:</p><div class="codeBlockContainer_K1bP language-yml"><div class="codeBlockContent_hGly yml"><pre tabindex="0" class="prism-code language-yml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">post</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">|</span><span class="token scalar string" style="color:rgb(195, 232, 141)"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token scalar string" style="color:rgb(195, 232, 141)">    &lt;div data-variable=&quot;${ encode_name(str( user_info().variable )) }&quot; id=&quot;trigger&quot; aria-hidden=&quot;true&quot; style=&quot;display: none;&quot;&gt;&lt;/div&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>If you already have something in your <code>post:</code> metadata, just add that code anywhere inside there. There&#x27;s a chance it can interfere with your css styles, so putting it at the end may be the best choice.</p><p>If you want to see some very technical details about why we need it in the first place, you can go to <a href="https://github.com/SuffolkLITLab/ALKiln/issues/256" target="_blank" rel="noopener noreferrer">https://github.com/SuffolkLITLab/ALKiln/issues/256</a>, where we&#x27;ve tried to summarize the problem this is solving. Unfortunately, we haven&#x27;t found another way to solve this particular problem.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="security">Security<a aria-hidden="true" class="hash-link" href="#security" title="Direct link to heading">â€‹</a></h2><p>Using a third-party library or package is always a risk. That said, we&#x27;re working on some measures to help secure our code and to give you access to more secure ways to do this stuff. You can follow this conversation in GitHub at <a href="https://github.com/SuffolkLITLab/ALKiln/issues/425" target="_blank" rel="noopener noreferrer">https://github.com/SuffolkLITLab/ALKiln/issues/425</a>.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="disable-the-tests">Disable the tests<a aria-hidden="true" class="hash-link" href="#disable-the-tests" title="Direct link to heading">â€‹</a></h3><p>If you become worried about the tests, there are different ways you can stop the tests from running.</p><p>In order to run, the test setup interview added a &quot;workflow&quot; file to your repository. GitHub sometimes calls that an &quot;action&quot;. That&#x27;s what triggers the tests. You can manage that workflow, and your actions in general, in GitHub.</p><h4 class="anchor anchorWithStickyNavbar_31ik" id="disabling-tests-in-one-repository">Disabling tests in one repository<a aria-hidden="true" class="hash-link" href="#disabling-tests-in-one-repository" title="Direct link to heading">â€‹</a></h4><p>GitHub lets you disable workflow files like these. See their instructions at <a href="https://docs.github.com/en/actions/managing-workflow-runs/disabling-and-enabling-a-workflow" target="_blank" rel="noopener noreferrer">https://docs.github.com/en/actions/managing-workflow-runs/disabling-and-enabling-a-workflow</a>.</p><p>You can also delete the file from your repository completely. If you go to the front page of your repository, the file is in the <code>workflows</code> folder of the <code>.github</code> folder. It&#x27;s called <code>run_form_tests.yml</code>. GitHub&#x27;s instructions about how to delete a file are at <a href="https://docs.github.com/en/repositories/working-with-files/managing-files/deleting-files-in-a-repository" target="_blank" rel="noopener noreferrer">https://docs.github.com/en/repositories/working-with-files/managing-files/deleting-files-in-a-repository</a>.</p><p>Another option is to disable or limiting all tests, all actions, in your repository. GitHub&#x27;s documentation for managing repository actions is at <a href="https://docs.github.com/en/repositories/managing-your-repositorys-settings-and-features/enabling-features-for-your-repository/managing-github-actions-settings-for-a-repository#managing-github-actions-permissions-for-your-repository" target="_blank" rel="noopener noreferrer">https://docs.github.com/en/repositories/managing-your-repositorys-settings-and-features/enabling-features-for-your-repository/managing-github-actions-settings-for-a-repository#managing-github-actions-permissions-for-your-repository</a>.</p><h4 class="anchor anchorWithStickyNavbar_31ik" id="disabling-tests-for-the-whole-organization">Disabling tests for the whole organization<a aria-hidden="true" class="hash-link" href="#disabling-tests-for-the-whole-organization" title="Direct link to heading">â€‹</a></h4><p>You can disable these tests, or any actions, for a whole organization. GitHub&#x27;s documentation for managing organization actions is at <a href="https://docs.github.com/en/organizations/managing-organization-settings/disabling-or-limiting-github-actions-for-your-organization#managing-github-actions-permissions-for-your-organization" target="_blank" rel="noopener noreferrer">https://docs.github.com/en/organizations/managing-organization-settings/disabling-or-limiting-github-actions-for-your-organization#managing-github-actions-permissions-for-your-organization</a>.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="faq">FAQ<a aria-hidden="true" class="hash-link" href="#faq" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_31ik" id="i-have-a-private-github-repository-can-i-use-this-testing-framework">I have a private GitHub repository. Can I use this testing framework?<a aria-hidden="true" class="hash-link" href="#i-have-a-private-github-repository-can-i-use-this-testing-framework" title="Direct link to heading">â€‹</a></h3><p>Yes, you can use ALKiln with a private repository, though you have to do a bit of extra work.</p><ol><li>Pick a GitHub account that has permission to change the private repository. </li><li>Make sure the account on your docassemble server that you linked to the tests is integrated with the GitHub account. See <a href="https://docassemble.org/docs/packages.html#github" target="_blank" rel="noopener noreferrer">docassemble&#x27;s documentation on integrating a GitHub account</a>.</li></ol><p>As that documentation explains, the GitHub account <em>must</em> be unique to the account on your docassemble server. No two accounts on a docassemble server can be connected to the same GitHub account.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="how-do-i-add-a-new-test-file">How do I add a new test file?<a aria-hidden="true" class="hash-link" href="#how-do-i-add-a-new-test-file" title="Direct link to heading">â€‹</a></h3><p>Go to your Playground &gt; the dropdown Folders menu &gt; Sources.</p><p>Add a new file that ends in the extension <code>.feature</code>. Ex: <code>has_children.feature</code></p><p>Add this to the blank file:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Feature: A description of the category of the tests you&#x27;ll write in this file</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Scenario: The specific situation that this test is written for</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Given I start the interview at &quot;name_of_the_interview_file_to_test.yml&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Make sure that</p><ol><li><code>Feature:</code> and it&#x27;s description is on the first line.</li><li>Each test starts with a <code>Scenario:</code> and its description.</li><li><code>Given I start the interview...</code> is the first line under <code>Scenario</code>.</li></ol><p>After that, you can add the story table or other Steps that will test your code. Add the file to the files you commit to GitHub. From then on, GitHub will run that tests whenever you commit, or push, to GitHub.</p><p>An example for the start of two separate tests for a restraining order:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Feature: I have children</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Scenario: I need visits to be supervised</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Given I start the interview at &quot;restraining_order.yml&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Scenario: I allow unsupervised visitation</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Given I start the interview at &quot;restraining_order.yml&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The Steps under each scenario will be a bit different because they each test a different path for the user.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="how-do-i-add-a-new-test-to-an-existing-test-file">How do I add a new test to an existing test file?<a aria-hidden="true" class="hash-link" href="#how-do-i-add-a-new-test-to-an-existing-test-file" title="Direct link to heading">â€‹</a></h3><p>To add a new test to the existing file you need:</p><ol><li>The keyword <code>Scenario</code> with the <code>Scenario</code> description.</li><li>The step that loads the interview&#x27;s page: <code>Given I start the interview at</code>. You must use it before you fill out any fields: </li></ol><p>Example:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Scenario: I allow unsupervised visitation</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Given I start the interview at &quot;restraining_order.yml&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Make sure to leave the <code>Feature</code> line at the very top of the file.</p><p>After the <code>Given</code> step, you can add the story table or other Steps that will test your interview.</p><p>ALKiln uses the <code>Scenario</code> description to label test results. Try to use something you&#x27;ll recognize later.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="when-do-tests-run">When do tests run?<a aria-hidden="true" class="hash-link" href="#when-do-tests-run" title="Direct link to heading">â€‹</a></h3><p>Tests run when you commit your files to GitHub. That might be when you hit the &#x27;Commit&#x27; button on the Packages page. It can also happen when you edit, add, or delete files in GitHub itself.</p><p>If you know how to use GitHub <a href="https://docs.github.com/en/actions/learn-github-actions/understanding-github-actions#viewing-the-workflows-activity" target="_blank" rel="noopener noreferrer">actions</a>, you can also run the tests manually from GitHub actions with some more options.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="why-should-i-write-a-scenario-description">Why should I write a Scenario description?<a aria-hidden="true" class="hash-link" href="#why-should-i-write-a-scenario-description" title="Direct link to heading">â€‹</a></h3><p>Scenario descriptions affect the names of error screenshot files and report headings, so try to write something you will recognize later.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="built-with">Built with<a aria-hidden="true" class="hash-link" href="#built-with" title="Direct link to heading">â€‹</a></h2><p>Kiln uses cucumberjs, puppeteerjs, cheerio, and runs the assertions using mocha and chai libraries.</p><p>Even though this is built using <a href="https://cucumber.io/" target="_blank" rel="noopener noreferrer">cucumberjs</a>, this framework has a different, less lofty, purpose. cucumber focuses on BDD (behavior driven development). This framework mostly deals with regression testing and other conveniences.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="repositories">Repositories<a aria-hidden="true" class="hash-link" href="#repositories" title="Direct link to heading">â€‹</a></h2><p>ALKiln&#x27;s repository is at <a href="https://github.com/SuffolkLITLab/ALKiln" target="_blank" rel="noopener noreferrer">https://github.com/SuffolkLITLab/ALKiln</a>.</p><p>The developer test setup interivew&#x27;s repo is at <a href="https://github.com/plocket/docassemble-ALAutomatedTestingTests" target="_blank" rel="noopener noreferrer">https://github.com/plocket/docassemble-ALAutomatedTestingTests</a>.</p><p>ALKiln also tests itself using some of the interviews at <a href="https://github.com/plocket/docassemble-ALAutomatedTestingTests" target="_blank" rel="noopener noreferrer">https://github.com/plocket/docassemble-ALAutomatedTestingTests</a>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/SuffolkLITLab/docassemble-AssemblyLine-documentation/edit/main/docs/automated_testing.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docassemble-AssemblyLine-documentation/docs/framework/altoolbox"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« <!-- -->ALToolbox functions and components</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docassemble-AssemblyLine-documentation/docs/framework/efiling"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">E-filing<!-- --> Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#intro" class="table-of-contents__link toc-highlight">Intro</a></li><li><a href="#start" class="table-of-contents__link toc-highlight">Start</a></li><li><a href="#how-does-it-work" class="table-of-contents__link toc-highlight">How does it work?</a></li><li><a href="#quick-reminders" class="table-of-contents__link toc-highlight">Quick reminders</a><ul><li><a href="#example" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#first-test" class="table-of-contents__link toc-highlight">First test</a></li><li><a href="#story-tables" class="table-of-contents__link toc-highlight">Story tables</a><ul><li><a href="#generate-a-story-table" class="table-of-contents__link toc-highlight">Generate a story table</a></li><li><a href="#step-description" class="table-of-contents__link toc-highlight">Step description</a></li><li><a href="#rows" class="table-of-contents__link toc-highlight">Rows</a></li><li><a href="#var" class="table-of-contents__link toc-highlight">var</a></li><li><a href="#value" class="table-of-contents__link toc-highlight">value</a></li><li><a href="#trigger" class="table-of-contents__link toc-highlight">trigger</a></li><li><a href="#story-table-examples" class="table-of-contents__link toc-highlight">Story table examples</a></li><li><a href="#there_is_another-loop" class="table-of-contents__link toc-highlight"><code>.there_is_another</code> loop</a></li><li><a href="#story-table-signature" class="table-of-contents__link toc-highlight">Story table signature</a></li><li><a href="#other-story-table-notes" class="table-of-contents__link toc-highlight">Other story table notes</a></li></ul></li><li><a href="#steps" class="table-of-contents__link toc-highlight">Steps</a><ul><li><a href="#starting-steps" class="table-of-contents__link toc-highlight">Starting Steps</a></li><li><a href="#observe-things-about-the-page" class="table-of-contents__link toc-highlight">Observe things about the page</a></li><li><a href="#set-fields" class="table-of-contents__link toc-highlight">Set fields</a></li><li><a href="#other-actions" class="table-of-contents__link toc-highlight">Other actions</a></li></ul></li><li><a href="#tips" class="table-of-contents__link toc-highlight">Tips</a></li><li><a href="#test-results" class="table-of-contents__link toc-highlight">Test results</a><ul><li><a href="#summary-page" class="table-of-contents__link toc-highlight">Summary page</a></li><li><a href="#error-screenshots-artifacts" class="table-of-contents__link toc-highlight">Error screenshots&#39; artifacts</a></li><li><a href="#reports" class="table-of-contents__link toc-highlight">Reports</a></li><li><a href="#your-screenshots-artifacts" class="table-of-contents__link toc-highlight">Your screenshots&#39; artifacts</a></li><li><a href="#your-downloaded-files-artifacts" class="table-of-contents__link toc-highlight">Your downloaded files&#39; artifacts</a></li></ul></li><li><a href="#errors-and-warnings" class="table-of-contents__link toc-highlight">Errors and warnings</a><ul><li><a href="#a-missing-trigger-variable" class="table-of-contents__link toc-highlight">A missing trigger variable</a></li></ul></li><li><a href="#security" class="table-of-contents__link toc-highlight">Security</a><ul><li><a href="#disable-the-tests" class="table-of-contents__link toc-highlight">Disable the tests</a></li></ul></li><li><a href="#faq" class="table-of-contents__link toc-highlight">FAQ</a><ul><li><a href="#i-have-a-private-github-repository-can-i-use-this-testing-framework" class="table-of-contents__link toc-highlight">I have a private GitHub repository. Can I use this testing framework?</a></li><li><a href="#how-do-i-add-a-new-test-file" class="table-of-contents__link toc-highlight">How do I add a new test file?</a></li><li><a href="#how-do-i-add-a-new-test-to-an-existing-test-file" class="table-of-contents__link toc-highlight">How do I add a new test to an existing test file?</a></li><li><a href="#when-do-tests-run" class="table-of-contents__link toc-highlight">When do tests run?</a></li><li><a href="#why-should-i-write-a-scenario-description" class="table-of-contents__link toc-highlight">Why should I write a Scenario description?</a></li></ul></li><li><a href="#built-with" class="table-of-contents__link toc-highlight">Built with</a></li><li><a href="#repositories" class="table-of-contents__link toc-highlight">Repositories</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/SuffolkLITLab/docassemble-AssemblyLine" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> - AssemblyLine Docs Built with Docusaurus.</div></div></div></footer></div>
<script src="/docassemble-AssemblyLine-documentation/assets/js/runtime~main.0c48d773.js"></script>
<script src="/docassemble-AssemblyLine-documentation/assets/js/main.c38404df.js"></script>
</body>
</html>