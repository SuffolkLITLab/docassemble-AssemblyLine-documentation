<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-admin_guide_docassemble/setup-server" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Installing a docassemble server | Document Assembly Line</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://assemblyline.suffolklitlab.org/docs/admin_guide_docassemble/setup-server"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Installing a docassemble server | Document Assembly Line"><meta data-rh="true" name="description" content="There are a lot of [ways you can install"><meta data-rh="true" property="og:description" content="There are a lot of [ways you can install"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://assemblyline.suffolklitlab.org/docs/admin_guide_docassemble/setup-server"><link data-rh="true" rel="alternate" href="https://assemblyline.suffolklitlab.org/docs/admin_guide_docassemble/setup-server" hreflang="en"><link data-rh="true" rel="alternate" href="https://assemblyline.suffolklitlab.org/docs/admin_guide_docassemble/setup-server" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Installing a docassemble server","item":"https://assemblyline.suffolklitlab.org/docs/admin_guide_docassemble/setup-server"}]}</script><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-622Z2D6Q3Q"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-622Z2D6Q3Q",{anonymize_ip:!0})</script><link rel="stylesheet" href="/assets/css/styles.fb371b19.css">
<script src="/assets/js/runtime~main.87d4e326.js" defer="defer"></script>
<script src="/assets/js/main.f7fa2997.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/lit-lab-logo-small-inverted.svg" alt="The Suffolk LIT Lab Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/lit-lab-logo-small-inverted.svg" alt="The Suffolk LIT Lab Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Document Assembly Line</b></a><a class="navbar__item navbar__link" href="/docs/get_started">Get started</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/overview">Documentation</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://docassemble.org/docs.html" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Docassemble docs<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><a href="https://www.givecampus.com/campaigns/70271/donations/new" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar-donate-button">Donate<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><a href="https://github.com/SuffolkLITLab/docassemble-AssemblyLine" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/overview">Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/docassemble_intro/introduction-to-docassemble">Introduction to Docassemble</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/docassemble_intro/introduction-to-docassemble">Introduction to Docassemble</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/docassemble_intro/practical-guide-docassemble">What should you use Docassemble for?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/docassemble_intro/hello-world">Hello, World</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/docassemble_intro/logic">Logic</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/docassemble_intro/working-with-docx">Working with Docx</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/docassemble_intro/controlling-interview-order">Controlling Interview Order</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/docassemble_intro/basic-troubleshooting">Basic Troubleshooting</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/docassemble_intro/yaml">Docassemble syntax</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/docassemble_intro/object-oriented-programming">Working with lists and objects</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/docs/admin_guide_docassemble/setup-server">Administering Docassemble</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/admin_guide_docassemble/setup-server">Installing a docassemble server</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/admin_guide_docassemble/rebuild-lightsail-instance">Rebuilding your AWS Lightsail instance</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/admin_guide_docassemble/run-docassemble-docker-vscode">Docassemble with Docker and VS Code</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/admin_guide_docassemble/installing-production-app">Installing a docassemble app on your production server</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/admin_guide_docassemble/maintaining-docassemble">Securing and maintaining your server</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/authoring/pdfs">Authoring interviews</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/style_guide/question_overview">Writing good questions</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/coding_style/overview">Coding style guide</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menuHtmlItem_M9Kj menu__list-item sidebar-heading">Assembly Line components</li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/components/AssemblyLine/ALGeneral/overview">AssemblyLine</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/components/ALRecipes/overview">ALRecipes</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/components/ALToolbox/overview">ALToolbox</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/components/ALThemeTemplate/overview">Customizing look and feel</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/components/RateMyPDF/overview">RateMyPDF</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/components/GithubFeedbackForm/overview">GithubFeedbackForm</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/components/InterviewStats/overview">InterviewStats</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/components/ALDashboard/overview">About ALDashboard</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/components/ALDashboard/">ALDashboard modules</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/components/FormFyxer/lit_explorer">FormFyxer</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/components/EFSPIntegration/overview">E-filing integration (EFSP)</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/components/ALKiln/intro">Automated testing (ALKiln)</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Introduction to Docassemble</span></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Administering Docassemble</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Installing a docassemble server</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>What this guide is</h1></header>
<p>There are a lot of <a href="https://docassemble.org/docs/installation.html" target="_blank" rel="noopener noreferrer">ways you can install
Docassemble</a>. This is one quick
path that will help you get started quickly without having to make your own
choices.</p>
<ol>
<li>Provision a full virtual machine in <a href="https://aws.amazon.com/lightsail/" target="_blank" rel="noopener noreferrer">AWS
Lightsail</a>.</li>
<li>Store a copy of backups and files on <a href="https://aws.amazon.com/s3/" target="_blank" rel="noopener noreferrer">AWS S3</a> for safer and easier recovery</li>
<li>Use an env.list file that contains all of the startup configuration that I
keep a local copy of.</li>
</ol>
<p>Larger deployments might consider using a <a href="https://docassemble.org/docs/scalability.html" target="_blank" rel="noopener noreferrer">multi-server configuration</a>.
But for most deployments, it is cheaper and more reliable to scale vertically. An 8 GB instance on Lightsail,
which costs $40/month to run at this time, handles 10s of thousands of monthly sessions for the state of Massachusetts.</p>
<p>It typically takes about <strong>1 hour</strong> to follow these steps from start to finish.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="a-video-walkthrough-of-the-full-process">A video walkthrough of the full process<a href="#a-video-walkthrough-of-the-full-process" class="hash-link" aria-label="Direct link to A video walkthrough of the full process" title="Direct link to A video walkthrough of the full process">​</a></h2>
<iframe width="560" height="315" src="https://www.youtube.com/embed/JXdOCLMFPHc" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"></iframe>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="create-your-aws-account">Create your AWS account<a href="#create-your-aws-account" class="hash-link" aria-label="Direct link to Create your AWS account" title="Direct link to Create your AWS account">​</a></h2>
<p><a href="https://aws.amazon.com/premiumsupport/knowledge-center/create-and-activate-aws-account/" target="_blank" rel="noopener noreferrer">Follow Amazon&#x27;s
instructions</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="choose-a-dns-name">Choose a DNS name<a href="#choose-a-dns-name" class="hash-link" aria-label="Direct link to Choose a DNS name" title="Direct link to Choose a DNS name">​</a></h2>
<p>Choose a short, readable name, like <code>apps.example.com</code>, where <code>example.com</code>
is a domain that you own.</p>
<ol>
<li>Use a subdomain of the domain you own like <code>apps.example.com</code>, not a base (second level) domain like <code>example.com</code></li>
<li>Stick with the common subdomain names: <code>app</code>, <code>apps</code>, or <code>interviews</code> unless you have a good
reason to choose something different.</li>
<li>Avoid <code>www</code> as this is usually used for a landing page.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="if-you-dont-own-a-domain-name-yet">If you don&#x27;t own a domain name yet<a href="#if-you-dont-own-a-domain-name-yet" class="hash-link" aria-label="Direct link to If you don&#x27;t own a domain name yet" title="Direct link to If you don&#x27;t own a domain name yet">​</a></h3>
<p>If you don&#x27;t own a domain name yet, it may be
simplest to register and manage it through <a href="https://lightsail.aws.amazon.com/ls/docs/en_us/articles/amazon-lightsail-domain-registration" target="_blank" rel="noopener noreferrer">AWS
Lightsail</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="reserve-a-static-ipv4-address-in-lightsail">Reserve a static IPv4 address in Lightsail<a href="#reserve-a-static-ipv4-address-in-lightsail" class="hash-link" aria-label="Direct link to Reserve a static IPv4 address in Lightsail" title="Direct link to Reserve a static IPv4 address in Lightsail">​</a></h2>
<p>Follow the <a href="https://lightsail.aws.amazon.com/ls/docs/en_us/articles/lightsail-create-static-ip" target="_blank" rel="noopener noreferrer">AWS
Lightsail</a>
instructions to create a static IP. Use the DNS name you chose earlier to label
the IP, with suffix to indicate that it is the IP. Like: <code>apps.example.com-IP</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="create-an-a-record-that-points-to-the-reserved-ip-address-in-your-dns-providers-website">Create an <code>A</code> record that points to the reserved IP address in your DNS provider&#x27;s website<a href="#create-an-a-record-that-points-to-the-reserved-ip-address-in-your-dns-providers-website" class="hash-link" aria-label="Direct link to create-an-a-record-that-points-to-the-reserved-ip-address-in-your-dns-providers-website" title="Direct link to create-an-a-record-that-points-to-the-reserved-ip-address-in-your-dns-providers-website">​</a></h2>
<p>You now need a new <code>A</code> record that points your reserved IP address (like <code>127.0.0.1</code>)
to your chosen domain name (like <code>apps.example.com</code>)</p>
<p>The steps for this depend on your DNS provider.</p>
<p>Here are some basic instructions about adding an <code>A</code> record for common platforms:</p>
<ul>
<li><a href="https://lightsail.aws.amazon.com/ls/docs/en_us/articles/lightsail-how-to-create-dns-entry" target="_blank" rel="noopener noreferrer">AWS Lightsail</a></li>
<li><a href="https://pantheon.io/docs/route53" target="_blank" rel="noopener noreferrer">AWS Route 53</a></li>
<li><a href="https://www.godaddy.com/help/add-an-a-record-19238" target="_blank" rel="noopener noreferrer">GoDaddy</a></li>
</ul>
<p>If you need to, you can stop now and come back to the rest of the steps later. The rest will take about 30 minutes and should
be done all together.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="create-your-lightsail-server">Create your Lightsail server<a href="#create-your-lightsail-server" class="hash-link" aria-label="Direct link to Create your Lightsail server" title="Direct link to Create your Lightsail server">​</a></h2>
<p>Create a <a href="https://lightsail.aws.amazon.com/ls/docs/en_us/articles/how-to-create-amazon-lightsail-instance-virtual-private-server-vps" target="_blank" rel="noopener noreferrer">Lightsail
instance</a></p>
<p>Select these options on the &quot;Create an instance&quot; page:</p>
<ol>
<li>Select the closest &quot;Instance location&quot; or AWS region. (The default is probably fine if it is on your continent!)</li>
<li>Select an &quot;OS only&quot; blueprint of &quot;Linux&quot;.</li>
<li>Select the latest long term support edition of <strong>Ubuntu Server</strong> (24.04 at this writing; avoid Amazon Linux)</li>
<li>Select at least the 4 GB of memory plan (at this writing, it costs <strong>$20/month</strong>)</li>
</ol>
<p>Label the new Lighsail instance with the DNS name you chose earlier. For
example: <code>apps.example.com</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="enable-https-traffic-on-your-lightsail-server">Enable HTTPS traffic on your Lightsail server<a href="#enable-https-traffic-on-your-lightsail-server" class="hash-link" aria-label="Direct link to Enable HTTPS traffic on your Lightsail server" title="Direct link to Enable HTTPS traffic on your Lightsail server">​</a></h2>
<ol>
<li>Click on your Lightsail instance, and then the Networking tab. (Note: make sure
you click on the instance name first).</li>
<li>Scroll down to IPv4 Firewall. Click + Add rule to add a new rule.</li>
<li>Select &quot;HTTPS&quot; as the application, and then the green &quot;create&quot; button.</li>
</ol>
<p>This should also create the matching IPv6 rule automatically for you.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="create-an-s3-bucket-to-match-your-new-dns-name">Create an S3 Bucket to match your new DNS name<a href="#create-an-s3-bucket-to-match-your-new-dns-name" class="hash-link" aria-label="Direct link to Create an S3 Bucket to match your new DNS name" title="Direct link to Create an S3 Bucket to match your new DNS name">​</a></h2>
<p>Follow the instructions to <a href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/create-bucket-overview.html" target="_blank" rel="noopener noreferrer">create an AWS S3
bucket</a> using the AWS console.</p>
<p>You will make a new S3 bucket with these configuration options:</p>
<ol>
<li>Named the same as your DNS name. E.g., <code>apps.example.com</code></li>
<li>Matches the AWS region of your Lightsail instance (e.g., us-east-1a for Virginia).</li>
<li>Use the default security policy, including <code>Block Public Access</code>.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="turn-on-s3-bucket-versioning">Turn on S3 bucket versioning<a href="#turn-on-s3-bucket-versioning" class="hash-link" aria-label="Direct link to Turn on S3 bucket versioning" title="Direct link to Turn on S3 bucket versioning">​</a></h3>
<p>To improve your ability to recover from disasters, we recommend that you turn on bucket versioning.
This will keep a &quot;shadow copy&quot; of any deleted or modified files.</p>
<p><a href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/manage-versioning-examples.html" target="_blank" rel="noopener noreferrer">View AWS instructions</a>
(For simplicity, jump ahead to the instructions for &quot;S3 console&quot;--you can ignore the preamble).</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="create-an-iam-user-that-has-appropriate-access-to-your-s3-bucket">Create an IAM user that has appropriate access to your S3 bucket<a href="#create-an-iam-user-that-has-appropriate-access-to-your-s3-bucket" class="hash-link" aria-label="Direct link to Create an IAM user that has appropriate access to your S3 bucket" title="Direct link to Create an IAM user that has appropriate access to your S3 bucket">​</a></h2>
<p>Create a new user with the same name as your DNS name. E.g.,
<code>apps.example.com</code>. Give it access to S3.</p>
<p><a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_users_create.html" target="_blank" rel="noopener noreferrer">View Amazon&#x27;s up to date instructions</a>,
or keep reading for our more specific instructions. Note: these may change over time.</p>
<ol>
<li>Visit the Identity Access and Management (IAM) console in AWS</li>
<li>Under &quot;Access Management&quot; in the left menu, click &quot;Users&quot;</li>
<li>Click &quot;Create user&quot;</li>
<li>Name the new user to match your server&#x27;s name (e.g., apps.example.com)</li>
<li>Under permission options, choose &quot;Attach policies directly&quot;.</li>
<li>Under &quot;Permissions policies&quot;, type S3. Check the box next to AmazonS3FullAccess. The permissions boundary is not necessary.</li>
<li>Click next and don&#x27;t modify anything on the Tags page. Review and then Create user.</li>
<li>Navigate back to &quot;Users&quot; under &quot;Access Management&quot; and select the one you just created. In the Summary, select the option to &quot;Create Access Key&quot;.</li>
</ol>
<p>For the use case, select &quot;Command Line Interface (CLI)&quot;. Click next and add a description if desired. Create access key. (You may have to
click through or ignore a warning).</p>
<p><strong>Copy the Access key ID and Secret access key</strong> to a safe place, such as an open
text editor window. This is your only chance to view the secret access key. But you
can always make a new one later.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="a-note-about-s3-permissions">A note about S3 permissions<a href="#a-note-about-s3-permissions" class="hash-link" aria-label="Direct link to A note about S3 permissions" title="Direct link to A note about S3 permissions">​</a></h3>
<p>Your new user account has access to all of S3, not just the one bucket. If your AWS account is used for multiple
servers, it is best to limit its access.</p>
<p><a href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/example-policies-s3.html#iam-policy-ex0" target="_blank" rel="noopener noreferrer">View AWS instructions to limit access to one bucket</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="finish-installation-on-your-lightsail-instance-over-ssh">Finish installation on your Lightsail instance over SSH<a href="#finish-installation-on-your-lightsail-instance-over-ssh" class="hash-link" aria-label="Direct link to Finish installation on your Lightsail instance over SSH" title="Direct link to Finish installation on your Lightsail instance over SSH">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="connect-with-ssh">Connect with SSH<a href="#connect-with-ssh" class="hash-link" aria-label="Direct link to Connect with SSH" title="Direct link to Connect with SSH">  ​</a></h3>
<p>Next, use SSH to connect to your newly created server.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="recommended-use-putty-or-another-ssh-client">Recommended: use Putty or another SSH client<a href="#recommended-use-putty-or-another-ssh-client" class="hash-link" aria-label="Direct link to Recommended: use Putty or another SSH client" title="Direct link to Recommended: use Putty or another SSH client">​</a></h4>
<p>In Lightsail, download the default keypair for your region. Use this SSH key
to connect to your new Lightsail container:</p>
<p>Using the Windows command line (with SSH installed), WSL or Apple Terminal:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">ssh ubuntu@apps.example.com -i /path/to/ssh_key</span><br></span></code></pre></div></div>
<p>Or follow instructions for using
<a href="https://lightsail.aws.amazon.com/ls/docs/en_us/articles/lightsail-how-to-set-up-putty-to-connect-using-ssh" target="_blank" rel="noopener noreferrer">Putty</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="in-a-pinch-use-the-lightsail-built-in-ssh-container">In a pinch: Use the Lightsail built-in SSH container<a href="#in-a-pinch-use-the-lightsail-built-in-ssh-container" class="hash-link" aria-label="Direct link to In a pinch: Use the Lightsail built-in SSH container" title="Direct link to In a pinch: Use the Lightsail built-in SSH container">​</a></h3>
<p>You can also use the browser-based SSH client that is integrated into AWS
Lightsail. <strong>Warning</strong>: it is <em>really</em> bad at copying and pasting. You should copy
and paste each line one at a time if you use the browser SSH container.</p>
<p>Follow the AWS instructions to <a href="https://lightsail.aws.amazon.com/ls/docs/en_us/articles/understanding-ssh-in-amazon-lightsail" target="_blank" rel="noopener noreferrer">connect to your new server with
SSH</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="update-the-server">Update the server<a href="#update-the-server" class="hash-link" aria-label="Direct link to Update the server" title="Direct link to Update the server">​</a></h3>
<p>From the SSH console, type the following commands, hitting enter after one:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">sudo apt update</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sudo apt upgrade -u -y</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="install-docker">Install docker<a href="#install-docker" class="hash-link" aria-label="Direct link to Install docker" title="Direct link to Install docker">​</a></h3>
<p>Type the command below to install the latest docker from the official Docker Engine repository</p>
<p>(Or follow the <a href="https://docs.docker.com/engine/install/ubuntu/" target="_blank" rel="noopener noreferrer">latest instructions from Docker Engine</a>)</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">sudo apt-get install ca-certificates curl</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sudo install -m 0755 -d /etc/apt/keyrings</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sudo curl -fsSL https://download.docker.com/linux/ubuntu/gpg -o /etc/apt/keyrings/docker.asc</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sudo chmod a+r /etc/apt/keyrings/docker.asc</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">echo \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/ubuntu \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  $(. /etc/os-release &amp;&amp; echo &quot;${UBUNTU_CODENAME:-$VERSION_CODENAME}&quot;) stable&quot; | \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sudo apt-get update</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sudo apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="add-your-user-account-to-the-docker-group">Add your user account to the Docker group<a href="#add-your-user-account-to-the-docker-group" class="hash-link" aria-label="Direct link to Add your user account to the Docker group" title="Direct link to Add your user account to the Docker group">​</a></h3>
<p>Type the following commands in the SSH console:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">sudo usermod -aG docker $USER</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">newgrp docker</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="setup-a-linux-swap-file">Setup a Linux swap file<a href="#setup-a-linux-swap-file" class="hash-link" aria-label="Direct link to Setup a Linux swap file" title="Direct link to Setup a Linux swap file">​</a></h3>
<p>While the 4 GB RAM allocation is almost always enough, Docassemble can have odd
moments where the RAM usage spikes up quickly, which can crash the server. This
is somewhat more likely to be a problem on a development server.</p>
<p>Quick fix: run the command below to create a 4 GB swap file. This provides
some free, virtual breathing room.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">sudo fallocate -l 4G /swapfile</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sudo chmod 600 /swapfile</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sudo mkswap /swapfile</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sudo swapon /swapfile</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">echo &#x27;/swapfile none swap sw 0 0&#x27; | sudo tee -a /etc/fstab</span><br></span></code></pre></div></div>
<p>Or, follow the <a href="https://www.digitalocean.com/community/tutorials/how-to-add-swap-space-on-ubuntu-20-04" target="_blank" rel="noopener noreferrer">more complete instructions here</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-an-envlist-file">Create an env.list file<a href="#create-an-envlist-file" class="hash-link" aria-label="Direct link to Create an env.list file" title="Direct link to Create an env.list file">​</a></h3>
<p>In an editor of your choice, copy the following text:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">DAHOSTNAME=apps.example.com</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">S3ENABLE=true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">S3BUCKET=apps.example.com</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">S3ACCESSKEY=</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">S3SECRETACCESSKEY=</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">S3REGION=us-east-2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">TIMEZONE=America/New_York</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">USEHTTPS=true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">USELETSENCRYPT=true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">LETSENCRYPTEMAIL=apps@example.com</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">DAEXTRAFONTS=false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">DAGOOGLEFONTS=false</span><br></span></code></pre></div></div>
<p>Update the values as follows:</p>
<ul>
<li>Under DAHOSTNAME, set it to your DNS name.</li>
<li>Under S3 bucket, set it to your DNS name.</li>
<li>Set the S3ACCESSKEY to your Access key ID.</li>
<li>Set the S3SECRETACCESSKEY to your secret access key that you wrote down earlier.</li>
<li>Set the S3 region to the appropriate region you selected.</li>
<li>Set the Timezone to the matching <a href="https://en.wikipedia.org/wiki/List_of_tz_database_time_zones" target="_blank" rel="noopener noreferrer">&quot;tz database time
zone&quot;</a> name
that you want to be the default on your server. This will be used in log files
and to set the time that daily scheduled cron scripts run.</li>
<li>Set LETSENCRYPTEMAIL to an email of your choice. You will receive messages at this
address if your certificate is about to expire, but otherwise will not.</li>
<li>In Docassemble version 1.8.14 and later, if DAEXTRAFONTS and DAGOOGLEFONTS are true they
will install those fonts on startup. These might be necessary for your interviews that do
DOCX to PDF conversion.</li>
</ul>
<p>Notice that in the Docker environment file, we use a lowercase <code>true</code>, not <code>True</code>.</p>
<p>Create a new file on the server named env.list and copy the settings from your text editor into the file on the server. Here is one way you can do that:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">nano env.list</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[shift-insert or right mouse click to paste]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[CTRL+O, CTRL+X to save and exit the Nano editor]</span><br></span></code></pre></div></div>
<p>Here is where using a 3rd party SSH console and not the Amazon SSH console is helpful.
Amazon&#x27;s web-based SSH console is very bad at handling copy and paste.</p>
<p>Save this env.list file locally somewhere secure. It is the one important file that will not be backed up to S3 if something goes wrong on your server.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="start-docker">Start Docker<a href="#start-docker" class="hash-link" aria-label="Direct link to Start Docker" title="Direct link to Start Docker">​</a></h2>
<p>Start up your new docassemble server like this:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker run -d -p 443:443 -p 80:80 --restart unless-stopped --env-file env.list --stop-timeout 600 jhpyle/docassemble</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="if-you-are-running-docker-on-a-server-you-own-instead-of-aws">If you are running Docker on a server you own instead of AWS<a href="#if-you-are-running-docker-on-a-server-you-own-instead-of-aws" class="hash-link" aria-label="Direct link to If you are running Docker on a server you own instead of AWS" title="Direct link to If you are running Docker on a server you own instead of AWS">​</a></h3>
<p>Make sure that you set up <a href="https://docassemble.org/docs/docker.html#persistent" target="_blank" rel="noopener noreferrer">persistent volumes</a>.
Both your startup command and your env.list file will look different.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="docker-compose">Docker Compose<a href="#docker-compose" class="hash-link" aria-label="Direct link to Docker Compose" title="Direct link to Docker Compose">​</a></h3>
<p>For ease of future upgrades, you can save this command in a <a href="https://docs.docker.com/compose/" target="_blank" rel="noopener noreferrer">Docker
Compose</a> file. Docker Compose allows you to reduce
the <code>docker run</code> command to a saved file for repeated use. <code>docker stop</code> and <code>docker start</code>
commands are not affected by using a Docker Compose file.</p>
<p>Create a new file named docker-compose.yml on the server in the same directory as the
env.list file. To match the <code>docker run</code> command above, it should have this content
(lines beginning with a <code>#</code> are comments to help explain the commands):</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">services</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">docassemble_container</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># The name of the service. You can reference this name for inter-service communication.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> jhpyle/docassemble</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Specifies the Docker image to use for this service. </span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Update this line to pull a different version/tag of the image, e.g., &#x27;jhpyle/docassemble:1.2.3&#x27;.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">restart</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> always</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># This ensures the container is always restarted if it stops.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Options include &#x27;no&#x27;, &#x27;always&#x27;, &#x27;on-failure&#x27;, or &#x27;unless-stopped&#x27;.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">stop_grace_period</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> 600s</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># The duration to wait before forcefully killing the container upon stopping.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># You can adjust this value based on your application&#x27;s shutdown requirements.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">ports</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;80:80&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Maps port 80 on the host to port 80 on the container.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># To change the host port, modify the first number, e.g., &#x27;8080:80&#x27;.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">env_file</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> env.list</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Specifies a file containing environment variables. </span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Update the filename if your environment variables are in a different file.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">volumes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> dacerts</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">/usr/share/docassemble/certs</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> dabackup</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">/usr/share/docassemble/backup</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Maps the `dacerts` and `dabackup` volumes to specific directories in the container.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># These volumes are defined in the `volumes` section and will be created automatically if they don&#x27;t exist.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">volumes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">dacerts</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Defines the `dacerts` volume. Docker Compose will automatically create it if it doesn&#x27;t exist.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">dabackup</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Defines the `dabackup` volume. Docker Compose will automatically create it if it doesn&#x27;t exist.</span><br></span></code></pre></div></div>
<p>If you are not using docker persistant volumes, everything including and after the
first reference to <code>volumes</code> can be removed.</p>
<p>Different operating systems have different command lines for docker compose. To
check which you have, run <code>docker-compose --version</code> or <code>docker compose version</code>.
Only one of those will be successful. Depending on whether you need the hyphen to
run the service, you&#x27;ll either run:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker-compose up -d</span><br></span></code></pre></div></div>
<p>or</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker compose up -d</span><br></span></code></pre></div></div>
<p>The <code>-d</code> flag runs it in a detached mode meaning that everything is happening
in the background. If you want to run it with some of the supervisorctl logs
visible to you, you can run the command without the -d flag. You&#x27;ll then know
when your server is up when you see the line that <code>nginx entered RUNNING state</code>. That&#x27;s the start of the expected webserver. A few seconds later you should
be able to access the web interface. You can hit CTRL+c to close the output.</p>
<p>When you need to upgrade your server in the future, you can use the same Docker
Compose file to ensure you are setting the same flags in the new container.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="sit-back-and-wait">Sit back and wait<a href="#sit-back-and-wait" class="hash-link" aria-label="Direct link to Sit back and wait" title="Direct link to Sit back and wait">​</a></h2>
<p>In a few minutes, your Docassemble server will be up and running. Visit the website at the DNS
name you chose, <code>https://apps.example.com</code>. Log in with the default username and password,
<a href="mailto:admin@admin.com" target="_blank" rel="noopener noreferrer">admin@admin.com</a>/password. Change it to something more secure.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="monitor-progress">Monitor progress<a href="#monitor-progress" class="hash-link" aria-label="Direct link to Monitor progress" title="Direct link to Monitor progress">​</a></h3>
<p>While the server starts up, you can run this command to monitor the container&#x27;s progress, if
Docassemble is the only docker container in your server:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker exec -ti $(docker ps --format &#x27;{{.Names}}&#x27;) sh -c &quot;tail -f /var/log/supervisor/initialize-stderr*&quot;</span><br></span></code></pre></div></div>
<p>If you have more than one container, you can modify the command as follows:</p>
<p>Note the name of the Docassemble container, which should be listed in the output of <code>docker ps</code>
In the command below, replace [YOUR CONTAINER NAME] with the name of your container.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker exec -ti [YOUR CONTAINER NAME] sh -c &quot;tail -f /var/log/supervisor/initialize-stderr*&quot;</span><br></span></code></pre></div></div>
<p>Keep watching the output of this command until the install is finished, which will read
<code>initialize: Finished initializing</code>. You can hit CTRL+c to close the output.</p>
<p>Watch out for the word &quot;error&quot; which may indicate that something went wrong. As long as it keeps
updating, you should just stay patient.</p>
<h1>How many servers do I need?</h1>
<p>I recommend at least 2 servers: a production server and a development server. You may also want
a test server, for a total of 3.</p>
<p>Production should have the most stable version of Docassemble. Development can test bleeding edge code.
Test should mirror Production as much as possible.</p>
<p>If you want to configure load balancing, that is something I have not experimented with in Docassemble. Cost
will be much higher but it may be worthwhile. You still will want at least a test/dev and production environment.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="further-reading">Further reading<a href="#further-reading" class="hash-link" aria-label="Direct link to Further reading" title="Direct link to Further reading">​</a></h2>
<p>For a lot more detail, review <a href="https://docassemble.org/docs/installation.html" target="_blank" rel="noopener noreferrer">Installation</a> and also
the <a href="https://docassemble.org/docs/config.html" target="_blank" rel="noopener noreferrer">configuration</a> pages.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/SuffolkLITLab/docassemble-AssemblyLine-documentation/edit/main/docs/admin_guide_docassemble/setup-server.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/docassemble_intro/repeated-information"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Repeated Information (Groups)</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/admin_guide_docassemble/rebuild-lightsail-instance"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Rebuilding your AWS Lightsail instance</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#a-video-walkthrough-of-the-full-process" class="table-of-contents__link toc-highlight">A video walkthrough of the full process</a></li><li><a href="#create-your-aws-account" class="table-of-contents__link toc-highlight">Create your AWS account</a></li><li><a href="#choose-a-dns-name" class="table-of-contents__link toc-highlight">Choose a DNS name</a><ul><li><a href="#if-you-dont-own-a-domain-name-yet" class="table-of-contents__link toc-highlight">If you don&#39;t own a domain name yet</a></li></ul></li><li><a href="#reserve-a-static-ipv4-address-in-lightsail" class="table-of-contents__link toc-highlight">Reserve a static IPv4 address in Lightsail</a></li><li><a href="#create-an-a-record-that-points-to-the-reserved-ip-address-in-your-dns-providers-website" class="table-of-contents__link toc-highlight">Create an <code>A</code> record that points to the reserved IP address in your DNS provider&#39;s website</a></li><li><a href="#create-your-lightsail-server" class="table-of-contents__link toc-highlight">Create your Lightsail server</a></li><li><a href="#enable-https-traffic-on-your-lightsail-server" class="table-of-contents__link toc-highlight">Enable HTTPS traffic on your Lightsail server</a></li><li><a href="#create-an-s3-bucket-to-match-your-new-dns-name" class="table-of-contents__link toc-highlight">Create an S3 Bucket to match your new DNS name</a><ul><li><a href="#turn-on-s3-bucket-versioning" class="table-of-contents__link toc-highlight">Turn on S3 bucket versioning</a></li></ul></li><li><a href="#create-an-iam-user-that-has-appropriate-access-to-your-s3-bucket" class="table-of-contents__link toc-highlight">Create an IAM user that has appropriate access to your S3 bucket</a><ul><li><a href="#a-note-about-s3-permissions" class="table-of-contents__link toc-highlight">A note about S3 permissions</a></li></ul></li><li><a href="#finish-installation-on-your-lightsail-instance-over-ssh" class="table-of-contents__link toc-highlight">Finish installation on your Lightsail instance over SSH</a><ul><li><a href="#connect-with-ssh" class="table-of-contents__link toc-highlight">Connect with SSH</a></li><li><a href="#in-a-pinch-use-the-lightsail-built-in-ssh-container" class="table-of-contents__link toc-highlight">In a pinch: Use the Lightsail built-in SSH container</a></li><li><a href="#update-the-server" class="table-of-contents__link toc-highlight">Update the server</a></li><li><a href="#install-docker" class="table-of-contents__link toc-highlight">Install docker</a></li><li><a href="#add-your-user-account-to-the-docker-group" class="table-of-contents__link toc-highlight">Add your user account to the Docker group</a></li><li><a href="#setup-a-linux-swap-file" class="table-of-contents__link toc-highlight">Setup a Linux swap file</a></li><li><a href="#create-an-envlist-file" class="table-of-contents__link toc-highlight">Create an env.list file</a></li></ul></li><li><a href="#start-docker" class="table-of-contents__link toc-highlight">Start Docker</a><ul><li><a href="#if-you-are-running-docker-on-a-server-you-own-instead-of-aws" class="table-of-contents__link toc-highlight">If you are running Docker on a server you own instead of AWS</a></li><li><a href="#docker-compose" class="table-of-contents__link toc-highlight">Docker Compose</a></li></ul></li><li><a href="#sit-back-and-wait" class="table-of-contents__link toc-highlight">Sit back and wait</a><ul><li><a href="#monitor-progress" class="table-of-contents__link toc-highlight">Monitor progress</a></li></ul></li><li><a href="#further-reading" class="table-of-contents__link toc-highlight">Further reading</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://suffolklitlab.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">Suffolk LIT Lab<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> | This documentation website is built with <a href="https://docusaurus.io/" target="_blank">Docusaurus</a>.</div></div></div></footer></div>
</body>
</html>