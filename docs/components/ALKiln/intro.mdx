---
id: alkiln_intro
title: ALKiln automated testing
sidebar_label: WIP Intro
slug: intro
---

:::warning
WIP (Work in progress)
:::


Welcome to the ALKiln testing framework! It helps you check that your docassemble interviews work the way you want them to. ALKiln acts like a user, following your instructions to do things like [fill in fields](writing_tests.mdx#story-table), [upload files](writing_tests.mdx#upload), [sign in](writing_tests.mdx#sign-in), and [check your PDFs for accuracy](writing_tests.mdx#compare-files).

**Any basic docassemble package can use ALKiln**.[^basic] ALKiln (Assembly Line Kiln) took its name from where it was born - the AssemblyLine project - but it can be used with any docassemble project.<!-- It does come with features that are especially useful for AssemblyLine users.-->

ALKiln's development moves a little slowly due to limited capacity, but we continue to develop ALKiln as we hear from authors. Give us feedback and suggest ideas by opening issues at https://github.com/SuffolkLITLab/ALKiln/issues.


## Quick start {#quickstart}

Ready to start testing? Need to quickly refresh your memory on some important points? Start here.

- [Set up ALKiln for your package](setup.mdx#recommended)
- [Write your first test](setup.mdx#first-test)
- [Generate a first draft for more complicated tests](writing_tests.mdx#alkiln_story)

See [a few more reminders here](writing_tests.mdx#refresh).


## What will you find in these documents? {#toc}

ALKiln topics you can explore:

<!-- Change "setup" to "install"? -->

- [Setting up](setup.mdx): Learn different ways to install ALKiln for your package or organization and information about those test types
- [Writing tests](writing_tests.mdx): What you need to know to effectively write tests
- [Troubleshooting](troubleshooting.mdx): Help with common errors and warnings
- Support for [older Versions](deprecated.mdx): Guides for using older out-of-date features
- [Frequently Asked Questions](writing_tests.mdx#faq) (FAQ): Find answers to common questions
- [Security](security.mdx): Find out how to stay safe by using best practices and how we protect you too


## What can I test with these tests? {#what-test}

There are two main purposes for ALKiln tests right now.

1. You can start using the [simple "it runs" test](setup.mdx#first-test) right away. It just makes sure that your interview starts without an error. Even that can be useful. For example, if you forget to commit a template to GitHub, that test will catch it.
1. The next type of testing comes a while after that, once your interview has stabilized. For example, the variable names are less likely to change. Then you can add more comprehensive ALKiln tests. After that, they will keep an eye on things for you. While you refine your interview by changing wording, the order of fields and pages, adding translations, and so on, the ALKiln tests will let you know if and when your changes break your interview.


## Why automate testing? {#why-test}

This may not be a good sales pitch, but you do not always need automated tests. Automated tests need to be updated along with your code. That may not be worth your time for some projects or at some stages in a project.

That said, the more complex your project gets, the more useful automated tests can be.

When you start creating a project, you test it by hand. You open the interview and run it yourself, clicking through every path your user might take. That does not scale as a project grows. Often, there is no time or energy to test all the paths accurately. You end up having to trust that the ones you skip still work. Automated tests make sure you know when your edits break your code.

Tests can protect your users from bugs that can:

- Lead them down the wrong path
- Give them the wrong output in their generated file
- Stop them completely with an error
- Lose their trust in you

You can write your simple [first test](setup.mdx#first-test) right away if you want. Wait to write more complex tests till your code is more stable. "More stable" means that the variables for the section you are testing are mostly staying the same.

When you add a new required field or change the variable name or values of a user's field, you will need to update those tests.

To hear more about why and when to test, watch the first part of this Docacon 2023 presentation:

<iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/TcLFA9a1bHs" title="Assembly Line Kiln testing framework at Docacon 2023 - Why test?" frameborder="0" allow="accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share; fullscreen" allowfullscreen></iframe>

<!-- Other tools that can help with problems managing running interviews: (maybe another section)
- When there's an error, give your users their data so they haven't wasted their time
- Get alerts when your server goes down
- Check that specific interviews are still running
 -->

## What libraries does ALKiln use? {#dependencies}

ALKiln uses [cucumber](https://cucumber.io/), [puppeteerjs](https://pptr.dev/), [cheerio](https://cheerio.js.org/), and runs the assertions using the [mocha](https://mochajs.org/) and [chai](https://www.chaijs.com/) libraries.

Even though ALKiln is built using cucumber, this framework has a different, less lofty, purpose. Cucumber focuses on BDD (behavior driven development). This framework mostly deals with regression testing and other conveniences.

For security, [ALKiln freezes the versions of its third-party libraries](security.mdx#alkiln-freezes-dependencies) and only updates them after we check their changes.


## Where are our repositories? {#repos}

- [ALKiln's repository](https://github.com/SuffolkLITLab/ALKiln) contains our core code
- [GitHub setup interview](https://github.com/SuffolkLITLab/docassemble-ALKilnSetup) helps you install GitHub tests on your repository
- [ALKilnInThePlayground](https://github.com/SuffolkLITLab/docassemble-ALKilnInThePlayground) lets you run tests from your docassemble server <!-- '...lets you run <AutoDIY/> tests from... ' -->
- [The Story Table test generator](https://github.com/plocket/alkiln_story) uses an interview's JSON variables to create a file containing a Story Table test
- [This documentation's repository](https://github.com/SuffolkLITLab/docassemble-AssemblyLine-documentation/tree/main/docs/alkiln) is on GitHub too


## How can you contribute? {#contribute}

<!-- Keep it simple. Just 2 repos -->

- Give us feedback and suggestions by [creating issues for ALKiln](https://github.com/SuffolkLITLab/ALKiln/issues)
- Improve this documentation on GitHub (see the link at the bottom of the page)
- Join and participate in the [docassemble community](https://docassemble.org/docs/support.html#slack)
- Contact us on the [docassemble Slack](https://docassemble.org/docs/support.html#slack) and become a collaborator


## ALKiln docs collaborators {#doc-collaborators}

Both humans and LLMs have contributed to this documentation.

Regarding the former, we asked for feedback, ideas, and technical audits from staff at SuffolkLITLab, [Recurse Center](https://www.recurse.com/) collaborators, friends, family, and of course you, our users.

As for the latter, we sometimes used the free version of [phind](https://www.phind.com) to offer sometimes better (and often worse) suggestions for re-wording and phrasing.


[^basic]: More complex packages might have trouble using ALKiln. There are some interview features ALKiln cannot yet handle. For example, [`object_multiselect` fields](https://docassemble.org/docs/fields.html#object_multiselect). ALKiln also may not understand custom validation code or complex [`CustomDatatype`](https://docassemble.org/docs/fields.html#custom%20datatype) fields if you make them. If you run into problems, [file a clear and descriptive issue on our repository](https://github.com/SuffolkLITLab/ALKiln/issues) and we will see if we can help.
