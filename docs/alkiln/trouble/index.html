<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-alkiln/alkiln_troubleshooting" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.2.1">
<title data-rh="true">ALKiln troubleshooting and errors | The Document Assembly Line</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://suffolklitlab.org/docassemble-AssemblyLine-documentation/docs/alkiln/trouble"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="ALKiln troubleshooting and errors | The Document Assembly Line"><meta data-rh="true" name="description" content="WIP (Work in progress)"><meta data-rh="true" property="og:description" content="WIP (Work in progress)"><link data-rh="true" rel="icon" href="/docassemble-AssemblyLine-documentation/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://suffolklitlab.org/docassemble-AssemblyLine-documentation/docs/alkiln/trouble"><link data-rh="true" rel="alternate" href="https://suffolklitlab.org/docassemble-AssemblyLine-documentation/docs/alkiln/trouble" hreflang="en"><link data-rh="true" rel="alternate" href="https://suffolklitlab.org/docassemble-AssemblyLine-documentation/docs/alkiln/trouble" hreflang="x-default"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-622Z2D6Q3Q"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-622Z2D6Q3Q",{anonymize_ip:!0})</script><link rel="stylesheet" href="/docassemble-AssemblyLine-documentation/assets/css/styles.0a959851.css">
<script src="/docassemble-AssemblyLine-documentation/assets/js/runtime~main.fdb158e3.js" defer="defer"></script>
<script src="/docassemble-AssemblyLine-documentation/assets/js/main.37c0e0ff.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docassemble-AssemblyLine-documentation/"><div class="navbar__logo"><img src="/docassemble-AssemblyLine-documentation/img/LITLab_white_and_gold.svg" alt="The Suffolk LIT Lab Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/docassemble-AssemblyLine-documentation/img/LITLab_white_and_gold.svg" alt="The Suffolk LIT Lab Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">The Document Assembly Line</b></a><a class="navbar__item navbar__link" href="/docassemble-AssemblyLine-documentation/docs/get_started">Get Started</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docassemble-AssemblyLine-documentation/docs/overview">Documentation</a></div><div class="navbar__items navbar__items--right"><a href="https://suffolklitlab.org/legal-tech-class/docs/introduction-to-docassemble" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Legal Tech Class<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://docassemble.org/docs.html" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Docassemble Docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/SuffolkLITLab/docassemble-AssemblyLine" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docassemble-AssemblyLine-documentation/docs/overview">Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docassemble-AssemblyLine-documentation/docs/planning">Authoring interviews</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docassemble-AssemblyLine-documentation/docs/style_guide/question_overview">Writing good questions</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docassemble-AssemblyLine-documentation/docs/coding_style_guide">Coding style guide</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docassemble-AssemblyLine-documentation/docs/framework/magic_variables">Special variables</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docassemble-AssemblyLine-documentation/docs/framework/reserved_keywords">Reserved variables</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docassemble-AssemblyLine-documentation/docs/framework/algeneral">AssemblyLine</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docassemble-AssemblyLine-documentation/docs/framework/alrecipes">ALRecipes</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docassemble-AssemblyLine-documentation/docs/framework/altoolbox">ALToolbox</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docassemble-AssemblyLine-documentation/docs/complexity/complexity">RateMyPDF</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docassemble-AssemblyLine-documentation/docs/framework/github_feedback">Feedback</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docassemble-AssemblyLine-documentation/docs/analytics/tracking_usage">InterviewStats</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docassemble-AssemblyLine-documentation/docs/reference/formfyxer/lit_explorer">FormFyxer</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docassemble-AssemblyLine-documentation/docs/efiling/overview">E-filing</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docassemble-AssemblyLine-documentation/docs/alkiln/intro">ALKiln</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docassemble-AssemblyLine-documentation/docs/alkiln/intro">WIP Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docassemble-AssemblyLine-documentation/docs/alkiln">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docassemble-AssemblyLine-documentation/docs/alkiln/advanced">Advanced</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docassemble-AssemblyLine-documentation/docs/alkiln/setup">WIP Setup/Installation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docassemble-AssemblyLine-documentation/docs/alkiln/writing">WIP Writing tests</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docassemble-AssemblyLine-documentation/docs/alkiln/trouble">WIP Troubleshooting &amp; errors</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docassemble-AssemblyLine-documentation/docs/alkiln/security">WIP Security</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docassemble-AssemblyLine-documentation/docs/alkiln/old">WIP Older versions</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/docassemble-AssemblyLine-documentation/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">ALKiln</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">WIP Troubleshooting &amp; errors</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>ALKiln troubleshooting and errors</h1></header><div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>WIP (Work in progress)</p></div></div>
<p>This page will try to help you figure out what is going wrong when you have errors, warnings, or other problems with your ALKiln tests, whether they are from ALKiln itself or from the libraries ALKiln uses.</p>
<p>Maybe you made a mistake, maybe there is a bug in our code, in docassemble, or in a package our tools depend on. Coding is 99% errors and debugging and the pain you feel is real and shared by many. Whatever the source of the problem is, you have made it this far, you belong in this space, and we are excited to have you here.</p>
<p>This document is just starting out and would love contributions!</p>
<p>This page helps with some:</p>
<ul>
<li>ALKiln errors and warnings</li>
<li>Docassemble errors and warnings</li>
<li>Errors and warnings from the third-party libraries that ALKiln uses</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="failure">Failing tests<a href="#failure" class="hash-link" aria-label="Direct link to Failing tests" title="Direct link to Failing tests">​</a></h2>
<p>There are some general troubleshooting steps that you can take when tests fail. If any of these steps help you find more specific problems, look for those on this page too because they may help you get to your solution faster.</p>
<p>For <a href="/docassemble-AssemblyLine-documentation/docs/alkiln/setup#diy-details">ALKilnInThePlayground™</a> tests, you can start by updating your version of <a href="https://github.com/SuffolkLITLab/docassemble-ALKilnInThePlayground" target="_blank" rel="noopener noreferrer">ALKilnInThePlayground</a> and <a href="/docassemble-AssemblyLine-documentation/docs/alkiln/writing#trigger-autodiy">updating your version of ALKiln</a>.</p>
<ul>
<li>Check the <a href="/docassemble-AssemblyLine-documentation/docs/alkiln/writing#console">console logs</a> of the test run. Remember that sometimes the errors will be near the top of the logs or near the bottom.</li>
<li>Check the <a href="/docassemble-AssemblyLine-documentation/docs/alkiln/writing#report">test run report</a>.</li>
<li>Check <a href="/docassemble-AssemblyLine-documentation/docs/alkiln/writing#error-pics">error screenshots/pictures and HTML pages</a>.</li>
<li>Check for <a href="#gherkin">syntax errors in your test files</a>.</li>
</ul>
<p>If you are unsure if the test is acting correctly, go to your docassemble server, create a new Project, pull the code of your package into the Project, and go through the interview manually. Use the failing test as a guide and follow its Steps exactly.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="gherkin">Test file bugs<a href="#gherkin" class="hash-link" aria-label="Direct link to Test file bugs" title="Direct link to Test file bugs">​</a></h2>
<p>There are some errors that come up because of various issues in your <a href="/docassemble-AssemblyLine-documentation/docs/alkiln/writing#test-files">test files</a>.</p>
<p>A syntax error in any of your test files will stop your tests from running at all. To troubleshoot syntax typos, you can use an editor like the <a href="https://www.assertthat.com/online-gherkin-editor" target="_blank" rel="noopener noreferrer">editor at AssertThat</a>. It will let you paste in your test code and will show a red &#x27;x&#x27; next to the lines that have syntax errors.</p>
<p>You also might have a <a href="#step-undefined">typo in a Step itself</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="table-cells">Inconsistent cell count error<a href="#table-cells" class="hash-link" aria-label="Direct link to Inconsistent cell count error" title="Direct link to Inconsistent cell count error">​</a></h3>
<p><strong>Symptom:</strong></p>
<p>No tests will run. The error message will include text similar to this:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Error: Parse error in &#x27;docassemble/ChildSupport/data/sources/new_case.feature&#x27;: (10:5): inconsistent cell count within the table</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Problem:</strong></p>
<p>This error prevents all of your tests being run. The message is telling you that something about the syntax of the table is wrong. One of your story tables could missing a pipe - a <code>|</code> character - or could have an extra pipe, etc. This is an error from a library ALKiln uses.</p>
<p><strong>Debugging:</strong></p>
<p>To fix this you can find the syntax typos by using an editor like the <a href="https://www.assertthat.com/online-gherkin-editor" target="_blank" rel="noopener noreferrer">editor at AssertThat</a>. It will let you paste in your test code and will show a red &#x27;x&#x27; next to the lines that have syntax errors.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="step-undefined">Undefined step<a href="#step-undefined" class="hash-link" aria-label="Direct link to Undefined step" title="Direct link to Undefined step">​</a></h3>
<p><strong>Symptom:</strong></p>
<p>At the very bottom of your <a href="/docassemble-AssemblyLine-documentation/docs/alkiln/writing#console">console output</a> you see the message &quot;Undefined&quot; and &quot;You can implement missing steps with the snippets below&quot;.</p>
<p>This will make just the current test fail. This is an error message from a library ALKiln uses called <a href="https://cucumber.io/" target="_blank" rel="noopener noreferrer">cucumber</a>.</p>
<p><strong>Problem:</strong></p>
<p>You have a typo in the Step that failed, so cucumber thinks that you are trying to create a new Step. The error message should contain the text of the Step that you wrote.</p>
<p><strong>Solution:</strong></p>
<ol>
<li>Check the documentation for the Step again.</li>
<li>Copy/paste the Step from the documentation into a new line in your test.</li>
<li>If you need to fill in blanks in the Step, copy/paste those values from your existing test code.</li>
<li>If you want to be helpful to us, you can check if there really was a typo. If the text of the two lines look the same visually, use a diff checker like <a href="https://www.diffchecker.com/text-compare/" target="_blank" rel="noopener noreferrer">https://www.diffchecker.com/text-compare/</a> to compare your original Step text with the new Step text. If the diff checker shows that the text is the same, contact us. Maybe we have a typo in our documentation.</li>
<li>Delete your original Step text and try the test again.</li>
<li>If the test has the same problem, contact us. Maybe we have a typo in our documentation.</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="unhandled-promise-rejection">UnhandledPromiseRejection error<a href="#unhandled-promise-rejection" class="hash-link" aria-label="Direct link to UnhandledPromiseRejection error" title="Direct link to UnhandledPromiseRejection error">​</a></h2>
<p>This is a misleading error from a library ALKiln uses. It is hiding the real error message inside it. You need to read the text of the whole paragraph to see what the actual error is. You might see more useful information in the <a href="/docassemble-AssemblyLine-documentation/docs/alkiln/writing#report">report</a> above those messages or in your <a href="/docassemble-AssemblyLine-documentation/docs/alkiln/writing#artifacts">artifacts</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="works-manually">Everything works fine when I run the test manually<a href="#works-manually" class="hash-link" aria-label="Direct link to Everything works fine when I run the test manually" title="Direct link to Everything works fine when I run the test manually">​</a></h2>
<p>When your ALKlin tests fail, but your interviews work fine when you run them by hand, it is possible that something is wrong with your package, with the test, or possibly with your understanding of the test code or interview code.</p>
<p>For example, maybe when you run the interview manually, field by field, you <em>think</em> you are following your test to the letter, but a <a href="/docassemble-AssemblyLine-documentation/docs/alkiln/writing#values">misunderstanding of how to set a variable</a> has led you in the wrong direction.</p>
<p>Some of the common reasons for specifically this problem are under this heading. That is especially true for tests that fail on GitHub, but pass manually <em>and</em> with <a href="/docassemble-AssemblyLine-documentation/docs/alkiln/setup#diy-details">ALKilnInThePlayground™</a> tests. Some problems are more complex and might be happening for other reasons, so they are elsewhere in these docs. For example, when your tests pass manually, you may have a <a href="#var-val">missing variable from a test typo</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="uncommitted">Uncommitted files<a href="#uncommitted" class="hash-link" aria-label="Direct link to Uncommitted files" title="Direct link to Uncommitted files">​</a></h3>
<p>Sometimes we forget to include/select a file on our <a href="https://docassemble.org/docs/playground.html#packages" target="_blank" rel="noopener noreferrer">Project&#x27;s Packages page</a> before <a href="https://docassemble.org/docs/development.html#versioncontrol" target="_blank" rel="noopener noreferrer">committing to GitHub</a>. This might be an interview file, template file, static file, source file, or a module.</p>
<p>Leaving this out can lead to problems like a <a href="#file-not-found">file not being found</a> or an <a href="#invalid-path">invalid playground path</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="file-not-found">File not found<a href="#file-not-found" class="hash-link" aria-label="Direct link to File not found" title="Direct link to File not found">​</a></h3>
<p>This might mean that you have a file in your Playground Project, but that you still have to save it on the Project&#x27;s Packages page and commit that to GitHub. Your tests will pass for that Project in your Playground, but your interview will break when you or others install it from GitHub.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="invalid-path">Invalid playground path<a href="#invalid-path" class="hash-link" aria-label="Direct link to Invalid playground path" title="Direct link to Invalid playground path">​</a></h3>
<p>If you see the text &quot;invalid playground path&quot; in the report, that means the <code>Given I start the interview at...</code> Step for that scenario is naming an interview that doesn&#x27;t exist. Check for a typo in your interview name and check that the file exists.</p>
<p>See <a href="#uncommitted">uncommitted files</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="variable-not-found">Docassemble: Variable could not be looked up<a href="#variable-not-found" class="hash-link" aria-label="Direct link to Docassemble: Variable could not be looked up" title="Direct link to Docassemble: Variable could not be looked up">​</a></h2>
<p><strong>Symptom:</strong></p>
<p>On the picture of the page with the error, you see this error message:</p>
<blockquote>
<p>There was a reference to a variable ‘some_var’ that could not be looked up in the question file (for language ‘en’) or in any of the files incorporated by reference into the question file.</p>
</blockquote>
<p>This is a &quot;reference error&quot;.</p>
<p><strong>Problem:</strong></p>
<p>This is a reference error. It means docassemble tried to get the value for a variable, but could not find where you defined the variable anywhere in your code or in the code you included or imported. Possible causes:</p>
<ul>
<li>It may be that you have not defined a variable in your interview or that you have not defined it in a way that docassemble can find it. That can be for many reasons. For example, maybe you are using an <a href="https://docassemble.org/docs/fields.html#index%20variables" target="_blank" rel="noopener noreferrer">index variable</a> or a <a href="https://docassemble.org/docs/fields.html#generic" target="_blank" rel="noopener noreferrer">generic object</a> incorrectly or maybe you accidentally deleted the block where you were defining the variable.</li>
<li>It may be that you have a typo either where you use the variable or where you define the variable. The typo may be in the value instead.</li>
<li>It may be that you have a typo in a <a href="#var-val">variable name or value</a> in your test.</li>
<li>It may be that you are <a href="/docassemble-AssemblyLine-documentation/docs/alkiln/writing#values">setting the value incorrectly</a> in your test. <a href="/docassemble-AssemblyLine-documentation/docs/alkiln/writing#checkboxes">Checkboxes are especially complex fields to set</a>.</li>
</ul>
<p>The mistake may have happened on a page much farther back than you expect with a field ALKiln <a href="/docassemble-AssemblyLine-documentation/docs/alkiln/writing#unused-rows">skipped</a>.</p>
<p><strong>Debugging:</strong></p>
<p>Sometime the easiest way to see what is wrong is to run the interview manually. Fill in the same values as the test fills in. You can then see what goes wrong when you reach the page with the error.</p>
<p>If the mistake is in your interview code, you can fix that bug. If your interview code is fine, you might have to troubleshoot <a href="#var-val">a typo in your test code</a>.</p>
<!-- -->
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="missing">ALKiln could not find a field or value<a href="#missing" class="hash-link" aria-label="Direct link to ALKiln could not find a field or value" title="Direct link to ALKiln could not find a field or value">​</a></h2>
<p>Some possible causes:</p>
<ol>
<li>You have changed your code to remove a variable or value and have not yet updated your tests.</li>
</ol>
<p>Look at the error message closely. Look at the <a href="#writing_tests.mdx#error-pics">picture and HTML of the error page</a>. Try to find the variable or value in your interview code or in the code of included or imported files. See if that variable or value is also in your test file.</p>
<ol>
<li>The field is hidden behind a <code>show if</code> of some kind.</li>
</ol>
<p>Follow the above steps first. Then check if the field is hidden. If it is hidden, try to see what can make that field visible. Whatever variable and value reveals that answer, check for those in your interview file and in your test code.</p>
<ol>
<li>There might be a typo in your test. Reading the <a href="#var-val">section about test typos</a> might help.</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="skipped">Skipped rows or variables<a href="#skipped" class="hash-link" aria-label="Direct link to Skipped rows or variables" title="Direct link to Skipped rows or variables">​</a></h2>
<p>If you look in a <a href="/docassemble-AssemblyLine-documentation/docs/alkiln/writing#report">test suite report</a> and see that ALKiln <a href="/docassemble-AssemblyLine-documentation/docs/alkiln/writing#unused-rows">skipped setting a variable</a>, your test code might be <a href="#missing">missing a field or value</a> that it needs in order to fill out that field.</p>
<p>If the test still passed, the variable probably belongs to a field that was optional.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="var-val">Wrong variable or value<a href="#var-val" class="hash-link" aria-label="Direct link to Wrong variable or value" title="Direct link to Wrong variable or value">​</a></h2>
<p>Unfortunately, test code can be tricky to get right. You might have a simple typo or you might have a perfectly normal misunderstanding of <a href="/docassemble-AssemblyLine-documentation/docs/alkiln/writing#values">how to write variable names and values</a>.</p>
<!-- -->
<p>You can check your test code for incorrect variable or value names in a few different ways.</p>
<ol>
<li>If you give every question in your interview an id, the <a href="/docassemble-AssemblyLine-documentation/docs/alkiln/writing#report">report</a> can help show you where the test failed or where ALKiln skipped setting variables. For each test, the report often has a list of question ids. For each question id, the report has a list of variables that ALKiln set on the page that had the error. If the test failed, you can see what question id the test got to. You can also check previous questions to see what variables are missing from each of those pages - what <a href="/docassemble-AssemblyLine-documentation/docs/alkiln/writing#unused-rows">fields ALKiln skipped</a>.</li>
<li>It is more annoying, but in most cases<sup><a href="#user-content-fn-except" id="user-content-fnref-except" data-footnote-ref="true" aria-describedby="footnote-label">1</a></sup> you can copy the variable name from your test and search for it in your interview code. You can do the same for values of multiple choice questions.</li>
<li>Alternatively, in most cases<sup><a href="#user-content-fn-except" id="user-content-fnref-except-2" data-footnote-ref="true" aria-describedby="footnote-label">1</a></sup> you can go through the interview manually, but follow this procedure:<!-- -->
<ol>
<li>For every single page  (even if you think this page has nothing to do with the problem), click on the <code>&lt;/&gt;</code> in the nav bar to see the source of the page.</li>
<li>Copy the name of the variable from your test and search for it on the page of the running interview.</li>
<li>For multiple choice questions, do the same for the value.</li>
<li>Use those values to answer the questions <em>exactly</em> as the test would answer them.</li>
<li>Continue doing this till you find the problem.</li>
</ol>
</li>
<li>If you are unable to find the name of the variable or value in any other way, our last suggestion is the hardest to do, but most reliable - run the interview manually and <a href="https://www.dreamhost.com/blog/how-to-inspect-a-website/" target="_blank" rel="noopener noreferrer">inspect each page&#x27;s HTML</a> to find exact names. This is complex and we are happy to show you how to do this. Here is a refresher:<!-- -->
<ol>
<li>Go to a new page.</li>
<li>Click on the <code>&lt;/&gt;</code> in the nav bar to see the source of the page.</li>
<li>For every field in the page:<!-- -->
<ol>
<li>If you cannot see the variable name or value, like for an <code>object_checkbox</code> field or a field created with <code>code</code>:<!-- -->
<ol>
<li>Open the browser development tools.</li>
<li>Examine the DOM of a field to find the encoded name of the variable.</li>
<li>Use <code>atob(&#x27;the encoded name or id&#x27;)</code> with the encoded name or id to fully decode every part of the variable name. You may have to decode multiple times.</li>
<li>From those decoded values, put together the variable name that you need to use. </li>
</ol>
</li>
<li>Copy the variable name and use your editor to search for that exact variable name in your test file. The variable name is the fully decoded and reconstructed variable name.</li>
<li>In the final variable name, replace <code>x</code>, <code>i</code>, <code>j</code>, etc. with their actual values on that page.</li>
<li>If the field is a multiple choice field like radio buttons, do the same for the value and use your editor to search for that exact value in your test file. Make sure it appears along with the correct variable name. For a checkbox field, the value is either <code>True</code> or <code>False</code>.</li>
<li>Set the value exactly as the test would have set it.</li>
</ol>
</li>
<li>Go on to the next page till you reach the end of your interview or the error.</li>
</ol>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="missing-phrase">Phrase is missing<a href="#missing-phrase" class="hash-link" aria-label="Direct link to Phrase is missing" title="Direct link to Phrase is missing">​</a></h2>
<p><strong>Symptom</strong></p>
<p>Example error:</p>
<div class="language-txt codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-txt codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">The text &quot;a document called a &#x27;Certified docket sheet&#x27;&quot; SHOULD be on this page, but it&#x27;s NOT</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Debugging</strong></p>
<p>First, look over the <a href="/docassemble-AssemblyLine-documentation/docs/alkiln/writing#error-pics">HTML of the page that had the error</a> and see what your test is seeing.</p>
<p>If your phrase is missing there, try running the interview manually and see if it works. If it does, check the section on <a href="#works-manually">interviews that work when you run them manually</a>.</p>
<p>If it looks like the phrase is actually there, a diff checker can be your best friend. Use a diff checker like <a href="https://www.diffchecker.com/text-compare/" target="_blank" rel="noopener noreferrer">https://www.diffchecker.com/text-compare/</a> to copy/paste both the page&#x27;s text and your test&#x27;s text to check for differences. If the tool shows you differences, you can copy/paste the page&#x27;s text into your test.</p>
<p>Even though the text might look correct to you visually and might be the same ones you put in your code, you might not have used the exact same characters that the user is seeing. Docassemble sometimes gives the user slightly different characters than the ones you typed in your code. Ignore the text that you wrote in your code.</p>
<p>See a section in <a href="/docassemble-AssemblyLine-documentation/docs/alkiln/writing#special-chars">tips about quotes</a> for more detailed information. To sum up, it is best to copy/paste the text <strong>straight from the screen the user sees</strong>.</p>
<div class="theme-admonition theme-admonition-danger admonition_xJq3 alert alert--danger"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>Wrong</div><div class="admonitionContent_BuS1"><div class="language-gherkin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-gherkin codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">  I should see the phrase &quot;a document called a &#x27;Certified docket sheet&#x27;&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Right</div><div class="admonitionContent_BuS1"><div class="language-gherkin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-gherkin codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">  I should see the phrase &quot;a document called a ‘Certified docket sheet’&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="next-page-timeout">Timeout or &quot;it took too long to load the next page&quot;<a href="#next-page-timeout" class="hash-link" aria-label="Direct link to Timeout or &quot;it took too long to load the next page&quot;" title="Direct link to Timeout or &quot;it took too long to load the next page&quot;">​</a></h2>
<p>Different problems can cause the report to say that something &quot;took too long&quot; or caused a &quot;timeout&quot; error.</p>
<p>A &quot;timeout&quot; error can happen when a page took too long to load at some point in setup, when running tests, or during test cleanup. This can be because:</p>
<ol>
<li>The page was trying to load a big file</li>
<li>ALKiln could not continue to the next page for some reason</li>
<li>A Story Table was unable to reach the page with the specified <code>id</code></li>
<li>There is a typo in the name of the interview YAML file that the test should go to</li>
</ol>
<p>If a page was taking too long to load a big file, use <a href="/docassemble-AssemblyLine-documentation/docs/alkiln/writing#custom-timeout">the &quot;max seconds&quot; Step</a> to give the page more time to load.</p>
<p>You might be able to look at the <a href="/docassemble-AssemblyLine-documentation/docs/alkiln/writing#error-pics">error page picture and HTML</a> for more details. In GitHub, you can download the <a href="/docassemble-AssemblyLine-documentation/docs/alkiln/writing#artifacts">test artifacts</a> to look for it.</p>
<p>In GitHub, this error can also happen when:</p>
<ol>
<li>The server was busy for too long.</li>
<li>The server was down.</li>
<li>That url is stored in the <code>SERVER_URL</code> <a href="/docassemble-AssemblyLine-documentation/docs/alkiln/writing#secrets">GitHub secret</a> is wrong or out of date.</li>
</ol>
<p>If the server might have been busy or down, try <a href="https://docs.github.com/en/actions/managing-workflow-runs/re-running-workflows-and-jobs#re-running-all-the-jobs-in-a-workflow" target="_blank" rel="noopener noreferrer">re-running the tests</a>.</p>
<p>The value of <code>SERVER_URL</code> will be invisible - GitHub considers the value of the secret to be sensitive information, so it is impossible to see that value. You can still give it a new value, though, and that is worth trying. Find the address of the docassemble server where the docassemble <a href="/docassemble-AssemblyLine-documentation/docs/alkiln/security#testing-server">testing account</a> is located. Edit the secret to give it that url.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="no-artifacts">No artifacts<a href="#no-artifacts" class="hash-link" aria-label="Direct link to No artifacts" title="Direct link to No artifacts">​</a></h2>
<p>If ALKiln is missing all <a href="/docassemble-AssemblyLine-documentation/docs/alkiln/writing#artifacts">artifacts</a> by the end of the test run, it means none of the tests ran. There are several possible reasons for this. For this type of error, it can be especially useful to look at the <a href="/docassemble-AssemblyLine-documentation/docs/alkiln/writing#console">console logs</a> and error messages.</p>
<p>Possible reasons for missing artifacts for any test:</p>
<ul>
<li>You might have a gherkin syntax error somewhere in your test files. If this was the case, the setup should have completed and the test run should have started, but immediately failed. <a href="#gherkin">Find and fix that syntax error</a>.</li>
</ul>
<p>Possible reasons for missing artifacts for <a href="/docassemble-AssemblyLine-documentation/docs/alkiln/setup#githubNyou-details">GitHub+You™</a> tests:</p>
<ul>
<li>Your test server was unavailable. If this was the case, your <a href="/docassemble-AssemblyLine-documentation/docs/alkiln/writing#console">GitHub job logs</a> should show that the test setup failed. Check if the server is running now and run the tests again.</li>
<li>Your docassemble developer account credentials were invalid. That is, the API key you created for the <a href="/docassemble-AssemblyLine-documentation/docs/alkiln/security#test-accounts">docassemble testing account</a> and put in the <a href="/docassemble-AssemblyLine-documentation/docs/alkiln/writing#workflow-inputs"><code>DOCASSEMBLE_DEVELOPER_API_KEY</code> GitHub input</a> may no longer exist. Maybe the API key got deleted in a docassemble server update. Maybe someone else changed it. You should create a new API key for that testing account and change the value of your <code>DOCASSEMBLE_DEVELOPER_API_KEY</code> secret to the new value. You could also create a new testing account and create a new API key for the new account.</li>
</ul>
<p>Possible reasons for missing artifacts for <a href="/docassemble-AssemblyLine-documentation/docs/alkiln/setup#sandbox-details">GitHub Sandbox™</a> tests:</p>
<ul>
<li>The Docker container or the docassemble server installation is having trouble starting up. If this is the case, your <a href="/docassemble-AssemblyLine-documentation/docs/alkiln/writing#console">GitHub job logs</a> should show that the docker build step failed. This is a complex problem and takes experience with creating docassemble servers and maybe Docker. You can set the ALKiln <a href="/docassemble-AssemblyLine-documentation/docs/alkiln/writing#sandbox-optional-inputs"><code>SHOW_DOCKER_OUTPUT</code> configuration input</a> to &quot;true&quot; to show you more information about what is going on during that setup process. If you have experience with actions and the command line, you might also be able to use the <a href="https://github.com/mxschmitt/action-tmate" target="_blank" rel="noopener noreferrer">tmate action</a> to explore more about what is going on in your Docker container.</li>
</ul>
<p>Possible reasons for missing artifacts for <a href="/docassemble-AssemblyLine-documentation/docs/alkiln/setup#githubNyou-details">GitHub+You™</a> and <a href="/docassemble-AssemblyLine-documentation/docs/alkiln/setup#sandbox-details">GitHub Sandbox™</a> tests:</p>
<ul>
<li>The package manager that installs ALKiln had a problem. This does happen every now and then. If this was the case, your <a href="/docassemble-AssemblyLine-documentation/docs/alkiln/writing#console">GitHub job logs</a> should show test setup failure. You can <a href="https://status.npmjs.org/" target="_blank" rel="noopener noreferrer">check its status</a>, but the problem would have to be happening for a lot of people at once for it to show up.</li>
<li>GitHub itself had a problem. This is pretty rare. It can cause a failure at any point in the test. You can <a href="https://www.githubstatus.com/" target="_blank" rel="noopener noreferrer">check GitHub&#x27;s status</a>. Again, the problem would have to be happening to a lot of people at once for it to show up on that site.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="docker-container"> <a href="/docassemble-AssemblyLine-documentation/docs/alkiln/setup#sandbox-details">GitHub Sandbox™</a> Docker trouble (advanced)<a href="#docker-container" class="hash-link" aria-label="Direct link to docker-container" title="Direct link to docker-container">​</a></h2>
<p><strong>This is for:</strong> <a href="/docassemble-AssemblyLine-documentation/docs/alkiln/setup#sandbox-details">GitHub Sandbox™</a> tests</p>
<p><strong>You should be familiar with:</strong></p>
<ul>
<li>The terminal, command line, or command prompt</li>
<li>SSH</li>
<li>GitHub actions and workflows</li>
<li>Setting up and troubleshooting a docassemble docker container</li>
</ul>
<p><em>This is a very advanced topic. If you want a hand, we are happy to help.</em></p>
<p>If your docker container is failing to start, failing to install docassemble, or failing to install your package, it is possible to do more docker troubleshooting using <a href="https://github.com/marketplace/actions/debugging-with-tmate" target="_blank" rel="noopener noreferrer">the tmate GitHub action</a> and using the regular <a href="https://docassemble.org/docs/docker.html#troubleshooting" target="_blank" rel="noopener noreferrer">docassemble docker troubleshooting steps</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="slow">Slow tests<a href="#slow" class="hash-link" aria-label="Direct link to Slow tests" title="Direct link to Slow tests">​</a></h2>
<p><strong>This is for:</strong> Everyone</p>
<p>There are a various reasons your tests could be slow.</p>
<p>First, there are reasons even passing tests can be slow, including:</p>
<ol>
<li>Your pages may just be taking a long time to load. This might happen if you are building a large document, uploading a large document, or for other reasons. That can even cause the tests to fail if it takes too long. You can use the <a href="/docassemble-AssemblyLine-documentation/docs/alkiln/writing#custom-timeout">&quot;max seconds&quot; Step</a> to give them more time. There are some things you can do to speed up some kinds of processes on your server, but that is out of scope for this document.</li>
<li><a href="/docassemble-AssemblyLine-documentation/docs/alkiln/writing#download">Downloading a lot of documents</a> can take a while. Right now, ALKiln is unable to tell when a document is done downloading, so it gives every document the maximum time possible. By default, that is a full 60 seconds. You can decrease that time with the <a href="/docassemble-AssemblyLine-documentation/docs/alkiln/writing#custom-timeout">&quot;max seconds&quot; Step</a>, but that time might be too short for the documents to download. You can experiment a bit. You can also be tricky with the &quot;max seconds&quot; Step, though, and increase and decrease the value at appropriate times to improve both speed and downloading. </li>
<li>If your server reloads a lot during <a href="/docassemble-AssemblyLine-documentation/docs/alkiln/setup#githubNyou-details">GitHub+You™</a> tests, it will take longer for tests to finish because the tests try to wait for the server to be available to avoid <a href="#flake">&quot;flaky&quot;</a> tests. Your server can reload for many reasons. For example, saving your config file, saving a python module, or pulling a package that uses a python module can all cause your server to reload. This might even cause your tests to fail.</li>
</ol>
<p>There are also some different reasons that tests get slower when they fail, including:<span id="server-reload"></span></p>
<ol>
<li>Each failing test gets re-run once, so that can double the amount of time that tests take. Currently, there is no way to choose whether to re-run tests or not.</li>
<li>When a Story Table is trying to reach a target page and gets stuck somewhere, it will wait the maximum seconds allowed for a page load (which you can <a href="/docassemble-AssemblyLine-documentation/docs/alkiln/writing#custom-timeout">change</a>) to let the interview continue to the next page. By default, that is 30 seconds. Since those tests re-run, that can make a test take more than 1 minute.</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="flake">Flaky tests<a href="#flake" class="hash-link" aria-label="Direct link to Flaky tests" title="Direct link to Flaky tests">​</a></h2>
<p><strong>This is for:</strong> Everyone</p>
<p>&quot;Flake&quot; happens when your tests fail for reasons that have nothing to do with your interview or test code. There can be many causes for flaky tests. For example:</p>
<ul>
<li>Your server reloading during <a href="/docassemble-AssemblyLine-documentation/docs/alkiln/setup#githubNyou-details">GitHub+You™</a> tests could make it impossible for your tests to reach your interview webpage. You just have to re-run those tests.</li>
<li>A slow-loading interview page might make ALKiln think your server is unavailable. That can happen for different reasons. For example, a large document might be taking a long time to load. You might be able to avoid this failure by increasing the maximum wait time with the <a href="/docassemble-AssemblyLine-documentation/docs/alkiln/writing#custom-timeout">&quot;max seconds&quot; Step</a>. That can make tests <a href="#slow">slower</a>. You can be tricky about it, though. If you just increase that value for one Step and then reduce it again, that can avoid slowing down your tests too much.</li>
<li>Tapping on an element might show content and move other elements around. ALKiln might fail to click on the elements that are moving. You can use the <a href="/docassemble-AssemblyLine-documentation/docs/alkiln/writing#wait">&quot;wait&quot; Step</a> to give elements more time to finish moving.</li>
<li>Third-party services, like GitHub or package managers, that the tests rely on do have problems every now and then. You just have to re-run those tests.</li>
<li>An interview page rendering slowly can hide a field that ALKiln is trying to fill in. If we find that there is a particular type of field that is particularly slow to load, we can slow down ALKiln for that type of field, but that is the most ALKiln can do.</li>
</ul>
<p>The <a href="/docassemble-AssemblyLine-documentation/docs/alkiln/setup#sandbox-details">GitHub Sandbox™</a> tests have the best chance of avoiding flakiness because they get their own dedicated server, but even they can flake out sometimes.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="missing-trigger">Missing trigger variable<a href="#missing-trigger" class="hash-link" aria-label="Direct link to Missing trigger variable" title="Direct link to Missing trigger variable">​</a></h2>
<p>This warning only matters for old 3-column Story Tables that use index variables or generic objects.</p>
<p>If you are using a story table with <a href="https://docassemble.org/docs/fields.html#index%20variables" target="_blank" rel="noopener noreferrer">index variables</a> (<code>i</code>, <code>j</code>, <code>k</code>, etc) or <a href="https://docassemble.org/docs/fields.html#generic" target="_blank" rel="noopener noreferrer">generic objects</a> (<code>x</code>), you need to add some <a href="/docassemble-AssemblyLine-documentation/docs/alkiln/writing#special-html">special HTML</a> to the interview file where you set your <a href="https://docassemble.org/docs/initial.html#default%20screen%20parts" target="_blank" rel="noopener noreferrer"><code>default screen parts</code> block</a>. Without that HTML, ALKiln can get confused about what variable you are try to set.</p>
<p>The 3-column Story Table is old and you should stop using it. You should <a href="#deprecated-story-tables">switch to the current 2-column Story Table</a> when you get a chance.</p>
<p>This warning sometimes shows up when nothing is wrong. If you are not using a 3-column Story Table or your interview has no index variables or generic objects, you can ignore this warning.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="deprecated-story-tables">Switch to 2-column Story Tables<a href="#deprecated-story-tables" class="hash-link" aria-label="Direct link to Switch to 2-column Story Tables" title="Direct link to Switch to 2-column Story Tables">​</a></h2>
<p><strong>This is for:</strong> anyone using a 3-column Story Table and also has <a href="https://docassemble.org/docs/fields.html#index%20variables" target="_blank" rel="noopener noreferrer">index variables</a> or <a href="https://docassemble.org/docs/fields.html#generic" target="_blank" rel="noopener noreferrer">generic objects</a>.</p>
<p>How to switch from the 3-column Story Table to the 2-column Story Table:</p>
<ol>
<li>Remove the <code>trigger</code> column (the 3rd column) from the header row and every other row</li>
<li>Replace all <a href="https://docassemble.org/docs/fields.html#index%20variables" target="_blank" rel="noopener noreferrer">index variables</a> (<code>i</code>, <code>j</code>, <code>k</code>, etc) or <a href="https://docassemble.org/docs/fields.html#generic" target="_blank" rel="noopener noreferrer">generic objects</a> (<code>x</code>) in the <code>var</code> column (the 1st column) with their actual values.</li>
</ol>
<div class="theme-admonition theme-admonition-danger admonition_xJq3 alert alert--danger"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>Before</div><div class="admonitionContent_BuS1"><div class="language-gherkin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-gherkin codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    | var | value | trigger |</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    | x[i].hair.how_much | Enough | users[0].hair.how_much |</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    | x[i].hair.color | Sea green | users[0].hair.how_much |</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>After</div><div class="admonitionContent_BuS1"><div class="language-gherkin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-gherkin codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    | var | value |</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    | users[0].hair.how_much | Enough |</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    | users[0].hair.color | Sea green |</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div>
<p>Add more <a href="/docassemble-AssemblyLine-documentation/docs/alkiln/writing#special-html">special HTML</a> to your <a href="https://docassemble.org/docs/initial.html#default%20screen%20parts" target="_blank" rel="noopener noreferrer"><code>default screen parts</code> block</a>. To summarize:</p>
<p>Keep the trigger HTML in your <a href="https://docassemble.org/docs/initial.html#default%20screen%20parts" target="_blank" rel="noopener noreferrer"><code>default screen parts</code> block</a>. It can be useful for other reasons. Add the proxy variable HTML to that <code>default screen parts</code> block.</p>
<!-- -->
<section data-footnotes="true" class="footnotes"><h2 class="anchor anchorWithStickyNavbar_LWe7 sr-only" id="footnote-label">Footnotes<a href="#footnote-label" class="hash-link" aria-label="Direct link to Footnotes" title="Direct link to Footnotes">​</a></h2>
<ol>
<li id="user-content-fn-except">
<p>In some cases, you will be unable to find a variable or value name in your interview code. For example, <code>object</code>-type fields, like <code>object_multiselect</code> or for fields that use <code>code</code> might use values that are outside of your interview code. They might be in a module of your interview, in a module of an interview you <code>include</code>, in a database like S3, or somewhere else. <a href="#user-content-fnref-except" data-footnote-backref="" aria-label="Back to reference 1" class="data-footnote-backref">↩</a> <a href="#user-content-fnref-except-2" data-footnote-backref="" aria-label="Back to reference 1-2" class="data-footnote-backref">↩<sup>2</sup></a></p>
</li>
</ol>
</section></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/SuffolkLITLab/docassemble-AssemblyLine-documentation/edit/main/docs/alkiln/troubleshooting.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docassemble-AssemblyLine-documentation/docs/alkiln/writing"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">WIP Writing tests</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docassemble-AssemblyLine-documentation/docs/alkiln/security"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">WIP Security</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#failure" class="table-of-contents__link toc-highlight">Failing tests</a></li><li><a href="#gherkin" class="table-of-contents__link toc-highlight">Test file bugs</a><ul><li><a href="#table-cells" class="table-of-contents__link toc-highlight">Inconsistent cell count error</a></li><li><a href="#step-undefined" class="table-of-contents__link toc-highlight">Undefined step</a></li></ul></li><li><a href="#unhandled-promise-rejection" class="table-of-contents__link toc-highlight">UnhandledPromiseRejection error</a></li><li><a href="#works-manually" class="table-of-contents__link toc-highlight">Everything works fine when I run the test manually</a><ul><li><a href="#uncommitted" class="table-of-contents__link toc-highlight">Uncommitted files</a></li><li><a href="#file-not-found" class="table-of-contents__link toc-highlight">File not found</a></li><li><a href="#invalid-path" class="table-of-contents__link toc-highlight">Invalid playground path</a></li></ul></li><li><a href="#variable-not-found" class="table-of-contents__link toc-highlight">Docassemble: Variable could not be looked up</a></li><li><a href="#missing" class="table-of-contents__link toc-highlight">ALKiln could not find a field or value</a></li><li><a href="#skipped" class="table-of-contents__link toc-highlight">Skipped rows or variables</a></li><li><a href="#var-val" class="table-of-contents__link toc-highlight">Wrong variable or value</a></li><li><a href="#missing-phrase" class="table-of-contents__link toc-highlight">Phrase is missing</a></li><li><a href="#next-page-timeout" class="table-of-contents__link toc-highlight">Timeout or &quot;it took too long to load the next page&quot;</a></li><li><a href="#no-artifacts" class="table-of-contents__link toc-highlight">No artifacts</a></li><li><a href="#docker-container" class="table-of-contents__link toc-highlight"> <kittylitter></kittylitter> Docker trouble (advanced)</a></li><li><a href="#slow" class="table-of-contents__link toc-highlight">Slow tests</a></li><li><a href="#flake" class="table-of-contents__link toc-highlight">Flaky tests</a></li><li><a href="#missing-trigger" class="table-of-contents__link toc-highlight">Missing trigger variable</a></li><li><a href="#deprecated-story-tables" class="table-of-contents__link toc-highlight">Switch to 2-column Story Tables</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/SuffolkLITLab/docassemble-AssemblyLine" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> | This documentation website is built with <a href="https://docusaurus.io/" target="_blank">Docusaurus</a>.</div></div></div></footer></div>
</body>
</html>